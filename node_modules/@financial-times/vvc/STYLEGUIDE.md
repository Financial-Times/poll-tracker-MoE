# Coding style guide

This document covers some of the foundational decisions we've made regarding the visual vocabulary components code. This does not cover the visual aesthetics of the components or templates themselves. You can find those guides at TKTK.

---

### Using vx

If a vx component works out of the box for what we need, use it. No need to reinvent the wheel.

### PropTypes

PropTypes and default props are configured in one file each (`src/components/prop-types` and `src/components/default-props`) and imported into their appropriate modules. A list of valid PropType validators can be found on [npm/prop-types](https://www.npmjs.com/package/prop-types#usage). PropTypes are used by the VVC scaffolder to provide users with a list of configuration options TKTK.

#### Naming props

- PropTypes should be as descriptive and concise as possible. Refer to [Google's javascript style guide](https://google.github.io/styleguide/jsguide.html#naming) for naming conventions.
- Use `color` rather than `colour` for consistency with CSS properties.
- Props for scales should end with `Scale` (e.g. `xScale`).
- Props that represent variable names should end with `Variable` (e.g. `xVariable`).
- PropTypes that are related should have the same prefix (e.g. `subtitleLineHeight`, `subtitlePosition`, `subtitleStyle`). Consider nesting them inside an object (e.g. `margin`, `padding`, `font`) or extracting the relevant component into a smaller component (e.g. a subtitle component). Use CSS properties as a guideline.
- Avoid boolean PropTypes if values could have a non-boolean value. For example, `hideSubtitle` (boolean) and `subtitle` (`My cool subtitle`) should just be `subtitle` with `subtitle: PropTypes.oneOfType([PropTypes.string, PropTypes.bool])`.

#### Deciding on a prop's type

- Do not pass scales as props. Instead, pass props like `range` and `domain` (TKTK - decide to decide on this later). One suggestion, templates can only receive arrays of numbers or strings as props, components can receive anything, including functions (like color scales that the templates construct).
- Do not pass function through props (TKTK)

### Data formatting

There are four types of data formats in VVC.

- continuous: (TKTK)
- discrete: (TKTK)
- hierarchical: (TKTK)
- graph: (TKTK)

Schemas for data formats can be found in TKTK. Sample data in these formats can be found in `src/templates/sample-data`.

VVC will support data in a CSV or JSON format.

### Components

A component is a low-level building block used to create various chart templates. Components can import other components and should be as small as possible.

### Templates

A template is meant to be reusable and used out of the box without any coding. It should be configurable from the passed in props. There should be defaults set so that someone can create a new chart by just changing the dataset.

- Chart templates should include the chart frame. The chart frame component should wrap the contents of each chart, including the axes.
- Scale **domain** should be set on the template level and passed down to relevant components. Scale **range** should be set on individual components. This is to support responsive functionality.
- Data parsing should happen in the template level. TKTK
- The structure of a component should look like the following:

```javascript
<ChartFrame type={type} width={width} height={height} margin={margin}>
  <ComponentsSpecificToTemplate />

  {/* y-axis */}
  <Axis orientation={yAxisOrientation} scale={yScale} />

  {/* x-axis */}
  <Axis orientation={xAxisOrientation} scale={xScale} />
</ChartFrame>
```

### Styling

Styles relating to how things are positioned are specified in a util file detailing responsive styles (`src/util/index.js`). Styles related to the aesthetics — how things look or are styled — are specified in an [Emotion theming layer](https://emotion.sh/docs/theming). At the moment, style files are named `styles.js` and placed in the same directory as the corresponding React component, but this will change as we migrate to Emotion theming.

### Stories

There should be a story for every component or template created. Story files live in the same directory as their corresponding React components and are named `<nameofreactcomponentfile>.stories.md`. Stories should pull one of the sample data feeds from the `src/templates/sample-data` folder and demo the configurable props.
