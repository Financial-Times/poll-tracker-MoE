import { Meta, Story, Preview } from '@storybook/addon-docs/blocks';
import { useState } from 'react';
import { scaleLinear, scaleTime, scaleOrdinal, scaleLog } from '@visx/scale';
import { extent } from 'd3-array';
import ChartFrame from '../chart-frame';
import dateContinuousLogSampleData from '../../sample-data/date-continuous-log.js';
import { extentMulti } from '../../util/parseData';
import Voronoi from './';

<Meta title="Components/Voronoi" component={Voronoi} />

# Tooltip

Tooltips can be added to charts by passing them point data

export const sineDataOverTime = Array(10)
  .fill()
  .map((d, i) => ({
    x: i,
    y: Math.sin(i),
    color: 'blue',
    label: `item: ${i}`,
    id: i,
  }));

### Basic use (sine generator data)

<Preview>
  <Story name="Basic use">
    <ChartFrame>
      <Voronoi
        data={sineDataOverTime}
        xScale={scaleTime({ domain: extent(sineDataOverTime, (d) => d.x) })}
        yScale={scaleLinear({
          domain: extent(sineDataOverTime, (d) => d.y),
        })}
        xVariable="x"
        yVariable="y"
        colorVariable="color"
        labelVariable="label"
        labelProps={(cx, cy, r, color) => ({
          labelAnchor: 'start',
          points: [{ x: cx, y: cy }],
          labelFill: color,
          // @TODO change to scaled font value
          labelFontSize: 18,
          labelDx: 2 * r,
          labelDy: r,
        })}
        tooltipPositionOverride={({ data, xScale, yScale }) => ({
          x: xScale(data.x),
          y: yScale(data.y),
        })}
        showTooltips
        debug
      />
    </ChartFrame>
  </Story>
</Preview>
