import { Meta, Story, Preview } from '@storybook/addon-docs/blocks';
import { withKnobs, boolean } from '@storybook/addon-knobs';
import ChartFrame from '../../components/chart-frame';
import dateContinuousSampleData from '../../sample-data/date-continuous.js';
import dateContinuousLogSampleData from '../../sample-data/date-continuous-log.js';
import LineChart from './';
import * as d3 from 'd3-time-format';

export const switchScaleProps = (useLogScale) => ({
  logScale: boolean('Use log scale', useLogScale),
});

<Meta title="Templates/Line chart" component={LineChart} decorators={[withKnobs]} />

# Line chart

Type: Change over time

The standard way to show a changing time series. If data are irregular, consider markers to represent data points

**When to use**

- TKTK

**Examples from the FT:**

- TKTK

**Questions?**

- Shepherd: TKTK
- Developer: TKTK

---

## Demos

---

### Web (responsive)

<Preview>
  <Story name="Web (responsive)">
    <LineChart data={dateContinuousSampleData} xVariable="date" yVariable={['Pearson', 'Sky']} />
  </Story>
</Preview>

### Medium

<Preview>
  <Story name="Line Chart Web Medium">
    <LineChart
      width={700}
      height={500}
      data={dateContinuousSampleData}
      xVariable="date"
      yVariable={['Pearson', 'Sky']}
    />
  </Story>
</Preview>

### Mobile

<Preview>
  <Story name="Méthode image set — small">
    <LineChart
      width={300}
      height={400}
      data={dateContinuousSampleData}
      xVariable="date"
      yVariable={['Pearson', 'Sky']}
    />
  </Story>
</Preview>

### Large

<Preview>
  <Story name="Line Chart Web Large">
    <LineChart
      width={1180}
      height={700}
      data={dateContinuousSampleData}
      xVariable="date"
      yVariable={['Pearson', 'Sky']}
    />
  </Story>
</Preview>

### Print

<Preview>
  <Story name="Line Chart Print">
    <LineChart
      type="print"
      width={53.71}
      height={69.85}
      margin={{ top: 40, left: 7, bottom: 35, right: 7 }}
      data={dateContinuousSampleData}
      xVariable="date"
      yVariable={['Pearson', 'Sky']}
    />
  </Story>
</Preview>

### Social

<Preview>
  <Story name="Line Chart Social">
    <LineChart
      type="social"
      width={612}
      height={612}
      data={dateContinuousSampleData}
      xVariable="date"
      yVariable={['Pearson', 'Sky']}
      margin={{ left: 40, right: 40, bottom: 138, top: 140 }}
    />
  </Story>
</Preview>

### Video

<Preview>
  <Story name="Line Chart Video">
    <LineChart
      type="video"
      width={1920}
      height={1080}
      data={dateContinuousSampleData}
      xVariable="date"
      yVariable={['Pearson', 'Sky']}
      margin={{ left: 207, right: 207, bottom: 210, top: 233 }}
    />
  </Story>
</Preview>

### Web (responsive) w/ Log Scale

<Preview>
  <Story name="Web (responsive) w/ Log Scale">
    <LineChart
      data={dateContinuousLogSampleData}
      xVariable="date"
      logScale={true}
      seriesToHighlight={['Italy', 'China']}
      yTickValues={[1, 2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000]}
      xFullLengthTicks={true}
      yFullLengthTicks={true}
      yMin={1}
      xScaleType={'linear'}
      showLegend={false}
      showLineEndDots={true}
      showTooltips={true}
    />
  </Story>
</Preview>

### Web (responsive) w/ Log Scale (zero included)

<Preview>
  <Story name="Web (responsive) w/ Log Scale (zero included)">
    <LineChart
      data={dateContinuousLogSampleData}
      xVariable="date"
      logScale={true}
      seriesToHighlight={['Italy', 'China']}
      yTickValues={[0, 1, 2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000].map((d) => d + 1)}
      yTickFormat={(d) => (d - 1).toLocaleString()}
      yTransformFunction={(d) => d + 1}
      xFullLengthTicks={true}
      yFullLengthTicks={true}
      yMin={0}
      xScaleType={'linear'}
      showLegend={false}
      showLineEndDots={true}
      showTooltips={true}
      hideEndTicks={true}
      xAxisLabel="Number of days since N daily deaths first recorded"
      xAxisLabelOffset={10}
      xAxisLabelProps={{ textAnchor: 'start' }}
    />
  </Story>
</Preview>

### Web (responsive) w/ Log Scale (yMin override)

<Preview>
  <Story name="Web (responsive) w/ Log Scale (yMin override)">
    <LineChart
      data={dateContinuousSampleData}
      logScale={true}
      xVariable="date"
      yVariable={['Pearson', 'Sky']}
      yMin={200}
    />
  </Story>
</Preview>

### Web (responsive) w/ custom tooltip

<Preview>
  <Story name="Web (responsive) w/ custom tooltip">
    <LineChart
      data={dateContinuousLogSampleData}
      xVariable="date"
      logScale={true}
      seriesToHighlight={['United States of America', 'Italy', 'China']}
      yTickValues={[0, 1, 2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000].map((d) => d + 1)}
      yTickFormat={(d) => (d - 1).toLocaleString()}
      yTransformFunction={(d) => d + 1}
      xFullLengthTicks={true}
      yFullLengthTicks={true}
      yMin={0}
      xScaleType={'linear'}
      showLegend={false}
      showLineEndDots={true}
      showTooltips={true}
      hideEndTicks={true}
      xAxisLabel="Number of days since N daily deaths first recorded"
      xAxisLabelOffset={10}
      xAxisLabelProps={{ textAnchor: 'start' }}
      tooltipComponent={({ seriesName, xValue, yValue }) => (
        <div>
          <div>{seriesName}</div>
          <div>
            <strong>{yValue}</strong> Deaths
          </div>
          <div>{xValue} days</div>
        </div>
      )}
      showTooltipLine
    />
  </Story>
</Preview>

### Web (responsive) (empty highlights and all hoverable)

<Preview>
  <Story name="Web (responsive) (empty series to highlight and all hoverable)">
    <LineChart
      data={dateContinuousSampleData}
      xVariable="date"
      yVariable={['Pearson', 'Sky', 'Bloomsbury', 'Vitesse Media', 'Totally']}
      seriesToHighlight={[]}
      showLegend={false}
      allLinesHoverable={true}
      showTooltips={true}
    />
  </Story>
</Preview>

### Web (responsive) w/ changing scales

<Preview>
  <Story name="Web (responsive) w/ changing scales">
    <LineChart
      data={dateContinuousLogSampleData}
      xVariable="date"
      seriesToHighlight={['Italy', 'China']}
      yTickValues={[0, 1, 2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000].map((d) => d + 1)}
      yTickFormat={(d) => (d - 1).toLocaleString()}
      yTransformFunction={(d) => d + 1}
      xFullLengthTicks={true}
      yFullLengthTicks={true}
      yMin={0}
      xScaleType={'linear'}
      showLegend={false}
      showLineEndDots={true}
      showTooltips={true}
      hideEndTicks={true}
      xAxisLabel="Number of days since N daily deaths first recorded"
      xAxisLabelOffset={10}
      xAxisLabelProps={{ textAnchor: 'start' }}
      allLinesHoverable={true}
      {...switchScaleProps(true)}
    />
  </Story>
</Preview>

### Web (responsive) w/ Log Scale (all hoverable)

<Preview>
  <Story name="Web (responsive) w/ Log Scale (all hoverable)">
    <LineChart
      data={dateContinuousLogSampleData}
      xVariable="date"
      logScale={true}
      seriesToHighlight={['Italy', 'China']}
      yTickValues={[1, 2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000]}
      xFullLengthTicks={true}
      yFullLengthTicks={true}
      yMin={1}
      xScaleType={'linear'}
      showLegend={false}
      showLineEndDots={true}
      showTooltips={true}
      allLinesHoverable={true}
      highlightedLineOutlineWidth={5}
    />
  </Story>
</Preview>

### Web (responsive) w/ custom color scale

<Preview>
  <Story name="Web (responsive) w/ custom color scale">
    <LineChart
      data={dateContinuousSampleData}
      xVariable="date"
      seriesToHighlight={['Pearson', 'Sky']}
      lineColorPalette={['orange', 'cyan']}
      labelColorPalette={['red', 'blue']}
      showTooltips={true}
      showLegend={false}
      showLineEndDots={true}
    />
  </Story>
</Preview>

### Web (responsive) w/ Y-axis fade

<Preview>
  <Story name="Web (responsive) w/ Y-axis fade">
    <LineChart
      hideTopper={true}
      hideFooter={true}
      margin={{ top: 30, right: 0, bottom: 20, left: 0 }}
      data={dateContinuousLogSampleData}
      xVariable="date"
      logScale={true}
      seriesToHighlight={['China', 'Switzerland']}
      yTickValues={[1, 2, 5, 10, 20, 50, 100, 200]}
      xFullLengthTicks={true}
      yFullLengthTicks={true}
      yMin={1}
      yMax={200}
      xScaleType={'linear'}
      showLegend={false}
      showLineEndDots={true}
      showTooltips={true}
      showYAxisFade={true}
      allLinesHoverable={true}
    />
  </Story>
</Preview>

### Web (responsive) w/ custom x tick values

<Preview>
  <Story name="Web (responsive) w/ custom x tick values">
    <LineChart
      data={dateContinuousLogSampleData}
      xVariable="date"
      seriesToHighlight={['Italy', 'China']}
      xFullLengthTicks={true}
      yFullLengthTicks={true}
      xScaleType={'linear'}
      showLegend={false}
      showLineEndDots={true}
      showTooltips={true}
      xMax={100}
      xTickValues={[20, 40, 60, 80]}
    />
  </Story>
</Preview>

### Web (responsive) w/ additional y axis tick value

<Preview>
  <Story name="Web (responsive) w/ additional y axis tick value">
    <LineChart
      data={dateContinuousLogSampleData}
      xVariable="date"
      seriesToHighlight={['Italy', 'China']}
      xFullLengthTicks={true}
      yFullLengthTicks={true}
      xScaleType={'linear'}
      showLegend={false}
      showLineEndDots={true}
      showTooltips={true}
      additionalYTickValues={[50]}
    />
  </Story>
</Preview>

### Web (responsive) w/ custom xTickFormat

<Preview>
  <Story name="Web (responsive) w/ custom xTickFormat">
    <LineChart
      data={dateContinuousSampleData}
      xVariable="date"
      yVariable={['Pearson', 'Sky']}
      xTickFormat={d3.timeFormat('%y')}
    />
  </Story>
</Preview>
