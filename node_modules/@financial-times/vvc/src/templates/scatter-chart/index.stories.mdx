import { Meta, Story, Preview } from '@storybook/addon-docs/blocks';
import ChartFrame from '../../components/chart-frame';
import groupedSampleData from '../../sample-data/grouped-continuous.js';
import ScatterChart from './';

<Meta title="Templates/Scatterplot-bubble chart" component={ScatterChart} />

# Scatterplot-Bubble chart

Type: Correlation

Represents the values from two discrete variables plotted on the x and y axis. Each pair of values is represented by a dot. Additional dimensions can be given to the chart by using a third variable to size the dots on the chart (by volume, never diameter) or to colour them.

**When to use**

- When you have paired numerical data or occasionally paired date and numeric data
- When trying to determine if there is a relationship between the two variables
- When trying to determine what a relationship is between two variables

Correlations may be positive (rising), negative (falling), or uncorrelated. Dots may also group into cluster signifying a correlation

**Examples from the FT:**

- [What's driving mortality and ill-health today?](https://www.ft.com/content/92007e1c-d42c-11e9-8367-807ebd53ab77)
- [Alan Smith on Hans Rosling's viral Gapminder bubble charts](https://www.ft.com/content/e2eba288-ef83-11e6-930f-061b01e23655)

**Props**

- **scaleFactor[number]** Multiplies the value of `sizeScale.range[1]`(largest circle size) by the number given. e.g. 2.0 would double the size of the circles, and 0.5 would halve them
- **xDomain[array]** Sets minimum and maximum values on the x axis. This is overwritten if the values in the dataset are smaller or larger.
- **yDomain[array]** Sets minimum and maximum values on the y axis. This is overwritten if the values in the dataset are smaller or larger.

**Questions?**

- Shepherd: TKTK
- Developer: TKTK

export const tooltipData = groupedSampleData.map((d) => ({
  ...d,
  seriesName: d.name,
  labelData: d,
  isHighlighted: true,
}));

---

## Demos

---

### Basic scatter/bubble chart

<Preview>
  <Story name="Scatter Chart Basic">
    <ScatterChart
      data={tooltipData}
      title="My cool title"
      subtitle="My cool subtitle"
      description="Basic scatterplot chart showing Variable A vs Variable B"
      xVariable="var a"
      yVariable="var b"
      xAxisLabel="Variable A"
      yAxisLabel="Variable B"
      colorVariable="group"
      lineOfRegression={true}
      labelColumn="name"
      xDomain={[0, 80]}
      maxCircleSize={{ web: 8 }}
      dotsStrokeWidth={1}
      showTooltips
      tooltipComponent={(data) => {
        return (
          <div>
            <div>{data.name}</div>
            <div>
              <strong>{data['var a']}</strong> variable As
            </div>
            <div>
              <strong>{data['var b']}</strong> variable Bs
            </div>
          </div>
        );
      }}
      tooltipPositionOverride={({ data, xScale, yScale }) => ({
        x: xScale(data['var a']),
        y: yScale(data['var b']) - 30,
      })}
      tooltipHoverRadius={16}
    />
  </Story>
</Preview>

### Basic scatter/bubble chart with variable bubble sizing

<Preview>
  <Story name="Scatter Chart Basic with variable bubble sizing">
    <ScatterChart
      data={groupedSampleData}
      title="My cool title"
      subtitle="My cool subtitle"
      xVariable="var a"
      yVariable="var b"
      xAxisLabel="Variable A"
      yAxisLabel="Variable B"
      sizeVariable="var c"
      colorVariable="group"
      hollowDots={true}
      lineOfRegression={true}
      labelColumn="name"
      xDomain={[0, 80]}
      sizeLegendX={380}
      sizeLegendY={-70}
    />
  </Story>
</Preview>

### Basic scatter/bubble chart with custom color scale

<Preview>
  <Story name="Scatter Chart Basic with custom color scale">
    <ScatterChart
      data={groupedSampleData}
      xVariable="var a"
      yVariable="var b"
      sizeVariable="var c"
      colorVariable="group"
      colorScale={() => '#FFCC00'}
      lineOfRegression={true}
      xDomain={[0, 80]}
    />
  </Story>
</Preview>

### Scatter/bubble chart with log scale

<Preview>
  <Story name="Scatter Chart with log scale">
    <ScatterChart
      data={groupedSampleData}
      xVariable="var b"
      yVariable="var a"
      sizeVariable="var c"
      colorVariable="group"
      logScaleY
      yTickFormat={(d) => d.toLocaleString()}
    />
  </Story>
</Preview>

### Medium

<Preview>
  <Story name="Scatter Chart Web Medium">
    <ScatterChart
      width={700}
      height={500}
      data={groupedSampleData}
      xVariable="var a"
      yVariable="var b"
      sizeVariable="var c"
      colorVariable="group"
      xDomain={[0, 80]}
    />
  </Story>
</Preview>

### Mobile

<Preview>
  <Story name="Scatter Chart Web Small">
    <ScatterChart
      width={300}
      height={400}
      data={groupedSampleData}
      xVariable="var a"
      yVariable="var b"
      sizeVariable="var c"
      colorVariable="group"
      xDomain={[0, 80]}
    />
  </Story>
</Preview>

### Large

<Preview>
  <Story name="Scatter Chart Web Large">
    <ScatterChart
      width={1180}
      height={700}
      data={groupedSampleData}
      xVariable="var a"
      yVariable="var b"
      sizeVariable="var c"
      scaleFactor={2}
      colorVariable="group"
      xDomain={[0, 80]}
    />
  </Story>
</Preview>

### Print

<Preview>
  <Story name="Scatter Chart Print">
    <ScatterChart
      type="print"
      width={53.71}
      height={69.85}
      margin={{ top: 40, left: 7, bottom: 35, right: 7 }}
      data={groupedSampleData}
      xVariable="var a"
      yVariable="var b"
      sizeVariable="var c"
      colorVariable="group"
      xDomain={[0, 80]}
    />
  </Story>
</Preview>

### Social

<Preview>
  <Story name="Scatter Chart Social">
    <ScatterChart
      type="social"
      width={612}
      height={612}
      data={groupedSampleData}
      xVariable="var a"
      yVariable="var b"
      sizeVariable="var c"
      colorVariable="group"
      xDomain={[0, 80]}
      margin={{ left: 40, right: 40, bottom: 138, top: 140 }}
    />
  </Story>
</Preview>

### Video

<Preview>
  <Story name="Scatter Chart Video">
    <ScatterChart
      type="video"
      width={1920}
      height={1080}
      data={groupedSampleData}
      xVariable="var a"
      yVariable="var b"
      sizeVariable="var c"
      colorVariable="group"
      xDomain={[0, 80]}
      margin={{ left: 207, right: 207, bottom: 210, top: 233 }}
    />
  </Story>
</Preview>
