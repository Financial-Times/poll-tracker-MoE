/**
 * @file
 * Various hooks
 */
import { useCallback } from 'react';
import localPoint from '@visx/event/lib/localPoint';

export default null;

export const useTooltipEvents = ({ enabled, updateTooltip }) => {
  const callbacks = useCallback(
    (datum, overrides) => {
      const handleMouseOver = event => {
        if (!datum) updateTooltip({ tooltipOpen: false });
        const coords = overrides || localPoint(event.currentTarget.ownerSVGElement, event);
        updateTooltip({
          tooltipOpen: true,
          tooltipLeft: coords.x,
          tooltipTop: coords.y,
          tooltipData: datum,
        });
      };
      return {
        onMouseOver: handleMouseOver,
        onFocus: handleMouseOver,
        onMouseOut: () => updateTooltip({ tooltipOpen: false }),
        onBlur: () => updateTooltip({ tooltipOpen: false }),
      };
    },
    [updateTooltip]
  );

  return enabled ? callbacks : () => ({});
};
