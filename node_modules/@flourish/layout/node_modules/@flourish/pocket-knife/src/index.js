import { color } from "d3-color";

var getTextWidth = (function() {
	var context = document.createElement("canvas").getContext("2d");
	return function(text, font) {
		context.font = font || "10px sans-serif";
		var metrics = context.measureText(text);
		return metrics.width;
	};
})();

function isImage(string) {
	if (typeof string != "string") return false;
	return string.match(/^(https?:\/\/.+\.(jpg|jpeg|svg|png|gif|webp)$|data:image\/)/i) != null;
}

function isUrl(string) {
	if (typeof string != "string") return false;
	return string.match(/^(https?:\/\/|data:)/i) != null;
}

function hexToColor(hex_string, opacity) {
	if (typeof hex_string != "string") return false;
	var c = color(hex_string);
	c.opacity = opacity !== undefined ? opacity : 1;
	return c;
}

function hexToRgba(hex_string, opacity) {
	var c = hexToColor(hex_string, opacity);

	return c ? c.toString() : false;
}

export { getTextWidth, isImage, isUrl, hexToColor, hexToRgba };
