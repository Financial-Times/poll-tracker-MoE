{"version":3,"file":"template.js","sources":["node_modules/@flourish/layout/src/lib/font-styles.js","node_modules/@flourish/layout/src/lib/layouts.js","node_modules/d3-color/src/define.js","node_modules/d3-color/src/color.js","node_modules/d3-color/src/math.js","node_modules/d3-color/src/lab.js","node_modules/d3-color/src/cubehelix.js","node_modules/@flourish/layout/src/lib/header.js","node_modules/@flourish/layout/src/lib/footer.js","node_modules/@flourish/layout/node_modules/@flourish/pocket-knife/src/index.js","node_modules/@flourish/layout/src/core/update.js","node_modules/@flourish/layout/src/defaults/index.js","node_modules/@flourish/layout/src/lib/rem-to-px.js","node_modules/@flourish/layout/src/core/init.js","src/core/state.js","node_modules/d3-selection/src/namespaces.js","node_modules/d3-selection/src/namespace.js","node_modules/d3-selection/src/creator.js","node_modules/d3-selection/src/selector.js","node_modules/d3-selection/src/selectorAll.js","node_modules/d3-selection/src/matcher.js","node_modules/d3-selection/src/selection/sparse.js","node_modules/d3-selection/src/selection/enter.js","node_modules/d3-selection/src/selection/data.js","node_modules/d3-selection/src/selection/sort.js","node_modules/d3-selection/src/selection/attr.js","node_modules/d3-selection/src/window.js","node_modules/d3-selection/src/selection/style.js","node_modules/d3-selection/src/selection/property.js","node_modules/d3-selection/src/selection/classed.js","node_modules/d3-selection/src/selection/text.js","node_modules/d3-selection/src/selection/html.js","node_modules/d3-selection/src/selection/raise.js","node_modules/d3-selection/src/selection/lower.js","node_modules/d3-selection/src/selection/insert.js","node_modules/d3-selection/src/selection/remove.js","node_modules/d3-selection/src/selection/clone.js","node_modules/d3-selection/src/selection/on.js","node_modules/d3-selection/src/selection/dispatch.js","node_modules/d3-selection/src/selection/index.js","node_modules/@flourish/legend/node_modules/d3-array/src/bisector.js","node_modules/d3-selection/src/select.js","node_modules/@flourish/legend/node_modules/d3-array/src/ascending.js","node_modules/@flourish/js2css/src/index.js","node_modules/d3-selection/src/selection/select.js","node_modules/d3-selection/src/selection/selectAll.js","node_modules/d3-selection/src/selection/filter.js","node_modules/d3-selection/src/constant.js","node_modules/d3-selection/src/selection/exit.js","node_modules/d3-selection/src/selection/join.js","node_modules/d3-selection/src/selection/merge.js","node_modules/d3-selection/src/selection/order.js","node_modules/d3-selection/src/selection/call.js","node_modules/d3-selection/src/selection/nodes.js","node_modules/d3-selection/src/selection/node.js","node_modules/d3-selection/src/selection/size.js","node_modules/d3-selection/src/selection/empty.js","node_modules/d3-selection/src/selection/each.js","node_modules/d3-selection/src/selection/append.js","node_modules/d3-selection/src/selection/datum.js","node_modules/@flourish/legend/node_modules/d3-array/src/bisect.js","node_modules/@flourish/legend/src/common.js","node_modules/@flourish/legend/src/utils.js","node_modules/@flourish/legend/src/discrete-color/index.js","node_modules/d3-collection/src/map.js","node_modules/d3-collection/src/set.js","node_modules/d3-interpolate/src/constant.js","node_modules/d3-interpolate/src/color.js","node_modules/d3-interpolate/src/rgb.js","node_modules/d3-interpolate/src/basis.js","node_modules/d3-interpolate/src/numberArray.js","node_modules/d3-interpolate/src/array.js","node_modules/d3-interpolate/src/date.js","node_modules/d3-interpolate/src/number.js","node_modules/d3-interpolate/src/object.js","node_modules/d3-interpolate/src/string.js","node_modules/d3-interpolate/src/value.js","node_modules/d3-interpolate/src/round.js","node_modules/d3-interpolate/src/transform/decompose.js","node_modules/d3-interpolate/src/transform/parse.js","node_modules/d3-interpolate/src/transform/index.js","node_modules/d3-interpolate/src/hsl.js","node_modules/d3-interpolate/src/lab.js","node_modules/d3-interpolate/src/hcl.js","node_modules/d3-interpolate/src/cubehelix.js","node_modules/d3-time-format/node_modules/d3-time/src/interval.js","node_modules/d3-time-format/node_modules/d3-time/src/duration.js","node_modules/d3-time-format/node_modules/d3-time/src/day.js","node_modules/d3-time-format/node_modules/d3-time/src/week.js","node_modules/d3-time-format/node_modules/d3-time/src/year.js","node_modules/d3-time-format/node_modules/d3-time/src/utcDay.js","node_modules/d3-time-format/node_modules/d3-time/src/utcWeek.js","node_modules/d3-time-format/node_modules/d3-time/src/utcYear.js","node_modules/d3-time-format/src/locale.js","node_modules/d3-time-format/src/defaultLocale.js","node_modules/@flourish/legend/src/container/index.js","node_modules/@flourish/legend/src/continuous-color/index.js","node_modules/@flourish/legend/src/continuous-size/index.js","src/init.js","node_modules/@flourish/legend/src/index.js","src/core/data.js","node_modules/@flourish/pocket-knife/src/index.js","node_modules/d3/node_modules/d3-array/src/ascending.js","node_modules/d3/node_modules/d3-array/src/extent.js","node_modules/d3/node_modules/d3-array/src/bisector.js","node_modules/d3/node_modules/d3-array/src/bisect.js","node_modules/d3-dispatch/src/dispatch.js","node_modules/d3-timer/src/timer.js","node_modules/d3-timer/src/timeout.js","node_modules/d3-transition/src/transition/schedule.js","node_modules/d3-transition/src/transition/tween.js","node_modules/d3-transition/src/transition/interpolate.js","node_modules/d3-transition/src/transition/attr.js","node_modules/d3-transition/src/transition/attrTween.js","node_modules/d3-transition/src/transition/delay.js","node_modules/d3-transition/src/transition/duration.js","node_modules/d3-transition/src/transition/ease.js","node_modules/d3-transition/src/transition/on.js","node_modules/d3-transition/src/transition/selection.js","node_modules/d3-transition/src/transition/style.js","node_modules/d3-transition/src/transition/styleTween.js","node_modules/d3-transition/src/transition/textTween.js","node_modules/d3-transition/src/transition/index.js","node_modules/d3-ease/src/cubic.js","node_modules/d3-transition/src/transition/select.js","node_modules/d3-transition/src/transition/selectAll.js","node_modules/d3-transition/src/transition/filter.js","node_modules/d3-transition/src/transition/merge.js","node_modules/d3-transition/src/transition/transition.js","node_modules/d3-transition/src/transition/text.js","node_modules/d3-transition/src/transition/remove.js","node_modules/d3-transition/src/transition/end.js","node_modules/d3-transition/src/selection/transition.js","node_modules/d3-chord/node_modules/d3-array/src/ascending.js","node_modules/d3-transition/src/selection/index.js","node_modules/d3-transition/src/selection/interrupt.js","node_modules/d3-transition/src/interrupt.js","node_modules/d3-chord/node_modules/d3-array/src/bisector.js","node_modules/d3-chord/node_modules/d3-array/src/bisect.js","node_modules/d3-path/src/path.js","node_modules/d3-contour/node_modules/d3-array/src/ascending.js","node_modules/d3/node_modules/d3-format/src/formatDecimal.js","node_modules/d3-contour/node_modules/d3-array/src/bisector.js","node_modules/d3-contour/node_modules/d3-array/src/bisect.js","node_modules/d3/node_modules/d3-format/src/formatSpecifier.js","node_modules/d3/node_modules/d3-format/src/formatPrefixAuto.js","node_modules/d3/node_modules/d3-format/src/formatRounded.js","node_modules/d3/node_modules/d3-format/src/formatTypes.js","node_modules/d3/node_modules/d3-format/src/identity.js","node_modules/d3/node_modules/d3-format/src/locale.js","node_modules/d3/node_modules/d3-format/src/defaultLocale.js","node_modules/d3/node_modules/d3-format/src/formatGroup.js","node_modules/d3/node_modules/d3-format/src/formatNumerals.js","node_modules/d3/node_modules/d3-format/src/formatTrim.js","node_modules/d3/node_modules/d3-format/src/exponent.js","node_modules/d3-scale-chromatic/src/colors.js","node_modules/d3-scale-chromatic/src/ramp.js","node_modules/d3-scale-chromatic/src/diverging/BrBG.js","node_modules/d3-scale-chromatic/src/diverging/PRGn.js","node_modules/d3-scale-chromatic/src/diverging/PiYG.js","node_modules/d3-scale-chromatic/src/diverging/PuOr.js","node_modules/d3-scale-chromatic/src/diverging/RdBu.js","node_modules/d3-scale-chromatic/src/diverging/RdGy.js","node_modules/d3-scale-chromatic/src/diverging/RdYlBu.js","node_modules/d3-scale-chromatic/src/diverging/RdYlGn.js","node_modules/d3-scale-chromatic/src/diverging/Spectral.js","node_modules/d3-scale-chromatic/src/sequential-multi/BuGn.js","node_modules/d3-scale-chromatic/src/sequential-multi/BuPu.js","node_modules/d3-scale-chromatic/src/sequential-multi/GnBu.js","node_modules/d3-scale-chromatic/src/sequential-multi/OrRd.js","node_modules/d3-scale-chromatic/src/sequential-multi/PuBuGn.js","node_modules/d3-scale-chromatic/src/sequential-multi/PuBu.js","node_modules/d3-scale-chromatic/src/sequential-multi/PuRd.js","node_modules/d3-scale-chromatic/src/sequential-multi/RdPu.js","node_modules/d3-scale-chromatic/src/sequential-multi/YlGnBu.js","node_modules/d3-scale-chromatic/src/sequential-multi/YlGn.js","node_modules/d3-scale-chromatic/src/sequential-multi/YlOrBr.js","node_modules/d3-scale-chromatic/src/sequential-multi/YlOrRd.js","node_modules/d3-scale-chromatic/src/sequential-single/Blues.js","node_modules/d3-scale-chromatic/src/sequential-single/Greens.js","node_modules/d3-scale-chromatic/src/sequential-single/Greys.js","node_modules/d3-scale-chromatic/src/sequential-single/Purples.js","node_modules/d3-scale-chromatic/src/sequential-single/Reds.js","node_modules/d3-scale-chromatic/src/sequential-single/Oranges.js","node_modules/d3-scale-chromatic/src/sequential-multi/cubehelix.js","node_modules/d3-scale-chromatic/src/sequential-multi/rainbow.js","node_modules/d3-scale-chromatic/src/sequential-multi/viridis.js","node_modules/d3-shape/src/constant.js","node_modules/d3-shape/src/curve/linear.js","node_modules/d3-shape/src/point.js","node_modules/d3-shape/src/line.js","src/parseData.js","node_modules/@flourish/popup/src/constants.js","node_modules/@flourish/popup/src/constrainer.js","node_modules/@flourish/popup/src/locate_triangle.js","node_modules/@flourish/popup/src/draw.js","node_modules/@flourish/popup/src/element.js","node_modules/@flourish/popup/src/index.js","node_modules/@flourish/info-popup/src/panel.js","node_modules/@flourish/info-popup/src/defaults.js","node_modules/@flourish/info-popup/src/html.js","node_modules/@flourish/info-popup/src/style.js","node_modules/@flourish/info-popup/src/index.js","src/core/update.js","node_modules/d3-shape/src/area.js","node_modules/@flourish/chart-layout/src/state/common.js","node_modules/@flourish/chart-layout/src/state/x.js","node_modules/@flourish/chart-layout/src/state/y.js","node_modules/@flourish/chart-layout/src/state/background.js","node_modules/@flourish/chart-layout/src/state/index.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/namespaces.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/namespace.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/creator.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selector.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/array.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selectorAll.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/matcher.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/selectChild.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/selectChildren.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/sparse.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/enter.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/constant.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/data.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/sort.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/attr.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/window.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/style.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/property.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/classed.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/text.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/html.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/raise.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/lower.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/insert.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/remove.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/clone.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/on.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/dispatch.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/index.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/select.js","node_modules/@flourish/chart-layout/src/container/index.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/select.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/selectAll.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/filter.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/exit.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/join.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/merge.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/order.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/call.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/nodes.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/node.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/size.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/empty.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/each.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/append.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/datum.js","node_modules/@flourish/chart-layout/node_modules/d3-selection/src/selection/iterator.js","node_modules/@flourish/chart-layout/src/identifier/index.js","node_modules/@flourish/chart-layout/src/clip/index.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/schedule.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/tween.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/interpolate.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/attr.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/attrTween.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/delay.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/duration.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/ease.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/on.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/selection.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/style.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/styleTween.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/textTween.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/index.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/select.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/selectAll.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/filter.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/merge.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/transition.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/text.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/remove.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/easeVarying.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/transition/end.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/selection/transition.js","node_modules/@flourish/chart-layout/src/format/index.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/selection/index.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/selection/interrupt.js","node_modules/@flourish/chart-layout/node_modules/d3-transition/src/interrupt.js","node_modules/d3-time/src/interval.js","node_modules/d3-time/src/millisecond.js","node_modules/d3-time/src/duration.js","node_modules/d3-time/src/second.js","node_modules/d3-time/src/minute.js","node_modules/d3-time/src/hour.js","node_modules/d3-time/src/day.js","node_modules/d3-time/src/week.js","node_modules/d3-time/src/month.js","node_modules/d3-time/src/year.js","node_modules/d3-time/src/utcDay.js","node_modules/d3-time/src/utcWeek.js","node_modules/d3-time/src/utcYear.js","node_modules/d3-array/src/ascending.js","node_modules/d3-array/src/bisector.js","node_modules/d3-array/src/bisect.js","node_modules/d3-array/src/number.js","node_modules/d3-array/src/ticks.js","node_modules/d3-array/src/range.js","node_modules/@flourish/chart-layout/node_modules/d3-time-format/src/locale.js","node_modules/@flourish/chart-layout/node_modules/d3-time-format/src/defaultLocale.js","node_modules/@flourish/chart-layout/src/parse/index.js","node_modules/@flourish/enhanced-arrays/src/common/lib/arrays.js","node_modules/@flourish/enhanced-arrays/src/common/lib/functions.js","node_modules/@flourish/enhanced-arrays/src/common/lib/objects.js","node_modules/@flourish/enhanced-arrays/src/common/lib/ranking.js","node_modules/@flourish/enhanced-arrays/src/common/lib/sampling.js","node_modules/@flourish/enhanced-arrays/src/common/lib/uncleaning.js","node_modules/@flourish/enhanced-arrays/node_modules/d3-array/src/ascending.js","node_modules/@flourish/enhanced-arrays/node_modules/d3-array/src/number.js","node_modules/@flourish/enhanced-arrays/node_modules/d3-array/src/quantile.js","node_modules/@flourish/enhanced-arrays/src/numeric/proto/lib/summaries.js","node_modules/@flourish/enhanced-arrays/node_modules/d3-array/src/variance.js","node_modules/@flourish/enhanced-arrays/src/numeric/proto/lib/geographic.js","node_modules/@flourish/enhanced-arrays/node_modules/d3-array/src/bisector.js","node_modules/@flourish/enhanced-arrays/node_modules/d3-array/src/bisect.js","node_modules/@flourish/enhanced-arrays/src/numeric/index.js","node_modules/@flourish/enhanced-arrays/src/numeric/proto/index.js","node_modules/@flourish/enhanced-arrays/src/numeric/proto/lib/sorting.js","node_modules/@flourish/enhanced-arrays/src/numeric/proto/lib/sampling.js","node_modules/@flourish/enhanced-arrays/src/numeric/proto/lib/ranking.js","node_modules/@flourish/enhanced-arrays/src/numeric/proto/lib/uncleaning.js","node_modules/@flourish/enhanced-arrays/src/numeric/instance/index.js","node_modules/@flourish/enhanced-arrays/src/numeric/utils/index.js","node_modules/@flourish/enhanced-arrays/src/datetime/instance/index.js","node_modules/@flourish/enhanced-arrays/src/datetime/index.js","node_modules/@flourish/enhanced-arrays/src/string/index.js","node_modules/@flourish/chart-layout/src/common/index.js","node_modules/@flourish/enhanced-arrays/src/string/proto/index.js","node_modules/@flourish/enhanced-arrays/src/string/proto/lib/sorting.js","node_modules/@flourish/enhanced-arrays/src/string/proto/lib/sampling.js","node_modules/@flourish/enhanced-arrays/src/string/proto/lib/ranking.js","node_modules/@flourish/enhanced-arrays/src/string/proto/lib/uncleaning.js","node_modules/@flourish/enhanced-arrays/src/string/instance/index.js","node_modules/@flourish/enhanced-arrays/src/string/utils/index.js","node_modules/@flourish/chart-layout/src/data/index.js","node_modules/@flourish/chart-layout/src/ticks/index.js","node_modules/@flourish/chart-layout/src/axis-titles/index.js","node_modules/@flourish/chart-layout/src/margins/index.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/init.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/ordinal.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/band.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/number.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/continuous.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/constant.js","node_modules/d3-format/src/formatDecimal.js","node_modules/d3-format/src/exponent.js","node_modules/d3-format/src/formatSpecifier.js","node_modules/d3-format/src/formatPrefixAuto.js","node_modules/d3-format/src/formatRounded.js","node_modules/d3-format/src/formatTypes.js","node_modules/d3-format/src/identity.js","node_modules/d3-format/src/locale.js","node_modules/d3-format/src/defaultLocale.js","node_modules/d3-format/src/formatGroup.js","node_modules/d3-format/src/formatNumerals.js","node_modules/d3-format/src/formatTrim.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/tickFormat.js","node_modules/d3-format/src/precisionPrefix.js","node_modules/d3-format/src/precisionRound.js","node_modules/d3-format/src/precisionFixed.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/linear.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/nice.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/log.js","node_modules/@flourish/chart-layout/node_modules/d3-scale/src/time.js","node_modules/@flourish/chart-layout/src/scales/scales.js","node_modules/@flourish/chart-layout/src/scales/utils.js","node_modules/@flourish/chart-layout/src/scales/x.js","node_modules/@flourish/chart-layout/src/scales/y.js","node_modules/@flourish/chart-layout/src/scales/y2.js","node_modules/@flourish/chart-layout/src/scales/common.js","node_modules/@flourish/chart-layout/src/hide/index.js","node_modules/@flourish/chart-layout/src/update/ticks/index.js","node_modules/@flourish/chart-layout/src/update/axes/common.js","node_modules/@flourish/chart-layout/src/update/axes/x-axis.js","node_modules/@flourish/chart-layout/src/update/axes/index.js","node_modules/@flourish/chart-layout/src/update/axes/y-axis.js","node_modules/@flourish/chart-layout/src/update/axes/y2-axis.js","node_modules/@flourish/chart-layout/src/update/gridlines/index.js","node_modules/@flourish/chart-layout/src/update/index.js","node_modules/@flourish/chart-layout/src/update/debug/index.js","node_modules/@flourish/chart-layout/src/update/clip/index.js","node_modules/@flourish/chart-layout/src/update/background/index.js","node_modules/@flourish/chart-layout/src/index.js","node_modules/@flourish/chart-layout/src/chart/index.js","node_modules/@flourish/chart-layout/src/chart/debug.js","node_modules/@flourish/chart-layout/src/chart/background.js","node_modules/@flourish/chart-layout/src/chart/gridlines.js","node_modules/@flourish/chart-layout/src/chart/axes.js","node_modules/@flourish/chart-layout/src/debug/index.js","node_modules/@flourish/chart-layout/src/animation/index.js","node_modules/@flourish/chart-layout/src/dimensions/index.js","node_modules/@flourish/colors/src/defaults/index.js","node_modules/@flourish/color-generator/src/lib/generate.js","node_modules/@flourish/color-generator/src/lib/hcl.js","node_modules/@flourish/colors/src/scales/categorical.js","node_modules/@flourish/color-generator/src/lib/hsl.js","node_modules/@flourish/colors/node_modules/d3-array/src/ascending.js","node_modules/@flourish/colors/node_modules/d3-array/src/bisect.js","node_modules/@flourish/colors/node_modules/d3-array/src/bisector.js","node_modules/@flourish/colors/node_modules/d3-array/src/number.js","node_modules/@flourish/colors/node_modules/d3-array/src/ticks.js","node_modules/@flourish/colors/node_modules/d3-array/src/quantile.js","node_modules/@flourish/colors/node_modules/d3-scale/src/init.js","node_modules/@flourish/colors/node_modules/d3-scale/src/array.js","node_modules/@flourish/colors/node_modules/d3-scale/src/continuous.js","node_modules/@flourish/colors/node_modules/d3-format/src/formatDecimal.js","node_modules/@flourish/colors/node_modules/d3-format/src/exponent.js","node_modules/@flourish/colors/node_modules/d3-format/src/formatSpecifier.js","node_modules/@flourish/colors/node_modules/d3-format/src/formatPrefixAuto.js","node_modules/@flourish/colors/node_modules/d3-format/src/formatRounded.js","node_modules/@flourish/colors/node_modules/d3-format/src/formatTypes.js","node_modules/@flourish/colors/node_modules/d3-format/src/identity.js","node_modules/@flourish/colors/node_modules/d3-format/src/locale.js","node_modules/@flourish/colors/node_modules/d3-format/src/defaultLocale.js","node_modules/@flourish/colors/node_modules/d3-format/src/formatGroup.js","node_modules/@flourish/colors/node_modules/d3-format/src/formatNumerals.js","node_modules/@flourish/colors/node_modules/d3-format/src/formatTrim.js","node_modules/@flourish/colors/node_modules/d3-scale/src/tickFormat.js","node_modules/@flourish/colors/node_modules/d3-format/src/precisionPrefix.js","node_modules/@flourish/colors/node_modules/d3-format/src/precisionRound.js","node_modules/@flourish/colors/node_modules/d3-format/src/precisionFixed.js","node_modules/@flourish/colors/node_modules/d3-scale/src/linear.js","node_modules/@flourish/colors/node_modules/d3-scale/src/quantile.js","node_modules/@flourish/colors/node_modules/d3-scale/src/quantize.js","node_modules/@flourish/colors/node_modules/d3-scale/src/threshold.js","node_modules/@flourish/colors/node_modules/d3-scale/src/sequential.js","node_modules/@flourish/colors/node_modules/d3-scale/src/diverging.js","node_modules/@flourish/colors/src/common/binning.js","node_modules/@flourish/colors/src/common/domain.js","node_modules/@flourish/colors/node_modules/d3-array/src/extent.js","node_modules/@flourish/colors/src/scales/sequential.js","node_modules/@flourish/colors/src/scales/diverging.js","node_modules/d3-interpolate/src/piecewise.js","node_modules/@flourish/colors/src/index.js","src/core/draw.js"],"sourcesContent":["import { state } from \"../core/init\";\n\nvar style_el;\n\n\nfunction initFontStyles() {\n\tstyle_el = document.createElement(\"style\");\n\tstyle_el.id = \"flourish-page-styles\";\n\tstyle_el.type = \"text/css\";\n\tdocument.head.appendChild(style_el);\n}\n\n\nfunction updateFontStyles() {\n\tvar breakpoints = [\"mobile_small\", \"mobile_big\", \"tablet\", \"desktop\", \"big_screen\"];\n\tvar breakpoint_css = \"\";\n\n\tbreakpoints.forEach(function(breakpoint_name, i) {\n\t\tvar css_media_query = \"@media(min-width: \" + state[\"breakpoint_\" + breakpoint_name] + \"px) {\\n\";\n\t\tvar css_font_size = \"html { font-size:\" + state[\"font_size_\" + breakpoint_name] + \"%; }\";\n\t\tbreakpoint_css += (i == 0 ? \"\" : css_media_query) + css_font_size + (i == 0 ? \"\" : \"\\n}\") + \"\\n\\n\";\n\t});\n\n\tstyle_el.innerHTML = breakpoint_css;\n\n\t// Check if we need to load fonts\n\tvar fonts = [ state.body_font, state.title_font, state.subtitle_font, state.footer_font ];\n\tfonts.forEach(function(font) {\n\t\tif (!font) return;\n\t\tvar font_already_loaded = false;\n\n\t\tvar layout_fonts = document.head.querySelectorAll(\"link.layout-font\");\n\t\tfor (var i = 0; i < layout_fonts.length; i++) {\n\t\t\tvar font_el = layout_fonts[i];\n\t\t\tif (font_el.href == font.url) font_already_loaded = true;\n\t\t}\n\n\t\tif (!font_already_loaded) {\n\t\t\tvar font_link = document.createElement(\"link\");\n\t\t\tfont_link.setAttribute(\"rel\", \"stylesheet\");\n\t\t\tfont_link.setAttribute(\"href\", font.url);\n\t\t\tfont_link.className = \"layout-font\";\n\t\t\tdocument.head.appendChild(font_link);\n\t\t}\n\t});\n\n\t// Check if we need to remove fonts\n\tvar layout_fonts = document.head.querySelectorAll(\"link.layout-font\");\n\tfor (var i = 0; i < layout_fonts.length; i++) {\n\t\tvar font_el = layout_fonts[i];\n\t\tvar font_needed = false;\n\t\tfonts.forEach(function(font) {\n\t\t\tif (font && font.url == font_el.href) font_needed = true;\n\t\t});\n\t\tif (!font_needed) font_el.parentElement.removeChild(font_el);\n\t}\n\n\tdocument.body.style.fontFamily = state.body_font.name;\n}\n\n\nexport { initFontStyles, updateFontStyles };\n","var LAYOUTS = Object.freeze({\n\t\"stack-default\": [ \"header\", \"controls\", \"primary\", \"footer\" ],\n\t\"stack-2\": [ \"primary\", \"header\", \"controls\", \"footer\" ],\n\t\"stack-3\": [ \"header\", \"primary\", \"controls\", \"footer\" ],\n\t\"stack-4\": [ \"controls\", \"primary\", \"header\", \"footer\" ],\n});\n\nexport { LAYOUTS };\n","export default function(constructor, factory, prototype) {\n  constructor.prototype = factory.prototype = prototype;\n  prototype.constructor = constructor;\n}\n\nexport function extend(parent, definition) {\n  var prototype = Object.create(parent.prototype);\n  for (var key in definition) prototype[key] = definition[key];\n  return prototype;\n}\n","import define, {extend} from \"./define.js\";\n\nexport function Color() {}\n\nexport var darker = 0.7;\nexport var brighter = 1 / darker;\n\nvar reI = \"\\\\s*([+-]?\\\\d+)\\\\s*\",\n    reN = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*\",\n    reP = \"\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*\",\n    reHex = /^#([0-9a-f]{3,8})$/,\n    reRgbInteger = new RegExp(\"^rgb\\\\(\" + [reI, reI, reI] + \"\\\\)$\"),\n    reRgbPercent = new RegExp(\"^rgb\\\\(\" + [reP, reP, reP] + \"\\\\)$\"),\n    reRgbaInteger = new RegExp(\"^rgba\\\\(\" + [reI, reI, reI, reN] + \"\\\\)$\"),\n    reRgbaPercent = new RegExp(\"^rgba\\\\(\" + [reP, reP, reP, reN] + \"\\\\)$\"),\n    reHslPercent = new RegExp(\"^hsl\\\\(\" + [reN, reP, reP] + \"\\\\)$\"),\n    reHslaPercent = new RegExp(\"^hsla\\\\(\" + [reN, reP, reP, reN] + \"\\\\)$\");\n\nvar named = {\n  aliceblue: 0xf0f8ff,\n  antiquewhite: 0xfaebd7,\n  aqua: 0x00ffff,\n  aquamarine: 0x7fffd4,\n  azure: 0xf0ffff,\n  beige: 0xf5f5dc,\n  bisque: 0xffe4c4,\n  black: 0x000000,\n  blanchedalmond: 0xffebcd,\n  blue: 0x0000ff,\n  blueviolet: 0x8a2be2,\n  brown: 0xa52a2a,\n  burlywood: 0xdeb887,\n  cadetblue: 0x5f9ea0,\n  chartreuse: 0x7fff00,\n  chocolate: 0xd2691e,\n  coral: 0xff7f50,\n  cornflowerblue: 0x6495ed,\n  cornsilk: 0xfff8dc,\n  crimson: 0xdc143c,\n  cyan: 0x00ffff,\n  darkblue: 0x00008b,\n  darkcyan: 0x008b8b,\n  darkgoldenrod: 0xb8860b,\n  darkgray: 0xa9a9a9,\n  darkgreen: 0x006400,\n  darkgrey: 0xa9a9a9,\n  darkkhaki: 0xbdb76b,\n  darkmagenta: 0x8b008b,\n  darkolivegreen: 0x556b2f,\n  darkorange: 0xff8c00,\n  darkorchid: 0x9932cc,\n  darkred: 0x8b0000,\n  darksalmon: 0xe9967a,\n  darkseagreen: 0x8fbc8f,\n  darkslateblue: 0x483d8b,\n  darkslategray: 0x2f4f4f,\n  darkslategrey: 0x2f4f4f,\n  darkturquoise: 0x00ced1,\n  darkviolet: 0x9400d3,\n  deeppink: 0xff1493,\n  deepskyblue: 0x00bfff,\n  dimgray: 0x696969,\n  dimgrey: 0x696969,\n  dodgerblue: 0x1e90ff,\n  firebrick: 0xb22222,\n  floralwhite: 0xfffaf0,\n  forestgreen: 0x228b22,\n  fuchsia: 0xff00ff,\n  gainsboro: 0xdcdcdc,\n  ghostwhite: 0xf8f8ff,\n  gold: 0xffd700,\n  goldenrod: 0xdaa520,\n  gray: 0x808080,\n  green: 0x008000,\n  greenyellow: 0xadff2f,\n  grey: 0x808080,\n  honeydew: 0xf0fff0,\n  hotpink: 0xff69b4,\n  indianred: 0xcd5c5c,\n  indigo: 0x4b0082,\n  ivory: 0xfffff0,\n  khaki: 0xf0e68c,\n  lavender: 0xe6e6fa,\n  lavenderblush: 0xfff0f5,\n  lawngreen: 0x7cfc00,\n  lemonchiffon: 0xfffacd,\n  lightblue: 0xadd8e6,\n  lightcoral: 0xf08080,\n  lightcyan: 0xe0ffff,\n  lightgoldenrodyellow: 0xfafad2,\n  lightgray: 0xd3d3d3,\n  lightgreen: 0x90ee90,\n  lightgrey: 0xd3d3d3,\n  lightpink: 0xffb6c1,\n  lightsalmon: 0xffa07a,\n  lightseagreen: 0x20b2aa,\n  lightskyblue: 0x87cefa,\n  lightslategray: 0x778899,\n  lightslategrey: 0x778899,\n  lightsteelblue: 0xb0c4de,\n  lightyellow: 0xffffe0,\n  lime: 0x00ff00,\n  limegreen: 0x32cd32,\n  linen: 0xfaf0e6,\n  magenta: 0xff00ff,\n  maroon: 0x800000,\n  mediumaquamarine: 0x66cdaa,\n  mediumblue: 0x0000cd,\n  mediumorchid: 0xba55d3,\n  mediumpurple: 0x9370db,\n  mediumseagreen: 0x3cb371,\n  mediumslateblue: 0x7b68ee,\n  mediumspringgreen: 0x00fa9a,\n  mediumturquoise: 0x48d1cc,\n  mediumvioletred: 0xc71585,\n  midnightblue: 0x191970,\n  mintcream: 0xf5fffa,\n  mistyrose: 0xffe4e1,\n  moccasin: 0xffe4b5,\n  navajowhite: 0xffdead,\n  navy: 0x000080,\n  oldlace: 0xfdf5e6,\n  olive: 0x808000,\n  olivedrab: 0x6b8e23,\n  orange: 0xffa500,\n  orangered: 0xff4500,\n  orchid: 0xda70d6,\n  palegoldenrod: 0xeee8aa,\n  palegreen: 0x98fb98,\n  paleturquoise: 0xafeeee,\n  palevioletred: 0xdb7093,\n  papayawhip: 0xffefd5,\n  peachpuff: 0xffdab9,\n  peru: 0xcd853f,\n  pink: 0xffc0cb,\n  plum: 0xdda0dd,\n  powderblue: 0xb0e0e6,\n  purple: 0x800080,\n  rebeccapurple: 0x663399,\n  red: 0xff0000,\n  rosybrown: 0xbc8f8f,\n  royalblue: 0x4169e1,\n  saddlebrown: 0x8b4513,\n  salmon: 0xfa8072,\n  sandybrown: 0xf4a460,\n  seagreen: 0x2e8b57,\n  seashell: 0xfff5ee,\n  sienna: 0xa0522d,\n  silver: 0xc0c0c0,\n  skyblue: 0x87ceeb,\n  slateblue: 0x6a5acd,\n  slategray: 0x708090,\n  slategrey: 0x708090,\n  snow: 0xfffafa,\n  springgreen: 0x00ff7f,\n  steelblue: 0x4682b4,\n  tan: 0xd2b48c,\n  teal: 0x008080,\n  thistle: 0xd8bfd8,\n  tomato: 0xff6347,\n  turquoise: 0x40e0d0,\n  violet: 0xee82ee,\n  wheat: 0xf5deb3,\n  white: 0xffffff,\n  whitesmoke: 0xf5f5f5,\n  yellow: 0xffff00,\n  yellowgreen: 0x9acd32\n};\n\ndefine(Color, color, {\n  copy: function(channels) {\n    return Object.assign(new this.constructor, this, channels);\n  },\n  displayable: function() {\n    return this.rgb().displayable();\n  },\n  hex: color_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: color_formatHex,\n  formatHsl: color_formatHsl,\n  formatRgb: color_formatRgb,\n  toString: color_formatRgb\n});\n\nfunction color_formatHex() {\n  return this.rgb().formatHex();\n}\n\nfunction color_formatHsl() {\n  return hslConvert(this).formatHsl();\n}\n\nfunction color_formatRgb() {\n  return this.rgb().formatRgb();\n}\n\nexport default function color(format) {\n  var m, l;\n  format = (format + \"\").trim().toLowerCase();\n  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000\n      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00\n      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000\n      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000\n      : null) // invalid hex\n      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)\n      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)\n      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)\n      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)\n      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)\n      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)\n      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins\n      : format === \"transparent\" ? new Rgb(NaN, NaN, NaN, 0)\n      : null;\n}\n\nfunction rgbn(n) {\n  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);\n}\n\nfunction rgba(r, g, b, a) {\n  if (a <= 0) r = g = b = NaN;\n  return new Rgb(r, g, b, a);\n}\n\nexport function rgbConvert(o) {\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Rgb;\n  o = o.rgb();\n  return new Rgb(o.r, o.g, o.b, o.opacity);\n}\n\nexport function rgb(r, g, b, opacity) {\n  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);\n}\n\nexport function Rgb(r, g, b, opacity) {\n  this.r = +r;\n  this.g = +g;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Rgb, rgb, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);\n  },\n  rgb: function() {\n    return this;\n  },\n  displayable: function() {\n    return (-0.5 <= this.r && this.r < 255.5)\n        && (-0.5 <= this.g && this.g < 255.5)\n        && (-0.5 <= this.b && this.b < 255.5)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  hex: rgb_formatHex, // Deprecated! Use color.formatHex.\n  formatHex: rgb_formatHex,\n  formatRgb: rgb_formatRgb,\n  toString: rgb_formatRgb\n}));\n\nfunction rgb_formatHex() {\n  return \"#\" + hex(this.r) + hex(this.g) + hex(this.b);\n}\n\nfunction rgb_formatRgb() {\n  var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n  return (a === 1 ? \"rgb(\" : \"rgba(\")\n      + Math.max(0, Math.min(255, Math.round(this.r) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.g) || 0)) + \", \"\n      + Math.max(0, Math.min(255, Math.round(this.b) || 0))\n      + (a === 1 ? \")\" : \", \" + a + \")\");\n}\n\nfunction hex(value) {\n  value = Math.max(0, Math.min(255, Math.round(value) || 0));\n  return (value < 16 ? \"0\" : \"\") + value.toString(16);\n}\n\nfunction hsla(h, s, l, a) {\n  if (a <= 0) h = s = l = NaN;\n  else if (l <= 0 || l >= 1) h = s = NaN;\n  else if (s <= 0) h = NaN;\n  return new Hsl(h, s, l, a);\n}\n\nexport function hslConvert(o) {\n  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Color)) o = color(o);\n  if (!o) return new Hsl;\n  if (o instanceof Hsl) return o;\n  o = o.rgb();\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      min = Math.min(r, g, b),\n      max = Math.max(r, g, b),\n      h = NaN,\n      s = max - min,\n      l = (max + min) / 2;\n  if (s) {\n    if (r === max) h = (g - b) / s + (g < b) * 6;\n    else if (g === max) h = (b - r) / s + 2;\n    else h = (r - g) / s + 4;\n    s /= l < 0.5 ? max + min : 2 - max - min;\n    h *= 60;\n  } else {\n    s = l > 0 && l < 1 ? 0 : h;\n  }\n  return new Hsl(h, s, l, o.opacity);\n}\n\nexport function hsl(h, s, l, opacity) {\n  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);\n}\n\nfunction Hsl(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Hsl, hsl, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Hsl(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = this.h % 360 + (this.h < 0) * 360,\n        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,\n        l = this.l,\n        m2 = l + (l < 0.5 ? l : 1 - l) * s,\n        m1 = 2 * l - m2;\n    return new Rgb(\n      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),\n      hsl2rgb(h, m1, m2),\n      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),\n      this.opacity\n    );\n  },\n  displayable: function() {\n    return (0 <= this.s && this.s <= 1 || isNaN(this.s))\n        && (0 <= this.l && this.l <= 1)\n        && (0 <= this.opacity && this.opacity <= 1);\n  },\n  formatHsl: function() {\n    var a = this.opacity; a = isNaN(a) ? 1 : Math.max(0, Math.min(1, a));\n    return (a === 1 ? \"hsl(\" : \"hsla(\")\n        + (this.h || 0) + \", \"\n        + (this.s || 0) * 100 + \"%, \"\n        + (this.l || 0) * 100 + \"%\"\n        + (a === 1 ? \")\" : \", \" + a + \")\");\n  }\n}));\n\n/* From FvD 13.37, CSS Color Module Level 3 */\nfunction hsl2rgb(h, m1, m2) {\n  return (h < 60 ? m1 + (m2 - m1) * h / 60\n      : h < 180 ? m2\n      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60\n      : m1) * 255;\n}\n","export var deg2rad = Math.PI / 180;\nexport var rad2deg = 180 / Math.PI;\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb} from \"./color.js\";\nimport {deg2rad, rad2deg} from \"./math.js\";\n\n// https://observablehq.com/@mbostock/lab-and-rgb\nvar K = 18,\n    Xn = 0.96422,\n    Yn = 1,\n    Zn = 0.82521,\n    t0 = 4 / 29,\n    t1 = 6 / 29,\n    t2 = 3 * t1 * t1,\n    t3 = t1 * t1 * t1;\n\nfunction labConvert(o) {\n  if (o instanceof Lab) return new Lab(o.l, o.a, o.b, o.opacity);\n  if (o instanceof Hcl) return hcl2lab(o);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = rgb2lrgb(o.r),\n      g = rgb2lrgb(o.g),\n      b = rgb2lrgb(o.b),\n      y = xyz2lab((0.2225045 * r + 0.7168786 * g + 0.0606169 * b) / Yn), x, z;\n  if (r === g && g === b) x = z = y; else {\n    x = xyz2lab((0.4360747 * r + 0.3850649 * g + 0.1430804 * b) / Xn);\n    z = xyz2lab((0.0139322 * r + 0.0971045 * g + 0.7141733 * b) / Zn);\n  }\n  return new Lab(116 * y - 16, 500 * (x - y), 200 * (y - z), o.opacity);\n}\n\nexport function gray(l, opacity) {\n  return new Lab(l, 0, 0, opacity == null ? 1 : opacity);\n}\n\nexport default function lab(l, a, b, opacity) {\n  return arguments.length === 1 ? labConvert(l) : new Lab(l, a, b, opacity == null ? 1 : opacity);\n}\n\nexport function Lab(l, a, b, opacity) {\n  this.l = +l;\n  this.a = +a;\n  this.b = +b;\n  this.opacity = +opacity;\n}\n\ndefine(Lab, lab, extend(Color, {\n  brighter: function(k) {\n    return new Lab(this.l + K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  darker: function(k) {\n    return new Lab(this.l - K * (k == null ? 1 : k), this.a, this.b, this.opacity);\n  },\n  rgb: function() {\n    var y = (this.l + 16) / 116,\n        x = isNaN(this.a) ? y : y + this.a / 500,\n        z = isNaN(this.b) ? y : y - this.b / 200;\n    x = Xn * lab2xyz(x);\n    y = Yn * lab2xyz(y);\n    z = Zn * lab2xyz(z);\n    return new Rgb(\n      lrgb2rgb( 3.1338561 * x - 1.6168667 * y - 0.4906146 * z),\n      lrgb2rgb(-0.9787684 * x + 1.9161415 * y + 0.0334540 * z),\n      lrgb2rgb( 0.0719453 * x - 0.2289914 * y + 1.4052427 * z),\n      this.opacity\n    );\n  }\n}));\n\nfunction xyz2lab(t) {\n  return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\n\nfunction lab2xyz(t) {\n  return t > t1 ? t * t * t : t2 * (t - t0);\n}\n\nfunction lrgb2rgb(x) {\n  return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\n\nfunction rgb2lrgb(x) {\n  return (x /= 255) <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n\nfunction hclConvert(o) {\n  if (o instanceof Hcl) return new Hcl(o.h, o.c, o.l, o.opacity);\n  if (!(o instanceof Lab)) o = labConvert(o);\n  if (o.a === 0 && o.b === 0) return new Hcl(NaN, 0 < o.l && o.l < 100 ? 0 : NaN, o.l, o.opacity);\n  var h = Math.atan2(o.b, o.a) * rad2deg;\n  return new Hcl(h < 0 ? h + 360 : h, Math.sqrt(o.a * o.a + o.b * o.b), o.l, o.opacity);\n}\n\nexport function lch(l, c, h, opacity) {\n  return arguments.length === 1 ? hclConvert(l) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function hcl(h, c, l, opacity) {\n  return arguments.length === 1 ? hclConvert(h) : new Hcl(h, c, l, opacity == null ? 1 : opacity);\n}\n\nexport function Hcl(h, c, l, opacity) {\n  this.h = +h;\n  this.c = +c;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\nfunction hcl2lab(o) {\n  if (isNaN(o.h)) return new Lab(o.l, 0, 0, o.opacity);\n  var h = o.h * deg2rad;\n  return new Lab(o.l, Math.cos(h) * o.c, Math.sin(h) * o.c, o.opacity);\n}\n\ndefine(Hcl, hcl, extend(Color, {\n  brighter: function(k) {\n    return new Hcl(this.h, this.c, this.l + K * (k == null ? 1 : k), this.opacity);\n  },\n  darker: function(k) {\n    return new Hcl(this.h, this.c, this.l - K * (k == null ? 1 : k), this.opacity);\n  },\n  rgb: function() {\n    return hcl2lab(this).rgb();\n  }\n}));\n","import define, {extend} from \"./define.js\";\nimport {Color, rgbConvert, Rgb, darker, brighter} from \"./color.js\";\nimport {deg2rad, rad2deg} from \"./math.js\";\n\nvar A = -0.14861,\n    B = +1.78277,\n    C = -0.29227,\n    D = -0.90649,\n    E = +1.97294,\n    ED = E * D,\n    EB = E * B,\n    BC_DA = B * C - D * A;\n\nfunction cubehelixConvert(o) {\n  if (o instanceof Cubehelix) return new Cubehelix(o.h, o.s, o.l, o.opacity);\n  if (!(o instanceof Rgb)) o = rgbConvert(o);\n  var r = o.r / 255,\n      g = o.g / 255,\n      b = o.b / 255,\n      l = (BC_DA * b + ED * r - EB * g) / (BC_DA + ED - EB),\n      bl = b - l,\n      k = (E * (g - l) - C * bl) / D,\n      s = Math.sqrt(k * k + bl * bl) / (E * l * (1 - l)), // NaN if l=0 or l=1\n      h = s ? Math.atan2(k, bl) * rad2deg - 120 : NaN;\n  return new Cubehelix(h < 0 ? h + 360 : h, s, l, o.opacity);\n}\n\nexport default function cubehelix(h, s, l, opacity) {\n  return arguments.length === 1 ? cubehelixConvert(h) : new Cubehelix(h, s, l, opacity == null ? 1 : opacity);\n}\n\nexport function Cubehelix(h, s, l, opacity) {\n  this.h = +h;\n  this.s = +s;\n  this.l = +l;\n  this.opacity = +opacity;\n}\n\ndefine(Cubehelix, cubehelix, extend(Color, {\n  brighter: function(k) {\n    k = k == null ? brighter : Math.pow(brighter, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  darker: function(k) {\n    k = k == null ? darker : Math.pow(darker, k);\n    return new Cubehelix(this.h, this.s, this.l * k, this.opacity);\n  },\n  rgb: function() {\n    var h = isNaN(this.h) ? 0 : (this.h + 120) * deg2rad,\n        l = +this.l,\n        a = isNaN(this.s) ? 0 : this.s * l * (1 - l),\n        cosh = Math.cos(h),\n        sinh = Math.sin(h);\n    return new Rgb(\n      255 * (l + a * (A * cosh + B * sinh)),\n      255 * (l + a * (C * cosh + D * sinh)),\n      255 * (l + a * (E * cosh)),\n      this.opacity\n    );\n  }\n}));\n","import { isUrl } from \"@flourish/pocket-knife\";\nimport { state } from \"../core/init\";\n\nvar header_el, title_el, subtitle_el, text_el, logo_el;\n\nfunction init() {\n\theader_el = document.createElement(\"header\");\n\theader_el.className = \"flourish-header\";\n\n\tvar hgroup_el = document.createElement(\"hgroup\");\n\ttitle_el = document.createElement(\"h1\");\n\tsubtitle_el = document.createElement(\"h2\");\n\ttext_el = document.createElement(\"p\");\n\tlogo_el = document.createElement(\"img\");\n\n\theader_el.appendChild(logo_el);\n\theader_el.appendChild(hgroup_el);\n\thgroup_el.appendChild(title_el);\n\thgroup_el.appendChild(subtitle_el);\n\theader_el.appendChild(text_el);\n\n\treturn header_el;\n}\n\n\nfunction update() {\n\theader_el.style.textAlign = state.header_align;\n\theader_el.style.margin = 0;\n\theader_el.style.borderTop = state.header_border == \"top\" ? state.header_border_width + \"px \" + state.header_border_style + \" \" + state.header_border_color : null;\n\theader_el.style.borderBottom = state.header_border == \"bottom\" ? state.header_border_width + \"px \" + state.header_border_style + \" \" + state.header_border_color : null;\n\theader_el.style.paddingTop = state.header_border == \"top\" ? state.header_border_space + \"rem\" : \"\";\n\theader_el.style.paddingBottom = state.header_border == \"bottom\" ? state.header_border_space + \"rem\" : \"\";\n\n\ttitle_el.innerHTML = state.title ? state.title : \"\";\n\ttitle_el.style.fontFamily = state.title_font ? state.title_font.name : \"inherit\"; // Check for inherit, then font name\n\ttitle_el.style.fontSize = (state.title_size != \"custom\" ? state.title_size : state.title_size_custom) + \"rem\";\n\ttitle_el.style.lineHeight = state.title_line_height;\n\ttitle_el.style.fontWeight = state.title_weight;\n\ttitle_el.style.color = state.title_color || state.font_color;\n\ttitle_el.style.margin = 0;\n\ttitle_el.style.paddingTop = !state.title ? 0 : (state.title_space_above == \"custom\" ? state.title_space_above_custom : state.title_space_above) + \"rem\";\n\n\tsubtitle_el.innerHTML = state.subtitle ? state.subtitle : \"\";\n\tsubtitle_el.style.fontFamily = state.subtitle_font ? state.subtitle_font.name : \"inherit\"; // Check for inherit, then font name\n\tsubtitle_el.style.fontSize = (state.subtitle_size != \"custom\" ? state.subtitle_size : state.subtitle_size_custom) + \"rem\";\n\tsubtitle_el.style.lineHeight = state.subtitle_line_height;\n\tsubtitle_el.style.fontWeight = state.subtitle_weight;\n\tsubtitle_el.style.color = state.subtitle_color || state.font_color;\n\tsubtitle_el.style.margin = 0;\n\tsubtitle_el.style.paddingTop = !state.subtitle ? 0 : (state.subtitle_space_above == \"custom\" ? state.subtitle_space_above_custom : state.subtitle_space_above) + \"rem\";\n\n\ttext_el.innerHTML = state.header_text ? state.header_text : \"\";\n\ttext_el.style.fontSize = (state.header_text_size != \"custom\" ? state.header_text_size : state.header_text_size_custom) + \"rem\";\n\ttext_el.style.lineHeight = state.header_text_line_height;\n\ttext_el.style.fontWeight = state.header_text_weight;\n\ttext_el.style.margin = 0;\n\ttext_el.style.color = state.header_text_color || state.font_color;\n\ttext_el.style.paddingTop = !state.header_text ? 0 : (state.header_text_space_above == \"custom\" ? state.header_text_space_above_custom : state.header_text_space_above) + \"rem\";\n\n\tlogo_el.style.display = state.header_logo_enabled && isUrl(state.header_logo_src) ? \"\" : \"none\";\n\tlogo_el.style.position = state.header_logo_align == \"inside\" ? \"\" : \"fixed\";\n\tlogo_el.style.height = state.header_logo_height + \"rem\";\n\tlogo_el.style.top = state.header_logo_align == \"outside\" ? 0 : \"\";\n\tlogo_el.style.left = state.header_logo_align == \"outside\" && state.header_logo_position_outside == \"left\" ? 0 : \"\";\n\tlogo_el.style.right = state.header_logo_align == \"outside\" && state.header_logo_position_outside == \"right\" ? 0 : \"\";\n\tlogo_el.style.marginTop = state.header_logo_margin_top + \"rem\";\n\tlogo_el.style.marginBottom = state.header_logo_margin_bottom + \"rem\";\n\tlogo_el.style.marginLeft = state.header_logo_margin_left + \"rem\";\n\tlogo_el.style.marginRight = state.header_logo_margin_right + \"rem\";\n\tlogo_el.style.float = state.header_logo_position_inside == \"top\" || state.header_logo_align == \"outside\" ? \"\" : state.header_logo_position_inside;\n\tlogo_el.style.width = \"auto\";\n\tlogo_el.src = isUrl(state.header_logo_src) ? state.header_logo_src : \"\";\n}\n\n\nexport { init, update };\n","import { color } from \"d3-color\";\nimport { isUrl } from \"@flourish/pocket-knife\";\nimport { state } from \"../core/init\";\n\nvar footer_el, text_el, logo_el, logo_link;\nvar has_footer = false;\n\nfunction appendStyles() {\n\tvar css = document.createElement(\"style\");\n\tcss.type = \"text/css\";\n\tcss.innerHTML = \".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }\";\n\tdocument.head.appendChild(css);\n}\n\nfunction addHttp(url) {\n\tif (url.indexOf(\"http://\") !== 0 && url.indexOf(\"https://\") !== 0) return \"http://\" + url;\n\telse return url;\n}\n\n\nfunction init() {\n\tappendStyles();\n\n\tfooter_el = document.createElement(\"footer\");\n\tfooter_el.className = \"flourish-footer\";\n\n\ttext_el = document.createElement(\"div\");\n\ttext_el.className = \"flourish-footer-text\";\n\n\tlogo_link = document.createElement(\"a\");\n\tlogo_link.target = \"_blank\";\n\tlogo_el = document.createElement(\"img\");\n\tlogo_el.className = \"flourish-footer-logo\";\n\tlogo_link.appendChild(logo_el);\n\n\tfooter_el.appendChild(text_el);\n\tfooter_el.appendChild(logo_link);\n\n\treturn footer_el;\n}\n\nfunction isPale(c) {\n\t// Should we add this to pocketknife? It's also used in LBP.\n\tif (!c) {\n\t\tconsole.warn(\"No valid color\", c);\n\t\treturn;\n\t}\n\tvar rgb = color(c);\n\t// https://stackoverflow.com/questions/11867545/change-text-color-based-on-brightness-of-the-covered-background-area\n\t// With adjusted threshold\n\treturn Math.round((rgb.r * 299) + (rgb.g * 587) + (rgb.b * 114))/1000 > 195;\n}\n\nfunction darkBackground() {\n\treturn state.background_color_enabled && !isPale(state.background_color);\n}\n\nfunction getFooterLogoSrc() {\n\tvar src = isUrl(state.footer_logo_src) ? state.footer_logo_src : \"\";\n\n\tif (isUrl(state.footer_logo_src_light) && darkBackground()) {\n\t\tsrc = state.footer_logo_src_light;\n\t}\n\n\treturn src;\n}\n\nfunction hasFooterLogo() {\n\treturn state.footer_logo_enabled && getFooterLogoSrc();\n}\n\nfunction update() {\n\tvar sources = [\n\t\t{ name: state.source_name, url: state.source_url },\n\t\t{ name: state.multiple_sources ? state.source_name_2 : \"\", url: state.multiple_sources ? state.source_url_2 : \"\" },\n\t\t{ name: state.multiple_sources ? state.source_name_3 : \"\", url: state.multiple_sources ? state.source_url_3 : \"\" }\n\t].filter(function(source) {\n\t\treturn source.name || source.url;\n\t});\n\n\thas_footer = sources.length > 0 || state.footer_note || state.footer_note_secondary || hasFooterLogo();\n\n\tfooter_el.style.display = \"flex\";\n\tfooter_el.style.height = has_footer ? null : 0;\n\tfooter_el.style.width = \"100%\";\n\tfooter_el.style.paddingTop = state.footer_border == \"top\" ? state.footer_border_space + \"rem\" : \"\";\n\tfooter_el.style.paddingBottom = state.footer_border == \"bottom\" ? state.footer_border_space + \"rem\" : \"\";\n\tfooter_el.style.borderTop = state.footer_border == \"top\" ? state.footer_border_width + \"px \" + state.footer_border_style + \" \" + state.footer_border_color : \"\";\n\tfooter_el.style.borderBottom = state.footer_border == \"bottom\" ? state.footer_border_width + \"px \" + state.footer_border_style + \" \" + state.footer_border_color : \"\";\n\tfooter_el.style.fontFamily = state.footer_font ? state.footer_font.name : \"inherit\"; // Check for inherit, then font name\n\n\tif (state.footer_align == \"justify\") footer_el.style.justifyContent = \"space-between\";\n\telse if (state.footer_align == \"left\") footer_el.style.justifyContent = \"flex-start\";\n\telse if (state.footer_align == \"right\") footer_el.style.justifyContent = \"flex-end\";\n\telse if (state.footer_align == \"center\") footer_el.style.justifyContent = \"center\";\n\n\tfooter_el.style.fontSize = state.footer_text_size + \"rem\";\n\tfooter_el.style.color = state.footer_text_color || state.font_color;\n\tfooter_el.style.alignItems = state.footer_align_vertical;\n\n\tvar source_container = document.createElement(\"span\");\n\tsources.forEach(function(source, i) {\n\t\tvar link_container = document.createElement(\"p\");\n\t\tif (i > 0) link_container.innerText = \", \";\n\t\tif (source.url) {\n\t\t\tvar link_el = document.createElement(\"a\");\n\t\t\tlink_el.innerText = source.name || source.url;\n\t\t\tlink_el.href = addHttp(source.url);\n\t\t\tlink_el.target = \"_blank\";\n\t\t\tlink_container.appendChild(link_el);\n\t\t}\n\t\telse {\n\t\t\tlink_container.innerText += source.name || source.url;\n\t\t}\n\n\t\tsource_container.innerHTML += link_container.innerHTML;\n\t});\n\n\ttext_el.style.order = state.footer_logo_order == \"left\" ? 2 : \"\";\n\ttext_el.style.textAlign = state.footer_align == \"justify\" ? \"\" : state.footer_align;\n\n\tvar text_el_html = \"<p>\";\n\ttext_el_html += source_container.innerHTML !== \"\" ? state.source_label + \" \" + source_container.innerHTML : \"\";\n\ttext_el_html += state.footer_note ? (source_container.innerHTML !== \"\" ? \" • \" : \"\") + state.footer_note : \"\";\n\ttext_el_html += \"</p>\";\n\ttext_el_html += state.footer_note_secondary ? \"<br /><p>\" + state.footer_note_secondary + \"</p>\" : \"\";\n\n\ttext_el.innerHTML = text_el_html;\n\n\tlogo_el.src = getFooterLogoSrc();\n\tlogo_el.style.height = state.footer_logo_height + \"rem\";\n\tlogo_el.style.marginLeft = state.footer_logo_order == \"right\" ? state.footer_logo_margin + \"rem\" : \"\";\n\tlogo_el.style.marginRight = state.footer_logo_order == \"left\" ? state.footer_logo_margin + \"rem\" : \"\";\n\tlogo_el.style.verticalAlign = state.footer_align_vertical;\n\tlogo_el.style.display = hasFooterLogo() ? \"\" : \"none\";\n\n\tlogo_link.href = state.footer_logo_link_url == \"\" ? \"\" : addHttp(state.footer_logo_link_url);\n\tlogo_link.style.cursor = (state.footer_logo_link_url == \"\") ? \"default\" : \"pointer\";\n}\n\n\nexport { init, update };\n","import { color } from \"d3-color\";\n\nvar getTextWidth = (function() {\n\tvar context = document.createElement(\"canvas\").getContext(\"2d\");\n\treturn function(text, font) {\n\t\tcontext.font = font || \"10px sans-serif\";\n\t\tvar metrics = context.measureText(text);\n\t\treturn metrics.width;\n\t};\n})();\n\nfunction isImage(string) {\n\tif (typeof string != \"string\") return false;\n\treturn string.match(/^(https?:\\/\\/.+\\.(jpg|jpeg|svg|png|gif|webp)$|data:image\\/)/i) != null;\n}\n\nfunction isUrl(string) {\n\tif (typeof string != \"string\") return false;\n\treturn string.match(/^(https?:\\/\\/|data:)/i) != null;\n}\n\nfunction hexToColor(hex_string, opacity) {\n\tif (typeof hex_string != \"string\") return false;\n\tvar c = color(hex_string);\n\tc.opacity = opacity !== undefined ? opacity : 1;\n\treturn c;\n}\n\nfunction hexToRgba(hex_string, opacity) {\n\tvar c = hexToColor(hex_string, opacity);\n\n\treturn c ? c.toString() : false;\n}\n\nexport { getTextWidth, isImage, isUrl, hexToColor, hexToRgba };\n","import { state, elements, setLegendPosition, getHeight, SECTIONS } from \"./init\";\nimport { updateFontStyles } from \"../lib/font-styles\";\nimport { LAYOUTS } from \"../lib/layouts.js\";\nimport { update as updateHeader } from \"../lib/header.js\";\nimport { update as updateFooter } from \"../lib/footer.js\";\n\n\nfunction update(init) {\n\tif (!init) updateFontStyles(); // Don't load fonts before we get visualisation state (issue #139)\n\tupdateHeader();\n\tupdateFooter();\n\tupdateBackground();\n\tvar style = elements.wrapper.style;\n\tstyle.height = \"100vh\"; // reset to take up page height\n\tstyle.color = state.font_color;\n\tstyle.maxWidth = state.max_width_target == \"wrapper\" ? state.max_width + \"px\" : \"\";\n\tstyle.marginLeft = state.max_width_target == \"wrapper\" && state.max_width_align != \"left\" ? \"auto\" : \"\";\n\tstyle.marginRight = state.max_width_target == \"wrapper\" && state.max_width_align != \"right\" ? \"auto\" : \"\";\n\tstyle.padding = state.margin_top + \"rem \" + state.margin_right + \"rem \" + state.margin_bottom + \"rem \" + state.margin_left + \"rem\";\n\tstyle.borderTop = state.border.enabled ? state.border.top.width + \"px \" + state.border.top.style + \" \" + state.border.top.color : \"\";\n\tstyle.borderRight = state.border.enabled ? state.border.right.width + \"px \" + state.border.right.style + \" \" + state.border.right.color : \"\";\n\tstyle.borderBottom = state.border.enabled ? state.border.bottom.width + \"px \" + state.border.bottom.style + \" \" + state.border.bottom.color : \"\";\n\tstyle.borderLeft = state.border.enabled ? state.border.left.width + \"px \" + state.border.left.style + \" \" + state.border.left.color : \"\";\n\n\tvar p_style = elements.primary.outer.style;\n\tvar l_style = elements.legend.outer.style;\n\tvar pos = parseFloat(p_style.order) > parseFloat(l_style.order) ? \"above\" : \"below\";\n\n\tLAYOUTS[state.layout_order].forEach(function(el, i) { elements[el].outer.style.order = 10 * i; });\n\n\tp_style.flex = \"1 1 auto\";\n\tp_style.height = null;\n\tsetLegendPosition(pos);\n\n\tl_style.textAlign = state.header_align;\n\telements.controls.outer.style.textAlign = state.header_align;\n\n\telements.primary.outer.style.maxWidth = state.max_width_target == \"primary\" ? state.max_width + \"px\" : \"\";\n\telements.primary.outer.style.marginLeft = state.max_width_target == \"primary\" && state.max_width_align != \"left\" ? \"auto\" : \"\";\n\telements.primary.outer.style.marginRight = state.max_width_target == \"primary\" && state.max_width_align != \"right\" ? \"auto\" : \"\";\n\n\tvar use_screenreader_text = state.screenreader_hide_primary && state.screenreader_text_primary != \"\";\n\tvar description_node = document.getElementById(\"fl-layout-primary-description\");\n\tdescription_node.innerText = state.screenreader_hide_primary ? state.screenreader_text_primary : \"\";\n\tuse_screenreader_text ? elements.primary.outer.setAttribute(\"aria-describedBy\", \"fl-layout-primary-description\") : elements.primary.outer.removeAttribute(\"aria-describedBy\");\n\tstate.screenreader_hide_primary ? elements.primary.inner.setAttribute(\"aria-hidden\", true) : elements.primary.inner.removeAttribute(\"aria-hidden\");\n\n\n\tvar full_margin;\n\tif (state.space_between_sections == \"custom\") full_margin = state.space_between_sections_custom;\n\telse full_margin = state.space_between_sections;\n\tvar margin_string = (full_margin / 2) + \"rem\";\n\n\tSECTIONS.map(function(el) {\n\t\tvar containers = elements[el];\n\t\tvar style = containers.outer.style;\n\t\tvar inner = containers.inner;\n\t\treturn { name: el, height: getHeight(inner), order: parseFloat(style.order), style: style };\n\t})\n\t.sort(function(a, b) {\n\t\treturn a.order - b.order;\n\t})\n\t.filter(function(obj) {\n\t\tif (obj.height) return true;\n\t\tobj.style.paddingBottom = \"\";\n\t\tobj.style.paddingTop = \"\";\n\t})\n\t.forEach(function(obj, i, arr) {\n\t\tobj.style.paddingTop = i ? margin_string : \"\";\n\t\tobj.style.paddingBottom = (i < arr.length - 1) ? margin_string : \"\";\n\t});\n}\n\nfunction updateBackground() {\n\tdocument.body.style.backgroundColor = state.background_color_enabled ? state.background_color : \"transparent\";\n\tdocument.body.style.backgroundImage = state.background_image_enabled ? \"url(\" + state.background_image_src + \")\" : \"\";\n\tdocument.body.style.backgroundSize = state.background_image_size;\n\tdocument.body.style.backgroundRepeat = \"no-repeat\";\n\tdocument.body.style.backgroundPosition = state.background_image_position;\n}\n\n\nexport { update };\n","var DEFAULTS = Object.freeze({\n\tbody_font: {\n\t\tname: \"Source Sans Pro\",\n\t\turl: \"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700\"\n\t},\n\ttitle_font: null,\n\tsubtitle_font: null,\n\tfooter_font: null,\n\n\tborder: {\n\t\tenabled: false,\n\t\ttop: {\n\t\t\twidth: 1,\n\t\t\tcolor: \"#dddddd\",\n\t\t\tstyle: \"solid\"\n\t\t},\n\t\tright: {\n\t\t\twidth: 1,\n\t\t\tcolor: \"#dddddd\",\n\t\t\tstyle: \"solid\"\n\t\t},\n\t\tbottom: {\n\t\t\twidth: 1,\n\t\t\tcolor: \"#dddddd\",\n\t\t\tstyle: \"solid\"\n\t\t},\n\t\tleft: {\n\t\t\twidth: 1,\n\t\t\tcolor: \"#dddddd\",\n\t\t\tstyle: \"solid\"\n\t\t}\n\t},\n\n\tlayout_order: \"stack-default\",\n\n\tmargin_top: 0.75,\n\tmargin_right: 0.75,\n\tmargin_bottom: 0.75,\n\tmargin_left: 0.75,\n\n\tspace_between_sections: 1,\n\tspace_between_sections_custom: 1,\n\n\tbackground_color_enabled: true,\n\tbackground_color: \"#ffffff\",\n\tbackground_image_enabled: false,\n\tbackground_image_src: \"\",\n\tbackground_image_size: \"cover\",\n\tbackground_image_position: \"center center\",\n\n\tmax_width: 600,\n\tmax_width_target: \"none\",\n\tmax_width_align: \"center\",\n\n\tbreakpoint_mobile_small: 0,\n\tbreakpoint_mobile_big: 380,\n\tbreakpoint_tablet: 580,\n\tbreakpoint_desktop: 1080,\n\tbreakpoint_big_screen: 1280,\n\n\tfont_color: \"#333333\",\n\tfont_size_mobile_small: 62.5,\n\tfont_size_mobile_big: 75,\n\tfont_size_tablet: 87.5,\n\tfont_size_desktop: 100,\n\tfont_size_big_screen: 120,\n\n\t// header\n\theader_align: \"left\",\n\theader_border: \"none\",\n\theader_border_width: 1,\n\theader_border_color: \"#dddddd\",\n\theader_border_style: \"solid\",\n\theader_border_space: 0.5,\n\n\theader_logo_enabled: false,\n\theader_logo_align: \"inside\",\n\theader_logo_src: \"\",\n\theader_logo_height: 3,\n\theader_logo_position_inside: \"left\",\n\theader_logo_position_outside: \"left\",\n\theader_logo_margin_top: 0.25,\n\theader_logo_margin_right: 0.5,\n\theader_logo_margin_bottom: 0,\n\theader_logo_margin_left: 0,\n\n\ttitle: \"\",\n\ttitle_size: 1.6,\n\ttitle_size_custom: 1.6,\n\ttitle_line_height: 1.2,\n\ttitle_color: null,\n\ttitle_weight: \"bold\",\n\ttitle_space_above: 0,\n\ttitle_space_above_custom: 1.5,\n\ttitle_styling: false,\n\n\tsubtitle: \"\",\n\tsubtitle_size: 1.6,\n\tsubtitle_size_custom: 1.6,\n\tsubtitle_line_height: 1.2,\n\tsubtitle_color: null,\n\tsubtitle_weight: \"normal\",\n\tsubtitle_space_above: 0,\n\tsubtitle_space_above_custom: 1.5,\n\tsubtitle_styling: false,\n\n\theader_text: \"\",\n\theader_text_size: 1.2,\n\theader_text_size_custom: 1.2,\n\theader_text_line_height: 1.2,\n\theader_text_color: null,\n\theader_text_weight: \"normal\",\n\theader_text_space_above: 0.5,\n\theader_text_space_above_custom: 1.5,\n\n\t// footer\n\tsource_label: \"Source: \",\n\tsource_name: \"\",\n\tsource_url: \"\",\n\tsource_name_2: \"\",\n\tsource_url_2: \"\",\n\tsource_name_3: \"\",\n\tsource_url_3: \"\",\n\n\tfooter_note: \"\",\n\tfooter_note_secondary: \"\",\n\tfooter_text_size: 1,\n\tfooter_text_color: null,\n\tfooter_styling: false,\n\n\tfooter_align: \"justify\",\n\tfooter_align_vertical: \"center\",\n\tfooter_border: \"none\",\n\tfooter_border_width: 1,\n\tfooter_border_color: \"#dddddd\",\n\tfooter_border_style: \"solid\",\n\tfooter_border_space: 0.5,\n\n\tfooter_logo_enabled: false,\n\tfooter_logo_src: \"\",\n\tfooter_logo_src_light: \"\",\n\tfooter_logo_link_url: \"\",\n\tfooter_logo_height: 1.5,\n\tfooter_logo_margin: 0.25,\n\tfooter_logo_order: \"right\",\n\n\tscreenreader_hide_primary: true,\n\tscreenreader_text_primary: \"\"\n});\n\n\nfunction getDefaultHeight() {\n\tif (Flourish.fixed_height) return window.innerHeight;\n\tvar width = window.innerWidth;\n\tif (width > 999) return 650;\n\tif (width > 599) return 575;\n\treturn 400;\n}\n\n\nvar DEFAULT_OVERLAY_MESSAGE = \"Your web browser does not support the features used by this content. Consider updating to a modern browser.\";\n\n\nexport { DEFAULTS, getDefaultHeight, DEFAULT_OVERLAY_MESSAGE };\n","var window_width, base_size;\n\nfunction remToPx(rem) {\n\tif (window.innerWidth !== window_width) {\n\t\twindow_width = window.innerWidth;\n\t\tbase_size = parseFloat(getComputedStyle(document.documentElement).fontSize);\n\t}\n\treturn rem * base_size;\n}\n\nexport { remToPx };\n","\nimport { update } from \"./update\";\nimport { DEFAULTS, getDefaultHeight, DEFAULT_OVERLAY_MESSAGE } from \"../defaults\";\nimport { initFontStyles } from \"../lib/font-styles\";\nimport { init as initHeader } from \"../lib/header.js\";\nimport { init as initFooter } from \"../lib/footer.js\";\nimport { remToPx } from \"../lib/rem-to-px\";\n\n\n// Globals ------------------------------------------------------\nvar state;\nvar SECTIONS = [\"header\", \"controls\", \"legend\", \"primary\", \"footer\"];\nvar overlay;\nvar elements = {};\n\n\n// Helper functions ------------------\nfunction getWidth(node) {\n\treturn node.getBoundingClientRect().width;\n}\n\nfunction getHeight(node) {\n\treturn node.getBoundingClientRect().height;\n}\n\nfunction createWrapper() {\n\tvar outer_wrapper = document.createElement(\"div\");\n\touter_wrapper.id = \"fl-layout-wrapper-outer\";\n\touter_wrapper.style.display = \"flex\";\n\n\tvar wrapper = document.createElement(\"main\");\n\twrapper.id = \"fl-layout-wrapper\";\n\twrapper.style.display = \"flex\";\n\twrapper.style.flexGrow = \"1\";\n\twrapper.style.flexDirection = \"column\";\n\twrapper.style.boxSizing = \"border-box\";\n\t// This will make sure the wrapper won't grow in width when\n\t// there are child elements that exceed the width\n\twrapper.style.overflow = \"hidden\";\n\n\tvar aside = document.createElement(\"aside\");\n\taside.id = \"fl-layout-sidebar\";\n\taside.style.position = \"relative\";\n\n\telements.sidebar = aside;\n\n\touter_wrapper.appendChild(wrapper);\n\touter_wrapper.appendChild(aside);\n\n\tdocument.body.appendChild(outer_wrapper);\n\n\treturn wrapper;\n}\n\nfunction addElement(name, i) {\n\tvar id = \"fl-layout-\" + name;\n\n\tvar outer_el = document.createElement(\"section\");\n\touter_el.className = \"fl-layout-container\";\n\touter_el.id = id + \"-container\";\n\touter_el.style.width = \"100%\";\n\touter_el.style.position = \"relative\";\n\touter_el.style.order = i;\n\n\tvar inner_el = document.createElement(\"div\");\n\tinner_el.className = \"fl-layout-inner\";\n\tinner_el.id = id;\n\tinner_el.style.width = \"100%\";\n\n\t// This was added in a later version so that absolute elements in the\n\t// primary container align with the edge of the inner primary container.\n\t// We've found one issue with this in the arc map, that is documented\n\t// in issue 72 of this repository\n\tinner_el.style.position = \"relative\";\n\n\t// The height of the outer primary container is decided by flexbox\n\t// and depends on the remaining available vertical space. As such\n\t// there is no explicity height set to this container (like a % or px)\n\t// Safari gets confused by this and any child elements (the primary inner\n\t// in this case) with an height of 100% will be calculated as \"height: auto\"\n\t// Setting the primary outer to \"display: flex\" will cause the child element\n\t// to stretch out over the available space. Solution found here:\n\t// https://stackoverflow.com/a/33644245\n\tif (name == \"primary\") {\n\t\touter_el.style.display = \"flex\";\n\t\tgetScreenreaderText(outer_el);\n\t}\n\n\tif (name == \"controls\" || name == \"legend\") {\n\t\tinner_el.setAttribute(\"aria-hidden\", true);\n\t}\n\n\touter_el.appendChild(inner_el);\n\telements.wrapper.appendChild(outer_el);\n\n\treturn {\n\t\touter: outer_el,\n\t\tinner: inner_el\n\t};\n}\n\nfunction getScreenreaderText(container) {\n\tvar el = document.createElement(\"p\");\n\tel.id = \"fl-layout-primary-description\";\n\tvar style = el.style;\n\tstyle.border = \"0\";\n\tstyle.height = \"1px\";\n\tstyle.width = \"1px\";\n\tstyle.margin = \"-1px\";\n\tstyle.overflow = \"hidden\";\n\tstyle.padding = \"0\";\n\tstyle.position = \"absolute\";\n\tstyle.clip = \"rect(0 0 0 0)\";\n\tcontainer.appendChild(el);\n\treturn el;\n}\n\nfunction createOverlay() {\n\tvar primary = elements.primary.outer;\n\tprimary.style.position = \"relative\";\n\toverlay = document.createElement(\"div\");\n\toverlay.id = \"fl-layout-overlay\";\n\tvar style = overlay.style;\n\tstyle.position = \"absolute\";\n\tstyle.display = \"none\";\n\tstyle.width = \"100%\";\n\tstyle.height = \"100%\";\n\tstyle.top = 0;\n\tstyle.left = 0;\n\tstyle.backgroundColor = \"rgb(200,200,200)\";\n\tstyle.zIndex = 999999;\n\tstyle.pointerEvents = \"none\";\n\tvar p = document.createElement(\"p\");\n\tp.className = \"fl-layout-overlay-message\";\n\tstyle = p.style;\n\tstyle.color = \"#333333\";\n\tstyle.fontSize = \"1.5rem\";\n\tstyle.paddingLeft = \"15%\";\n\tstyle.paddingRight = \"15%\";\n\tstyle.width = \"100%\";\n\tstyle.boxSizing = \"border-box\";\n\tstyle.position = \"absolute\";\n\tstyle.top = \"50%\";\n\tstyle.transform = \"translate(0, -50%)\";\n\tstyle.margin = \"0\";\n\tstyle.textAlign = \"center\";\n\toverlay.appendChild(p);\n\tprimary.appendChild(overlay);\n\treturn overlay;\n}\n\n\n// Functions returned by init ------------------\nfunction getWrapper() {\n\treturn elements.wrapper;\n}\n\nfunction getSidebar() {\n\treturn elements.sidebar;\n}\n\nfunction getSection(section) {\n\treturn SECTIONS.indexOf(section) !== -1 ? elements[section].inner : null;\n}\n\nfunction getOuterWidth(el) {\n\tif (!elements[el] && el !== undefined) return null;\n\treturn (el == \"wrapper\" || el === undefined) ? getWidth(elements.wrapper) : getWidth(elements[el].outer);\n}\n\nfunction getInnerWidth(el) {\n\tif (!elements[el] && el !== undefined) return null;\n\treturn (el == \"wrapper\" || el === undefined) ? getWidth(elements.wrapper) - getMargin(\"horizontal\") - getBorderWidth(\"horizontal\") : getWidth(elements[el].inner);\n}\n\nfunction getOuterHeight(el) {\n\tif (!elements[el] && el !== undefined) return null;\n\treturn (el == \"wrapper\" || el === undefined) ? getHeight(elements.wrapper) : getHeight(elements[el].outer);\n}\n\nfunction getInnerHeight(el) {\n\tif (!elements[el] && el !== undefined) return null;\n\treturn (el == \"wrapper\" || el === undefined) ? getHeight(elements.wrapper) - getMargin(\"vertical\") - getBorderWidth(\"vertical\") : getHeight(elements[el].inner);\n}\n\nfunction getPrimaryHeight() {\n\treturn getHeight(elements.primary.outer) - getVerticalPadding(elements.primary.outer);\n}\n\nfunction getPrimaryWidth() {\n\treturn getWidth(elements.primary.inner);\n}\n\nfunction getVerticalPadding(node) {\n\tvar primary_padding_top = parseFloat(getComputedStyle(node).paddingTop) || 0;\n\tvar primary_padding_bottom = parseFloat(getComputedStyle(node).paddingBottom) || 0;\n\treturn primary_padding_top + primary_padding_bottom;\n}\n\nfunction getDefaultPrimaryHeight() {\n\tvar default_inner_height = getDefaultHeight() - getMargin(\"vertical\") - getBorderWidth(\"vertical\");\n\tvar others = [\"header\", \"controls\", \"legend\", \"footer\"];\n\tvar other_height = others.reduce(function(sum, el) { return sum += getOuterHeight(el); }, 0);\n\n\treturn default_inner_height - other_height - getVerticalPadding(elements.primary.outer);\n}\n\nfunction getMargin(side) {\n\tvar margin;\n\n\tif (side == \"left\") margin = state.margin_left;\n\telse if (side == \"right\") margin = state.margin_right;\n\telse if (side == \"top\") margin = state.margin_top;\n\telse if (side == \"bottom\") margin = state.margin_bottom;\n\telse if (side == \"horizontal\") margin = state.margin_left + state.margin_right;\n\telse if (side == \"vertical\") margin = state.margin_top + state.margin_bottom;\n\n\treturn remToPx(margin);\n}\n\nfunction getBorderWidth(space) {\n\tif (!state.border.enabled) return 0;\n\tif (space == \"vertical\") return state.border.top.width + state.border.bottom.width;\n\tif (space == \"horizontal\") return state.border.left.width + state.border.right.width;\n\treturn null;\n}\n\nfunction setHeight(primary_height) {\n\tvar primary = elements.primary;\n\tif (Flourish.fixed_height || Flourish.fixed_height === undefined) {\n\t\tprimary.inner.style.height = \"\";\n\t\treturn;\n\t}\n\n\tvar is_null = primary_height === null;\n\tvar p_height = is_null ? getDefaultPrimaryHeight() : primary_height;\n\n\tif (p_height + getVerticalPadding(elements.primary.outer) === parseFloat(primary.outer.style.height)) return;\n\telements.wrapper.style.height = \"\";\n\n\tprimary.outer.style.flex = \"\";\n\tprimary.inner.style.height = p_height + \"px\";\n\tFlourish.setHeight(is_null ? null : getOuterHeight());\n}\n\nfunction setLegendPosition(pos) {\n\tvar p_order = parseFloat(elements.primary.outer.style.order);\n\telements.legend.outer.style.order = p_order + 1 * (pos.trim().toLowerCase() === \"below\" ? 1 : -1);\n}\n\nfunction showOverlay(show_overlay) {\n\tvar p = overlay.querySelector(\".fl-layout-overlay-message\");\n\tif (show_overlay) {\n\t\toverlay.style.display = \"block\";\n\t\tvar message = typeof show_overlay === \"string\" ? show_overlay : DEFAULT_OVERLAY_MESSAGE;\n\t\tp.innerHTML = message;\n\t}\n\telse {\n\t\tp.textContent = \"\";\n\t\toverlay.style.display = \"none\";\n\t}\n}\n\nfunction getOverlay() {\n\treturn overlay;\n}\n\n\n// Main init function ----------------------------------------\nfunction init(state_) {\n\tstate = state_;\n\tfor (var key in DEFAULTS) {\tif (state[key] === undefined) state[key] = DEFAULTS[key]; }\n\n\tinitFontStyles();\n\telements.wrapper = createWrapper();\n\tSECTIONS.forEach(function(section, i) { elements[section] = addElement(section, i); });\n\tgetSection(\"header\").appendChild(initHeader());\n\tgetSection(\"footer\").appendChild(initFooter());\n\telements.primary.outer.style.overflow = \"hidden\";\n\tcreateOverlay();\n\n\tupdate(true);\n\n\treturn {\n\t\tupdate: update,\n\t\tgetWrapper: getWrapper,\n\t\tgetSidebar: getSidebar,\n\t\tgetSection: getSection,\n\t\tgetOuterWidth: getOuterWidth,\n\t\tgetInnerWidth: getInnerWidth,\n\t\tgetOuterHeight: getOuterHeight,\n\t\tgetInnerHeight: getInnerHeight,\n\t\tgetPrimaryHeight: getPrimaryHeight,\n\t\tgetPrimaryWidth: getPrimaryWidth,\n\t\tgetDefaultPrimaryHeight: getDefaultPrimaryHeight,\n\t\tsetHeight: setHeight,\n\t\tsetLegendPosition: setLegendPosition,\n\t\tshowOverlay: showOverlay,\n\t\tremToPx: remToPx,\n\t\tgetOverlay: getOverlay\n\t};\n}\n\n\nexport { init, state, elements, setLegendPosition, getHeight, remToPx, SECTIONS };\n","/**\n * @file\n * The current state of template. You can make some or all of the properties\n * of the state object available to the user as settings in settings.js.\n */\n\nexport default {\n\tlayout: {\n\t\ttitle: 'Title not yet added',\n\t\tsubtitle: 'Suntitle not yet added',\n\t\tfooter_note: \"Source: Not yet added\",\n\t\tbackground_color: '#fff1e5',\n\t},\n\tx: {title_mode: 'custom',\n\t\ttick_label_angle: 0,\n\t\tline_and_tick_color : '#ccc1b7',\n\t\tshow_scale_settings: true,\n\t\tnice: false,\n\t\taxis_position: 'bottom',\n\t},\n\ty: {title_mode: 'custom',\n\t\tgridlines_visible: true,\n\t\tgridline_color: '#ccc1b7'},\n\ty2: {},\n\tcolor: {domain: ['US', 'UK'], range: ['#f3d4c2','e3c1a5'],},\n\tchart_bg: {},\n    fixedHeight: false,\n\theight: 550,\n\tdateFormat: '%d/%m/%Y',\n\ttickFormat: null,\n\tdotSize: 2.5,\n\tdotOpacity: 0.2,\n\tpolls:{smallSize: 1.1, largeSize: 1.25, smallOpacity: 1, largeOpacity: 1},\n\taverages:{smallStrokeWidth: 2, largeStrokeWidth: 3, smallOpacity: 1, largeOpacity: 1},\n\tmoe:{opacityMob: 0.3, opacityDesk: 0.3},\n\tlegend_container: {},\n\tlegend_categorical: {swatch_width: 1.2, swatch_height: .3},\n\tdisplayValues: {},\n\tpopup: {} // Add any properties to this object to override the default settings\n\n};\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name;\n}\n","import namespace from \"./namespace\";\nimport {xhtml} from \"./namespaces\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","import {Selection} from \"./index\";\nimport {EnterNode} from \"./enter\";\nimport constant from \"../constant\";\n\nvar keyPrefix = \"$\"; // Protect against keys like “__proto__”.\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = {},\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = keyPrefix + key.call(node, node.__data__, i, group);\n      if (keyValue in nodeByKeyValue) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue[keyValue] = node;\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = keyPrefix + key.call(parent, data[i], i, data);\n    if (node = nodeByKeyValue[keyValue]) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue[keyValue] = null;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue[keyValues[i]] === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nexport default function(value, key) {\n  if (!value) {\n    data = new Array(this.size()), j = -1;\n    this.each(function(d) { data[++j] = d; });\n    return data;\n  }\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = value.call(parent, parent && parent.__data__, j, parents),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator\";\nimport selector from \"../selector\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","var filterEvents = {};\n\nexport var event = null;\n\nif (typeof document !== \"undefined\") {\n  var element = document.documentElement;\n  if (!(\"onmouseenter\" in element)) {\n    filterEvents = {mouseenter: \"mouseover\", mouseleave: \"mouseout\"};\n  }\n}\n\nfunction filterContextListener(listener, index, group) {\n  listener = contextListener(listener, index, group);\n  return function(event) {\n    var related = event.relatedTarget;\n    if (!related || (related !== this && !(related.compareDocumentPosition(this) & 8))) {\n      listener.call(this, event);\n    }\n  };\n}\n\nfunction contextListener(listener, index, group) {\n  return function(event1) {\n    var event0 = event; // Events can be reentrant (e.g., focus).\n    event = event1;\n    try {\n      listener.call(this, this.__data__, index, group);\n    } finally {\n      event = event0;\n    }\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, capture) {\n  var wrap = filterEvents.hasOwnProperty(typename.type) ? filterContextListener : contextListener;\n  return function(d, i, group) {\n    var on = this.__on, o, listener = wrap(value, i, group);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.capture);\n        this.addEventListener(o.type, o.listener = listener, o.capture = capture);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, capture);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, capture: capture};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, capture) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  if (capture == null) capture = false;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, capture));\n  return this;\n}\n\nexport function customEvent(event1, listener, that, args) {\n  var event0 = event;\n  event1.sourceEvent = event;\n  event = event1;\n  try {\n    return listener.apply(that, args);\n  } finally {\n    event = event0;\n  }\n}\n","import defaultView from \"../window\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select\";\nimport selection_selectAll from \"./selectAll\";\nimport selection_filter from \"./filter\";\nimport selection_data from \"./data\";\nimport selection_enter from \"./enter\";\nimport selection_exit from \"./exit\";\nimport selection_join from \"./join\";\nimport selection_merge from \"./merge\";\nimport selection_order from \"./order\";\nimport selection_sort from \"./sort\";\nimport selection_call from \"./call\";\nimport selection_nodes from \"./nodes\";\nimport selection_node from \"./node\";\nimport selection_size from \"./size\";\nimport selection_empty from \"./empty\";\nimport selection_each from \"./each\";\nimport selection_attr from \"./attr\";\nimport selection_style from \"./style\";\nimport selection_property from \"./property\";\nimport selection_classed from \"./classed\";\nimport selection_text from \"./text\";\nimport selection_html from \"./html\";\nimport selection_raise from \"./raise\";\nimport selection_lower from \"./lower\";\nimport selection_append from \"./append\";\nimport selection_insert from \"./insert\";\nimport selection_remove from \"./remove\";\nimport selection_clone from \"./clone\";\nimport selection_datum from \"./datum\";\nimport selection_on from \"./on\";\nimport selection_dispatch from \"./dispatch\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch\n};\n\nexport default selection;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import {Selection, root} from \"./selection/index\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","function Stylesheet() {\n\tthis.declarations = [];\n\treturn this;\n}\n\nStylesheet.prototype.select = function(selector) {\n\tif (!selector) return this;\n\tvar declaration = new Declaration(selector, this);\n\tdeclaration.parent = this;\n\tthis.addDeclaration(declaration);\n\n\treturn declaration;\n};\n\nStylesheet.prototype.addDeclaration = function(declaration) {\n\tthis.declarations.push(declaration);\n\treturn this;\n};\n\nStylesheet.prototype.print = function() {\n\tvar text = \"\";\n\tthis.declarations.forEach(function(declaration) {\n\t\ttext += declaration.selector + \" {\\n\";\n\t\tdeclaration.styles.forEach(function(style) {\n\t\t\ttext += \"\\t\" + style[0] + \": \" + style[1] + \";\\n\";\n\t\t});\n\t\ttext += \"}\\n\\n\";\n\t});\n\treturn text;\n};\n\nStylesheet.prototype.clear = function() {\n\tthis.declarations = [];\n\treturn this;\n};\n\nfunction Declaration(selector) {\n\tthis.selector = selector;\n\tthis.styles = [];\n\treturn this;\n}\n\nDeclaration.prototype.style = function(property, _value) {\n\tvar value = typeof value_ == \"function\" ? _value() : _value;\n\tif (value !== \"\" && value !== null && value !== undefined) this.styles.push([property, value]);\n\treturn this;\n};\n\nDeclaration.prototype.select = function(selector) {\n\treturn this.parent.select(this.selector + \" \" + selector);\n};\n\nexport default Stylesheet;\n","import {Selection} from \"./index\";\nimport selector from \"../selector\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index\";\nimport selectorAll from \"../selectorAll\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index\";\nimport matcher from \"../matcher\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import sparse from \"./sparse\";\nimport {Selection} from \"./index\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index\";\n\nexport default function(selection) {\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  var nodes = new Array(this.size()), i = -1;\n  this.each(function() { nodes[++i] = this; });\n  return nodes;\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  var size = 0;\n  this.each(function() { ++size; });\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import { ascending } from \"d3-array\";\nimport Stylesheet from \"@flourish/js2css\";\n\nvar small_gap = \"0.2em\";\n\nfunction appendTo(container) {\n\tcontainer.appendChild(this._container.node());\n\n\tif (!document.querySelector(\"#legend-styles\")) {\n\t\tvar css = document.createElement(\"style\");\n\t\tvar styles = new Stylesheet();\n\n\t\tstyles.select(\".fl-legend-container.interactive .fl-legend-item:hover\")\n\t\t\t.style(\"opacity\", 0.75)\n\t\t\t.style(\"cursor\", \"pointer\");\n\n\t\tcss.id = \"legend-styles\";\n\t\tcss.type = \"text/css\";\n\n\t\tcss.innerHTML = styles.print();\n\t\tdocument.head.appendChild(css);\n\t}\n\n\treturn this;\n}\n\nfunction format(formatFunction) {\n\tthis._formatFunction = formatFunction;\n\treturn this;\n}\n\nfunction getContainer() {\n\treturn this._container;\n}\n\nfunction visible(visible_) {\n\tif (visible_ === undefined) return this._visible;\n\tthis._visible = visible_;\n\treturn this;\n}\n\nfunction autoTitle(value) {\n\tif (value === undefined) return this._auto_title;\n\tthis._auto_title = value;\n\treturn this;\n}\n\nfunction _updateTitle() {\n\tvar _this = this;\n\tvar title = _this._state.title_mode == \"auto\" ? _this.autoTitle() : _this._state.title;\n\n\tthis._container.select(\".fl-legend-title\")\n\t\t.text(title)\n\t\t.style(\"display\", function() {\n\t\t\tif (!title.trim()) return \"none\";\n\t\t\telse if (_this._state.orientation === undefined) return \"inline-block\";\n\t\t\telse return _this._state.orientation == \"horizontal\" ? \"inline-block\" : \"block\";\n\t\t})\n\t\t.style(\"padding-inline-start\", 0)\n\t\t.style(\"padding-inline-end\", small_gap);\n}\n\nfunction getDomain(domain_, state) {\n\tvar domain = domain_.sort(ascending);\n\tvar domain_min = domain[0];\n\tvar domain_max = domain[domain.length - 1];\n\tvar domain_mid = domain.length > 2 ? domain[1] : null;\n\n\tif (state.legend_min !== null || state.legend_max !== null) {\n\t\tif (state.legend_min !== null && state.legend_max !== null) {\n\t\t\tif (state.legend_min < state.legend_max) {\n\t\t\t\tdomain_min = state.legend_min;\n\t\t\t\tdomain_max = state.legend_max;\n\t\t\t}\n\t\t}\n\t\telse if (state.legend_min !== null) {\n\t\t\tdomain_min = state.legend_min;\n\t\t\tif (domain_max < domain_min) domain_max = domain_min + 2;\n\t\t}\n\t\telse {\n\t\t\tdomain_max = state.legend_max;\n\t\t\tif (domain_min > domain_max) domain_min = domain_max - 2;\n\t\t}\n\t}\n\n\tif (domain_mid !== null && (domain_min > domain_mid || domain_max < domain_mid)) domain_mid = null;\n\n\tvar legend_domain = [domain_min];\n\tif (domain_mid !== null) legend_domain.push(domain_mid);\n\tlegend_domain.push(domain_max);\n\n\tlegend_domain.min = domain_min;\n\tlegend_domain.max = domain_max;\n\tlegend_domain.mid = domain_mid;\n\n\treturn legend_domain;\n}\n\nexport { appendTo, format, getContainer, visible, autoTitle, _updateTitle, getDomain, small_gap };\n","function remToPx(rem) {\n\treturn rem * parseFloat(getComputedStyle(document.documentElement).fontSize);\n}\n\nfunction log10(val) {\n\treturn Math.log(val) / Math.LN10;\n}\n\nfunction roundDown(val) {\n\t// Round x down to nice value (preserve the first significant digit, the remaining digits -> 0)\n\t// e.g. 123.456 => 100, 0.123456 -> 0.1\n\n\tvar exp = Math.floor(log10(val));\n\tvar normalised_val = val / Math.pow(10, exp);\n\tvar normalised_val_floored = Math.floor(normalised_val);\n\tvar rounded = normalised_val_floored * Math.pow(10, exp);\n\t// Remove floating point garbage from decimal values\n\tif (exp < 0) rounded = parseFloat(rounded.toFixed(-exp));\n\n\treturn rounded;\n}\n\nexport { remToPx, roundDown };\n","import { select, event as d3_event } from \"d3-selection\";\nimport { appendTo, format, getContainer, visible, autoTitle, _updateTitle, small_gap } from \"../common\";\nimport { remToPx } from \"../utils\";\n\nvar legend_count = 0;\nvar DEFAULTS = Object.freeze({\n\tshow_legend: true,\n\n\ttitle_mode: \"auto\",\n\ttitle: \"\",\n\n\tmax_width: 25,\n\n\tswatch_width: 0.75,\n\tswatch_height: 1,\n\tswatch_radius: 3,\n\tlegend_items_padding: 0.2,\n\n\ticon_height: 1,\n\ticon_color: \"#777777\",\n\n\torder_override: \"\",\n\n\torientation: \"horizontal\",\n\n});\n\nfunction DiscreteColorLegend(state_) {\n\tthis._state = state_;\n\tfor (var key in DEFAULTS) {\tif (this._state[key] === undefined) this._state[key] = DEFAULTS[key]; }\n\n\tthis._colorFunction = undefined;\n\tthis._formatFunction = undefined;\n\tthis._legend_items = [];\n\tthis._filtered_items = [];\n\tthis._eventListeners = [];\n\tthis._id = \"fl-legend-discrete-color-\" + legend_count;\n\tthis._visible = true;\n\tthis._auto_title = \"\";\n\n\tthis._container = select(document.createElement(\"div\")).attr(\"class\", \"fl-legend-container\").attr(\"id\", this._id);\n\tthis._container.append(\"p\").attr(\"class\", \"fl-legend-title\");\n\tlegend_count++;\n\n\treturn this;\n}\n\n// Common methods\nDiscreteColorLegend.prototype.appendTo = appendTo;\nDiscreteColorLegend.prototype.format = format;\nDiscreteColorLegend.prototype.getContainer = getContainer;\nDiscreteColorLegend.prototype.visible = visible;\nDiscreteColorLegend.prototype.autoTitle = autoTitle;\nDiscreteColorLegend.prototype._updateTitle = _updateTitle;\n\n\nDiscreteColorLegend.prototype.data = function(items_, colorFunction_) {\n\tthis._colorFunction = colorFunction_;\n\n\tif (!items_ && !colorFunction_) return this._legend_items.slice();\n\n\tif (!colorFunction_) this._legend_items = Array.isArray(items_) ? items_.slice() : [];\n\telse if (!Array.isArray(items_)) this._legend_items = [];\n\telse {\n\t\tthis._legend_items = items_.slice().map(function(legend_item, i) {\n\t\t\tvar legend_item_label = typeof legend_item == \"object\" ? legend_item.label || \"\" : legend_item;\n\t\t\treturn !legend_item_label ? null : {\n\t\t\t\tlabel: legend_item_label,\n\t\t\t\tcolor: colorFunction_(legend_item_label),\n\t\t\t\tindex: i\n\t\t\t};\n\t\t}).filter(function(legend_item) { return legend_item !== null; });\n\t}\n\treturn this;\n};\n\nDiscreteColorLegend.prototype.filtered = function(items_) {\n\tif (!items_) return this._filtered_items.slice();\n\tthis._filtered_items = Array.isArray(items_) ? items_.slice() : [];\n\treturn this;\n};\n\nDiscreteColorLegend.prototype.on = function(type, callback) {\n\tif (!this._container) return this;\n\n\t// Update list of event listeners, so we know if there are any interactions going on\n\tif (callback && this._eventListeners.indexOf(type) < 0) this._eventListeners.push(type);\n\telse if (!callback) this._eventListeners.splice(this._eventListeners.indexOf[type], 1);\n\tthis._container.classed(\"interactive\", this._eventListeners.length > 0);\n\n\t// Remove event listener if callback is empty\n\tif (!callback) this._container.on(type, null);\n\telse {\n\t\tthis._container.on(type, function() {\n\t\t\tvar t = d3_event.target, t_parent = t.parentNode;\n\t\t\tvar item = t.classList.contains(\"fl-legend-item\") ? t : (t_parent.classList.contains(\"fl-legend-item\") ? t_parent : null);\n\t\t\tif (item) {\n\t\t\t\tvar item_data = select(item).datum();\n\t\t\t\tcallback.call(item, item_data, item_data.index);\n\t\t\t}\n\t\t});\n\t}\n\n\treturn this;\n};\n\nDiscreteColorLegend.prototype.update = function() {\n\tvar should_display = this._state.show_legend && this._visible && this._legend_items.length > 0;\n\n\tthis._container.style(\"display\", should_display ? \"\" : \"none\");\n\n\tif (!should_display) return this;\n\n\tthis._updateTitle();\n\tthis._updateLegend();\n\n\treturn this;\n};\n\nfunction sortByOrderOverride(items, order_override_string) {\n\t// First build a lookup table from each of the overridden legend\n\t// labels to the index of its new position in the legend.\n\tvar new_index_lookup = {};\n\tvar overrides = order_override_string.split(/\\s*\\n\\s*/);\n\tfor (var i = 0; i < overrides.length; i++) {\n\t\tvar override = overrides[i];\n\t\tnew_index_lookup[override] = i;\n\t}\n\t// Now go through each of the original items and if it appears in\n\t// the lookup table, set it at its new position in sorted_items.\n\tvar sorted_items = [];\n\tfor (var old_index = 0; old_index < items.length; old_index++) {\n\t\tvar item = items[old_index];\n\t\tvar new_index = new_index_lookup[item.label];\n\t\tif (new_index === undefined) continue;\n\t\tsorted_items[new_index] = item;\n\t}\n\t// If there was any override that isn't a legend label (e.g. it's\n\t// mispelled), there'll be a \"hole\" in the sorted_items array, so\n\t// compact it before returning.\n\treturn sorted_items.filter(function (item) { return item !== undefined; });\n}\n\nDiscreteColorLegend.prototype._updateLegend = function() {\n\tvar _this = this;\n\tvar format = this._formatFunction;\n\tthis._container\n\t\t.style(\"max-width\", remToPx(this._state.max_width) + \"px\")\n\t\t.style(\"display\", \"inline-flex\")\n\t\t.style(\"flex-wrap\", \"wrap\")\n\t\t.style(\"align-items\", this._state.orientation == \"horizontal\" ? \"center\" : \"start\")\n\t\t.style(\"align-content\", this._state.orientation == \"horizontal\" ? \"center\" : null)\n\t\t.style(\"flex-direction\", this._state.orientation == \"horizontal\" ? null : \"column\");\n\n\tvar legend_item_data;\n\tif (this._state.order_override.trim()) {\n\t\tlegend_item_data = sortByOrderOverride(this._legend_items, this._state.order_override);\n\t}\n\telse {\n\t\tlegend_item_data = this._legend_items;\n\t}\n\n\tvar legend_items = this._container\n\t\t.selectAll(\".fl-legend-item\")\n\t\t.data(legend_item_data);\n\n\tvar legend_items_enter = legend_items\n\t\t.enter()\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"fl-legend-item\");\n\n\tlegend_items_enter\n\t\t.append(\"div\")\n\t\t.attr(\"class\", \"fl-legend-swatch\");\n\n\tlegend_items_enter\n\t\t.append(\"svg\")\n\t\t.attr(\"class\", \"fl-legend-icon\")\n\t\t.append(\"path\");\n\n\tlegend_items_enter\n\t\t.append(\"p\")\n\t\t.attr(\"class\", \"fl-legend-label\");\n\n\tvar legend_items_update = legend_items.merge(legend_items_enter);\n\n\tlegend_items_update\n\t\t.style(\"display\", this._state.orientation == \"horizontal\" ? \"inline-flex\" : \"flex\")\n\t\t.style(\"opacity\", function(d) {\n\t\t\treturn _this._filtered_items.indexOf(d.label) > -1 ? 0.2 : \"\";\n\t\t})\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"padding-inline-end\", this._state.orientation == \"horizontal\" ? this._state.legend_items_padding + \"rem\" : 0)\n\t\t.style(\"padding-inline-start\", 0);\n\n\t// Swatch\n\tlegend_items_update.select(\".fl-legend-swatch\")\n\t\t.style(\"height\", this._state.swatch_height + \"rem\")\n\t\t.style(\"width\", this._state.swatch_width + \"rem\")\n\t\t.style(\"border-radius\", this._state.swatch_radius + \"px\")\n\t\t.style(\"background-color\", function(d) { return d.color; })\n\t\t// Only display if icon not defined\n\t\t.style(\"display\", function(d) {\n\t\t\treturn d.icon ? \"none\" : null;\n\t\t});\n\n\t// Icon\n\tlegend_items_update.select(\".fl-legend-icon\")\n\t\t// Using Math.ceil on SVG width and height seems to prevent subtle cropping of the icon edges (particularly apparent in outline mode)\n\t\t.attr(\"height\", Math.ceil(remToPx(this._state.icon_height)))\n\t\t.attr(\"width\", function(d) {\n\t\t\tif (!d.icon) return 0;\n\n\t\t\tvar w = d.icon.width;\n\t\t\tvar h = d.icon.height;\n\t\t\tvar stroke_width = d.outline ? h * d.stroke_thickness : 0;\n\t\t\tw += stroke_width;\n\t\t\th += stroke_width;\n\n\t\t\tvar aspect_ratio = w / h;\n\t\t\tvar width_px = remToPx(_this._state.icon_height * aspect_ratio);\n\t\t\treturn Math.ceil(width_px);\n\t\t})\n\t\t.style(\"margin-right\", this._state.text_size * 0.25 + \"rem\")\n\t\t.style(\"display\", function(d) {\n\t\t\treturn d.icon ? \"inline-block\" : \"none\";\n\t\t})\n\t\t.select(\"path\")\n\t\t.attr(\"d\", function(d) {\n\t\t\treturn d.icon ? d.icon.path_string : null;\n\t\t})\n\t\t.attr(\"transform\", function(d) {\n\t\t\tif (!d.icon) return null;\n\n\t\t\tvar h = d.icon.height;\n\t\t\tvar stroke_width = d.outline ? h * d.stroke_thickness : 0;\n\t\t\th += stroke_width;\n\n\t\t\tvar svg_height = remToPx(_this._state.icon_height);\n\t\t\tvar scale_factor = svg_height / h;\n\n\t\t\tvar transform = \"scale(\" + scale_factor + \")\";\n\t\t\ttransform += \"translate(\" + 0.5 * stroke_width + \",\" + 0.5 * stroke_width + \")\";\n\n\t\t\treturn transform;\n\t\t})\n\t\t.style(\"fill\", function(d) {\n\t\t\tif (d.outline) return \"none\";\n\t\t\treturn d.color || _this._state.icon_color;\n\t\t})\n\t\t.style(\"stroke\", function(d) {\n\t\t\tif (!d.outline) return \"none\";\n\t\t\treturn d.color || _this._state.icon_color;\n\t\t})\n\t\t.style(\"stroke-width\", function(d) {\n\t\t\tif (!d.outline) return 0;\n\t\t\tvar stroke_width = d.icon.height * d.stroke_thickness;\n\t\t\treturn stroke_width;\n\t\t});\n\n\t// Label\n\tlegend_items_update.select(\".fl-legend-label\")\n\t\t.text(function(d) {\n\t\t\treturn format ? format(d.label) : d.label;\n\t\t})\n\t\t.style(\"margin\", 0)\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"padding-inline-end\", 0)\n\t\t.style(\"padding-inline-start\", small_gap);\n\n\tlegend_items.exit().remove();\n\n\tthis._legend_item_els = legend_items_update;\n\n\treturn this;\n};\n\nexport default DiscreteColorLegend;\n","export var prefix = \"$\";\n\nfunction Map() {}\n\nMap.prototype = map.prototype = {\n  constructor: Map,\n  has: function(key) {\n    return (prefix + key) in this;\n  },\n  get: function(key) {\n    return this[prefix + key];\n  },\n  set: function(key, value) {\n    this[prefix + key] = value;\n    return this;\n  },\n  remove: function(key) {\n    var property = prefix + key;\n    return property in this && delete this[property];\n  },\n  clear: function() {\n    for (var property in this) if (property[0] === prefix) delete this[property];\n  },\n  keys: function() {\n    var keys = [];\n    for (var property in this) if (property[0] === prefix) keys.push(property.slice(1));\n    return keys;\n  },\n  values: function() {\n    var values = [];\n    for (var property in this) if (property[0] === prefix) values.push(this[property]);\n    return values;\n  },\n  entries: function() {\n    var entries = [];\n    for (var property in this) if (property[0] === prefix) entries.push({key: property.slice(1), value: this[property]});\n    return entries;\n  },\n  size: function() {\n    var size = 0;\n    for (var property in this) if (property[0] === prefix) ++size;\n    return size;\n  },\n  empty: function() {\n    for (var property in this) if (property[0] === prefix) return false;\n    return true;\n  },\n  each: function(f) {\n    for (var property in this) if (property[0] === prefix) f(this[property], property.slice(1), this);\n  }\n};\n\nfunction map(object, f) {\n  var map = new Map;\n\n  // Copy constructor.\n  if (object instanceof Map) object.each(function(value, key) { map.set(key, value); });\n\n  // Index array by numeric index or specified key function.\n  else if (Array.isArray(object)) {\n    var i = -1,\n        n = object.length,\n        o;\n\n    if (f == null) while (++i < n) map.set(i, object[i]);\n    else while (++i < n) map.set(f(o = object[i], i, object), o);\n  }\n\n  // Convert object to map.\n  else if (object) for (var key in object) map.set(key, object[key]);\n\n  return map;\n}\n\nexport default map;\n","import {default as map, prefix} from \"./map\";\n\nfunction Set() {}\n\nvar proto = map.prototype;\n\nSet.prototype = set.prototype = {\n  constructor: Set,\n  has: proto.has,\n  add: function(value) {\n    value += \"\";\n    this[prefix + value] = value;\n    return this;\n  },\n  remove: proto.remove,\n  clear: proto.clear,\n  values: proto.keys,\n  size: proto.size,\n  empty: proto.empty,\n  each: proto.each\n};\n\nfunction set(object, f) {\n  var set = new Set;\n\n  // Copy constructor.\n  if (object instanceof Set) object.each(function(value) { set.add(value); });\n\n  // Otherwise, assume it’s an array.\n  else if (object) {\n    var i = -1, n = object.length;\n    if (f == null) while (++i < n) set.add(object[i]);\n    else while (++i < n) set.add(f(object[i], i, object));\n  }\n\n  return set;\n}\n\nexport default set;\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import constant from \"./constant.js\";\n\nfunction linear(a, d) {\n  return function(t) {\n    return a + t * d;\n  };\n}\n\nfunction exponential(a, b, y) {\n  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {\n    return Math.pow(a + t * b, y);\n  };\n}\n\nexport function hue(a, b) {\n  var d = b - a;\n  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);\n}\n\nexport function gamma(y) {\n  return (y = +y) === 1 ? nogamma : function(a, b) {\n    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);\n  };\n}\n\nexport default function nogamma(a, b) {\n  var d = b - a;\n  return d ? linear(a, d) : constant(isNaN(a) ? b : a);\n}\n","import {rgb as colorRgb} from \"d3-color\";\nimport basis from \"./basis.js\";\nimport basisClosed from \"./basisClosed.js\";\nimport nogamma, {gamma} from \"./color.js\";\n\nexport default (function rgbGamma(y) {\n  var color = gamma(y);\n\n  function rgb(start, end) {\n    var r = color((start = colorRgb(start)).r, (end = colorRgb(end)).r),\n        g = color(start.g, end.g),\n        b = color(start.b, end.b),\n        opacity = nogamma(start.opacity, end.opacity);\n    return function(t) {\n      start.r = r(t);\n      start.g = g(t);\n      start.b = b(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n\n  rgb.gamma = rgbGamma;\n\n  return rgb;\n})(1);\n\nfunction rgbSpline(spline) {\n  return function(colors) {\n    var n = colors.length,\n        r = new Array(n),\n        g = new Array(n),\n        b = new Array(n),\n        i, color;\n    for (i = 0; i < n; ++i) {\n      color = colorRgb(colors[i]);\n      r[i] = color.r || 0;\n      g[i] = color.g || 0;\n      b[i] = color.b || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    color.opacity = 1;\n    return function(t) {\n      color.r = r(t);\n      color.g = g(t);\n      color.b = b(t);\n      return color + \"\";\n    };\n  };\n}\n\nexport var rgbBasis = rgbSpline(basis);\nexport var rgbBasisClosed = rgbSpline(basisClosed);\n","export function basis(t1, v0, v1, v2, v3) {\n  var t2 = t1 * t1, t3 = t2 * t1;\n  return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n      + (4 - 6 * t2 + 3 * t3) * v1\n      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n      + t3 * v3) / 6;\n}\n\nexport default function(values) {\n  var n = values.length - 1;\n  return function(t) {\n    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),\n        v1 = values[i],\n        v2 = values[i + 1],\n        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,\n        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return basis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n","export default function(a, b) {\n  if (!b) b = [];\n  var n = a ? Math.min(b.length, a.length) : 0,\n      c = b.slice(),\n      i;\n  return function(t) {\n    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;\n    return c;\n  };\n}\n\nexport function isNumberArray(x) {\n  return ArrayBuffer.isView(x) && !(x instanceof DataView);\n}\n","import value from \"./value.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  return (isNumberArray(b) ? numberArray : genericArray)(a, b);\n}\n\nexport function genericArray(a, b) {\n  var nb = b ? b.length : 0,\n      na = a ? Math.min(nb, a.length) : 0,\n      x = new Array(na),\n      c = new Array(nb),\n      i;\n\n  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);\n  for (; i < nb; ++i) c[i] = b[i];\n\n  return function(t) {\n    for (i = 0; i < na; ++i) c[i] = x[i](t);\n    return c;\n  };\n}\n","export default function(a, b) {\n  var d = new Date;\n  return a = +a, b = +b, function(t) {\n    return d.setTime(a * (1 - t) + b * t), d;\n  };\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return a * (1 - t) + b * t;\n  };\n}\n","import value from \"./value.js\";\n\nexport default function(a, b) {\n  var i = {},\n      c = {},\n      k;\n\n  if (a === null || typeof a !== \"object\") a = {};\n  if (b === null || typeof b !== \"object\") b = {};\n\n  for (k in b) {\n    if (k in a) {\n      i[k] = value(a[k], b[k]);\n    } else {\n      c[k] = b[k];\n    }\n  }\n\n  return function(t) {\n    for (k in i) c[k] = i[k](t);\n    return c;\n  };\n}\n","import number from \"./number.js\";\n\nvar reA = /[-+]?(?:\\d+\\.?\\d*|\\.?\\d+)(?:[eE][-+]?\\d+)?/g,\n    reB = new RegExp(reA.source, \"g\");\n\nfunction zero(b) {\n  return function() {\n    return b;\n  };\n}\n\nfunction one(b) {\n  return function(t) {\n    return b(t) + \"\";\n  };\n}\n\nexport default function(a, b) {\n  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b\n      am, // current match in a\n      bm, // current match in b\n      bs, // string preceding current number in b, if any\n      i = -1, // index in s\n      s = [], // string constants and placeholders\n      q = []; // number interpolators\n\n  // Coerce inputs to strings.\n  a = a + \"\", b = b + \"\";\n\n  // Interpolate pairs of numbers in a & b.\n  while ((am = reA.exec(a))\n      && (bm = reB.exec(b))) {\n    if ((bs = bm.index) > bi) { // a string precedes the next number in b\n      bs = b.slice(bi, bs);\n      if (s[i]) s[i] += bs; // coalesce with previous string\n      else s[++i] = bs;\n    }\n    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match\n      if (s[i]) s[i] += bm; // coalesce with previous string\n      else s[++i] = bm;\n    } else { // interpolate non-matching numbers\n      s[++i] = null;\n      q.push({i: i, x: number(am, bm)});\n    }\n    bi = reB.lastIndex;\n  }\n\n  // Add remains of b.\n  if (bi < b.length) {\n    bs = b.slice(bi);\n    if (s[i]) s[i] += bs; // coalesce with previous string\n    else s[++i] = bs;\n  }\n\n  // Special optimization for only a single match.\n  // Otherwise, interpolate each of the numbers and rejoin the string.\n  return s.length < 2 ? (q[0]\n      ? one(q[0].x)\n      : zero(b))\n      : (b = q.length, function(t) {\n          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);\n          return s.join(\"\");\n        });\n}\n","import {color} from \"d3-color\";\nimport rgb from \"./rgb.js\";\nimport {genericArray} from \"./array.js\";\nimport date from \"./date.js\";\nimport number from \"./number.js\";\nimport object from \"./object.js\";\nimport string from \"./string.js\";\nimport constant from \"./constant.js\";\nimport numberArray, {isNumberArray} from \"./numberArray.js\";\n\nexport default function(a, b) {\n  var t = typeof b, c;\n  return b == null || t === \"boolean\" ? constant(b)\n      : (t === \"number\" ? number\n      : t === \"string\" ? ((c = color(b)) ? (b = c, rgb) : string)\n      : b instanceof color ? rgb\n      : b instanceof Date ? date\n      : isNumberArray(b) ? numberArray\n      : Array.isArray(b) ? genericArray\n      : typeof b.valueOf !== \"function\" && typeof b.toString !== \"function\" || isNaN(b) ? object\n      : number)(a, b);\n}\n","export default function(a, b) {\n  return a = +a, b = +b, function(t) {\n    return Math.round(a * (1 - t) + b * t);\n  };\n}\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar cssNode,\n    cssRoot,\n    cssView,\n    svgNode;\n\nexport function parseCss(value) {\n  if (value === \"none\") return identity;\n  if (!cssNode) cssNode = document.createElement(\"DIV\"), cssRoot = document.documentElement, cssView = document.defaultView;\n  cssNode.style.transform = value;\n  value = cssView.getComputedStyle(cssRoot.appendChild(cssNode), null).getPropertyValue(\"transform\");\n  cssRoot.removeChild(cssNode);\n  value = value.slice(7, -1).split(\",\");\n  return decompose(+value[0], +value[1], +value[2], +value[3], +value[4], +value[5]);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","import {hsl as colorHsl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hsl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHsl(start)).h, (end = colorHsl(end)).h),\n        s = color(start.s, end.s),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.s = s(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hsl(hue);\nexport var hslLong = hsl(color);\n","import {lab as colorLab} from \"d3-color\";\nimport color from \"./color.js\";\n\nexport default function lab(start, end) {\n  var l = color((start = colorLab(start)).l, (end = colorLab(end)).l),\n      a = color(start.a, end.a),\n      b = color(start.b, end.b),\n      opacity = color(start.opacity, end.opacity);\n  return function(t) {\n    start.l = l(t);\n    start.a = a(t);\n    start.b = b(t);\n    start.opacity = opacity(t);\n    return start + \"\";\n  };\n}\n","import {hcl as colorHcl} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction hcl(hue) {\n  return function(start, end) {\n    var h = hue((start = colorHcl(start)).h, (end = colorHcl(end)).h),\n        c = color(start.c, end.c),\n        l = color(start.l, end.l),\n        opacity = color(start.opacity, end.opacity);\n    return function(t) {\n      start.h = h(t);\n      start.c = c(t);\n      start.l = l(t);\n      start.opacity = opacity(t);\n      return start + \"\";\n    };\n  }\n}\n\nexport default hcl(hue);\nexport var hclLong = hcl(color);\n","import {cubehelix as colorCubehelix} from \"d3-color\";\nimport color, {hue} from \"./color.js\";\n\nfunction cubehelix(hue) {\n  return (function cubehelixGamma(y) {\n    y = +y;\n\n    function cubehelix(start, end) {\n      var h = hue((start = colorCubehelix(start)).h, (end = colorCubehelix(end)).h),\n          s = color(start.s, end.s),\n          l = color(start.l, end.l),\n          opacity = color(start.opacity, end.opacity);\n      return function(t) {\n        start.h = h(t);\n        start.s = s(t);\n        start.l = l(Math.pow(t, y));\n        start.opacity = opacity(t);\n        return start + \"\";\n      };\n    }\n\n    cubehelix.gamma = cubehelixGamma;\n\n    return cubehelix;\n  })(1);\n}\n\nexport default cubehelix(hue);\nexport var cubehelixLong = cubehelix(color);\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","export var durationSecond = 1e3;\nexport var durationMinute = 6e4;\nexport var durationHour = 36e5;\nexport var durationDay = 864e5;\nexport var durationWeek = 6048e5;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(function(date) {\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setDate(date.getDate() + step);\n}, function(start, end) {\n  return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay;\n}, function(date) {\n  return date.getDate() - 1;\n});\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup[n[0].toLowerCase()], i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  var map = {}, i = -1, n = names.length;\n  while (++i < n) map[names[i].toLowerCase()] = i;\n  return map;\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import { select } from \"d3-selection\";\n\nexport var font_size, font_color, font_family, font_weight, default_text_size = 1;\n\nvar DEFAULTS = Object.freeze({\n\talignment: \"start\",\n\torientation: \"horizontal\",\n\ttext_color: null,\n\ttitle_weight: \"bold\",\n\ttext_weight: \"normal\",\n\ttext_size: default_text_size\n});\n\nfunction legendContainer(state_) {\n\tthis._state = state_;\n\tfor (var key in DEFAULTS) { if (this._state[key] === undefined) this._state[key] = DEFAULTS[key]; }\n\n\treturn this;\n}\n\nlegendContainer.prototype.appendTo = function (container_) {\n\tthis._container = select(container_).append(\"div\").node();\n\treturn this;\n};\n\nlegendContainer.prototype.add = function (legends) {\n\tthis._legends = Array.isArray(legends) ? legends : [legends];\n\tvar self = this;\n\n\tthis._legends.forEach(function(legend) {\n\t\tif (legend && typeof legend.appendTo == \"function\") legend.appendTo(self._container);\n\t\telse console.warn(\"Please pass in valid legend instances into .add()\");\n\t});\n\n\treturn this;\n};\n\nlegendContainer.prototype.update = function () {\n\t// Initialize some main style elements that can be imported by the individual legend containers\n\tvar template = window.template || undefined;\n\tvar layout = template ? template.state.layout : undefined;\n\tfont_color = this._state.text_color || (template && layout && layout.font_color) || \"#333333\";\n\tfont_family = layout ? layout.body_font.name : window.getComputedStyle(document.body).fontFamily;\n\tfont_size = this._state.text_size;\n\tfont_weight = this._state.text_weight;\n\n\tthis._legends.forEach(function(legend) {\n\t\tif (legend && typeof legend.update == \"function\") legend.update();\n\t});\n\n\tvar is_horizontal = this._state.orientation === \"horizontal\";\n\tvar alignment = this._state.alignment;\n\tvar flex_alignment = alignment == \"center\" ? alignment : \"flex-\" + alignment;\n\n\t// ================== //\n\t// MAIN LEGEND STYLES //\n\t// ================== //\n\n\t// Styles for main legend wrapper container\n\tselect(this._container)\n\t\t.style(\"justify-content\", is_horizontal ? flex_alignment: null)\n\t\t.style(\"align-items\", is_horizontal ? null : flex_alignment)\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"flex-direction\", is_horizontal ? \"row\": \"column\");\n\n\tvar individual_legend_containers = select(this._container)\n\t\t.selectAll(\".fl-legend-container\");\n\n\t// This next section deals with the padding around the legends\n\tindividual_legend_containers\n\t\t.style(\"padding-inline-end\", function () {\n\t\t\tif (!is_horizontal) return 0;\n\t\t\treturn \"0.5rem\";\n\t\t})\n\t\t.style(\"padding-bottom\", function() {\n\t\t\tif (is_horizontal) return 0;\n\t\t\treturn \"0.25rem\";\n\t\t})\n\t\t.style(\"justify-content\", flex_alignment);\n\n\t// Styles for the titles of each legend\n\tselect(this._container)\n\t\t.selectAll(\".fl-legend-title\")\n\t\t.style(\"color\", this._state.text_color)\n\t\t.style(\"font-weight\", this._state.title_weight)\n\t\t.style(\"font-size\", font_size + \"rem\")\n\t\t.style(\"margin-right\", font_size * 0.25 + \"rem\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.style(\"margin-top\", 0)\n\t\t.style(\"margin-bottom\", 0)\n\t\t.style(\"text-align\", alignment);\n\n\n\t// ============================ //\n\t// DISCRETE COLOR LEGEND STYLES //\n\t// ============================ //\n\n\t// Styles for discrete color legend items\n\tselect(this._container).selectAll(\".fl-legend-item\")\n\t\t.style(\"display\", \"inline-flex\")\n\t\t.style(\"text-align\", alignment);\n\n\t// Styles discrete color legend labels\n\tselect(this._container)\n\t\t.selectAll(\".fl-legend-label\")\n\t\t.style(\"color\", this._state.text_color)\n\t\t.style(\"font-weight\", this._state.text_weight)\n\t\t.style(\"font-size\", font_size + \"rem\");\n\n\t// ===================================== //\n\t// CONTINUOUS SIZE & COLOR LEGEND STYLES //\n\t// ===================================== //\n\n\t// Styles for continuous size and color legend labels\n\tselect(this._container)\n\t\t.selectAll(\".label\")\n\t\t.style(\"color\", this._state.text_color)\n\t\t.style(\"font-weight\", this._state.text_weight)\n\t\t.style(\"font-size\", font_size + \"rem\");\n\n\treturn this;\n};\n\nexport default legendContainer;\n","import { select } from \"d3-selection\";\nimport { scaleLinear } from \"d3-scale\";\nimport { appendTo, format, getContainer, visible, autoTitle, _updateTitle, getDomain, small_gap } from \"../common\";\nimport { remToPx } from \"../utils\";\nimport { font_color, font_family, font_size, font_weight } from \"../container\";\n\nvar legend_count = 0;\nvar pixel_ratio = window.devicePixelRatio || 1;\nvar DEFAULTS = Object.freeze({\n\tshow_legend: true,\n\n\ttitle_mode: \"auto\",\n\ttitle: \"\",\n\n\tcolor_band_width: 8,\n\tcolor_band_height: 1,\n\tcolor_band_radius: 3,\n\n\tbinned_label_mode: \"thresholds\",\n\tbinned_label_custom: \"\",\n\n\tlegend_min: null,\n\tlegend_max: null,\n\n});\n\nfunction ContinuousColorLegend(state_) {\n\tthis._state = state_;\n\tfor (var key in DEFAULTS) {\tif (this._state[key] === undefined) this._state[key] = DEFAULTS[key]; }\n\n\tthis._colorFunction = undefined;\n\tthis._formatFunction = undefined;\n\tthis._legend_domain = [];\n\tthis._id = \"fl-legend-continuous-color-\" + legend_count;\n\tthis._visible = true;\n\tthis._marker_value = null;\n\tthis._auto_title = \"\";\n\n\tthis._container = select(document.createElement(\"div\")).attr(\"class\", \"fl-legend-container\").attr(\"id\", this._id).style(\"display\", \"none\");\n\tthis._container.append(\"p\").classed(\"fl-legend-title\", true);\n\tthis._container.append(\"div\").classed(\"min label\", true);\n\tthis._container.append(\"div\").classed(\"color-range-container\", true);\n\tthis._container.select(\".color-range-container\").append(\"canvas\").classed(\"color-range\", true);\n\tthis._container.select(\".color-range-container\").append(\"canvas\").classed(\"color-range-labels\", true);\n\tthis._container.append(\"div\").classed(\"max label\", true);\n\n\tlegend_count++;\n\n\treturn this;\n}\n\n// Common methods\nContinuousColorLegend.prototype.appendTo = appendTo;\nContinuousColorLegend.prototype.format = format;\nContinuousColorLegend.prototype.getContainer = getContainer;\nContinuousColorLegend.prototype.visible = visible;\nContinuousColorLegend.prototype.autoTitle = autoTitle;\nContinuousColorLegend.prototype._updateTitle = _updateTitle;\n\nContinuousColorLegend.prototype.data = function(items_, colorFunction_) {\n\t// items_ must be a 2-element or 3-element domain array [minValue, midValue, maxValue]\n\t// colorFunction_ must be a scale function with color range\n\tif (!items_ && !colorFunction_) return this._legend_domain.slice();\n\n\tvar items = Array.isArray(items_) ? items_.slice() : [];\n\n\tthis._legend_domain = getDomain(items, this._state);\n\tthis._colorFunction = colorFunction_;\n\n\treturn this;\n};\n\nContinuousColorLegend.prototype.markerValue = function(value) {\n\tif (value === undefined) return this._marker_value;\n\tthis._marker_value = value;\n\treturn this;\n};\n\nContinuousColorLegend.prototype.update = function() {\n\tvar should_display = this._state.show_legend && this._visible && this._legend_domain.length > 0;\n\n\tthis._container.style(\"display\", should_display ? \"\" : \"none\");\n\n\tif (!should_display) return this;\n\n\tthis._updateTitle();\n\tthis._updateLegend();\n\n\treturn this;\n};\n\nContinuousColorLegend.prototype._updateLegend = function() {\n\tvar domain = this._legend_domain;\n\n\tthis._scale_type = \"continuous\";\n\tif (this._colorFunction.thresholds) this._scale_type = \"binned\";\n\telse if (domain.length > 2) this._scale_type = \"diverging\";\n\n\tvar s = this._state;\n\n\tvar w = remToPx(s.color_band_width);\n\tvar h = remToPx(s.color_band_height);\n\tvar label_w = w;\n\n\tthis._container.style(\"display\", \"inline-flex\")\n\t\t.style(\"align-items\", \"center\");\n\n\tthis._container.select(\".color-range-container\")\n\t\t.style(\"display\", \"inline-block\");\n\n\tvar canvas = this._container\n\t\t.select(\".color-range\")\n\t\t.attr(\"width\", w * pixel_ratio)\n\t\t.attr(\"height\", h * pixel_ratio)\n\t\t.style(\"border-radius\", s.color_band_radius + \"px\")\n\t\t.style(\"width\", w + \"px\")\n\t\t.style(\"height\", h + \"px\")\n\t\t.style(\"display\", \"block\");\n\n\tthis._container\n\t\t.select(\".color-range-labels\")\n\t\t.attr(\"width\", label_w * pixel_ratio)\n\t\t.style(\"width\", label_w + \"px\")\n\t\t.style(\"display\", this._scale_type == \"continuous\" ? \"none\" : \"block\")\n\t\t.node().getContext(\"2d\").scale(pixel_ratio, pixel_ratio);\n\n\t// Update canvas\n\tvar ctx = canvas.node().getContext(\"2d\");\n\tctx.scale(pixel_ratio, pixel_ratio);\n\n\tfunction xToVal(x) {\n\t\treturn domain.min + (x / w) * (domain.max - domain.min);\n\t}\n\n\tfor (var x = 0; x < w; x++) {\n\t\tvar color = this._colorFunction(xToVal(x));\n\t\tctx.fillStyle = color;\n\t\tctx.strokeStyle = color;\n\t\tctx.fillRect(x, 0, 1, h);\n\t\tctx.strokeRect(x, 0, 1, h);\n\t}\n\n\tif (this._marker_value !== null) {\n\t\tvar xScale = scaleLinear().domain([domain.min, domain.max]).range([0, w]);\n\t\tvar x_marker = xScale(this.markerValue());\n\t\tvar y_top = 0;\n\t\tvar y_bottom = h;\n\t\tctx.save();\n\t\tctx.strokeStyle = \"#FFFFFF\";\n\t\tctx.lineWidth = 3;\n\t\tctx.beginPath();\n\t\tctx.moveTo(x_marker, y_top);\n\t\tctx.lineTo(x_marker, y_bottom);\n\t\tctx.stroke();\n\t\tctx.strokeStyle = \"#000000\";\n\t\tctx.lineWidth = 1;\n\t\tctx.beginPath();\n\t\tctx.moveTo(x_marker, y_top);\n\t\tctx.lineTo(x_marker, y_bottom);\n\t\tctx.stroke();\n\t\tctx.restore();\n\t}\n\n\tthis._updateLegendLabels();\n};\n\nContinuousColorLegend.prototype._updateLegendLabels = function () {\n\tvar label_canvas = this._container.select(\".color-range-labels\");\n\tvar format = this._formatFunction;\n\tvar domain = this._legend_domain;\n\tvar s = this._state;\n\n\tthis._container\n\t\t.select(\".min.label\")\n\t\t.style(\"display\", this._scale_type == \"continuous\" ? \"inline-block\" : \"none\")\n\t\t.style(\"vertical-align\", \"middle\")\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.text(function () {\n\t\t\treturn format ? format(domain.min) : domain.min;\n\t\t})\n\t\t.style(\"padding-inline-start\", 0)\n\t\t.style(\"padding-inline-end\", small_gap);\n\n\tthis._container\n\t\t.select(\".max.label\")\n\t\t.style(\"display\", this._scale_type == \"continuous\" ? \"inline-block\" : \"none\")\n\t\t.style(\"vertical-align\", \"middle\")\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.text(function () {\n\t\t\treturn format ? format(domain.max) : domain.max;\n\t\t})\n\t\t.style(\"padding-inline-start\", small_gap)\n\t\t.style(\"padding-inline-end\", 0);\n\n\tvar labels = [];\n\tvar label_padding_start = 0;\n\tvar label_padding_end = 0;\n\tif (this._scale_type === \"diverging\") labels = this._getDivergingLabels();\n\telse if (this._scale_type === \"binned\") labels = this._getBinnedLabels();\n\n\tif (labels.length) {\n\t\tvar ctx = label_canvas.node().getContext(\"2d\");\n\t\tctx.textAlign = \"center\";\n\t\tctx.textBaseline = \"top\";\n\t\tctx.font = font_weight + \" \" + remToPx(font_size) + \"px \" + font_family;\n\n\t\tvar prepLabel = (function () {\n\t\t\tvar placed_labels = [];\n\t\t\tvar band_width = remToPx(s.color_band_width);\n\t\t\tvar inRange = getInRangeFunction([0, band_width]);\n\t\t\tvar scale = scaleLinear().domain([domain.min, domain.max]).range([0, band_width]);\n\n\t\t\treturn function (value) {\n\t\t\t\tvar center = scale(value);\n\n\t\t\t\tif (!inRange(center)) return;\n\n\t\t\t\tvar text = format ? format(value) : value;\n\t\t\t\tvar half_width = (ctx.measureText(text).width / 2) + 1;\n\t\t\t\tvar left = center - half_width;\n\t\t\t\tvar right = center + half_width;\n\n\t\t\t\tvar index = 0;\n\t\t\t\tvar n = placed_labels.length;\n\n\t\t\t\tfor (var i = 0; i < n; i++) {\n\t\t\t\t\tif (center > placed_labels[i].center) index++;\n\t\t\t\t\telse break;\n\t\t\t\t}\n\n\t\t\t\tvar at_start = index === 0;\n\t\t\t\tvar at_end = index === n;\n\t\t\t\tif (!at_start && placed_labels[index - 1].right > left) return;\n\t\t\t\tif (!at_end && placed_labels[index].left < right) return;\n\t\t\t\tif (at_start) label_padding_start = Math.abs(Math.min(0, left));\n\t\t\t\tif (at_end) label_padding_end = Math.max(0, right - band_width);\n\n\t\t\t\tplaced_labels.splice(index, 0, { left: left, center: center, right: right });\n\t\t\t\treturn { text: text, position: center };\n\t\t\t};\n\t\t})();\n\n\t\tvar prepped_labels = labels.map(function (value) {\n\t\t\treturn prepLabel(value);\n\t\t});\n\n\t\tvar label_canvas_width = remToPx(s.color_band_width) + label_padding_start + label_padding_end;\n\t\tvar label_h = Math.ceil(remToPx(font_size) * 0.95);\n\t\tvar pixel_ratio = window.devicePixelRatio || 1;\n\n\t\tlabel_canvas\n\t\t\t.attr(\"width\", label_canvas_width * pixel_ratio)\n\t\t\t.style(\"width\", label_canvas_width + \"px\")\n\t\t\t.attr(\"height\", label_h * pixel_ratio)\n\t\t\t.style(\"height\", label_h + \"px\")\n\t\t\t.style(\"margin-top\", small_gap);\n\n\t\tselect(\".color-range\").style(\"margin-left\", label_padding_start + \"px\");\n\n\t\tctx.scale(pixel_ratio, pixel_ratio);\n\t\tctx.textAlign = \"center\";\n\t\tctx.textBaseline = \"top\";\n\t\tctx.font = font_weight + \" \" + remToPx(font_size) + \"px \" + font_family;\n\t\tctx.fillStyle = font_color;\n\n\t\tprepped_labels.forEach(function(label) {\n\t\t\tif (label) ctx.fillText(label.text, label.position + label_padding_start, 0);\n\t\t});\n\t}\n};\n\nContinuousColorLegend.prototype._getDivergingLabels = function() {\n\tvar domain = this._legend_domain;\n\tvar inRange = getInRangeFunction(domain);\n\tvar labels = [];\n\n\tif (inRange(domain.min)) labels.push(domain.min);\n\tif (inRange(domain.mid)) labels.push(domain.mid);\n\tif (inRange(domain.max)) labels.push(domain.max);\n\n\treturn labels;\n};\n\nContinuousColorLegend.prototype._getBinnedLabels = function () {\n\tvar s = this._state;\n\tvar domain = this._legend_domain;\n\tvar inRange = getInRangeFunction(domain);\n\tvar labels;\n\n\tif (s.binned_label_mode === \"thresholds\") {\n\t\tlabels = this._colorFunction.thresholds.slice().filter(inRange);\n\t\tif (domain.min < labels[0]) labels.unshift(domain.min);\n\t\tif (domain.max > labels[labels.length - domain.length - 1]) labels.unshift(domain.max);\n\t}\n\telse if (s.binned_label_mode === \"centers\") {\n\t\tlabels = this._colorFunction.centers.slice().filter(inRange);\n\t\tif (labels.length) {\n\t\t\tvar thresholds = this._colorFunction.thresholds;\n\t\t\tvar first_threshold = thresholds[0];\n\t\t\tvar last_threshold = thresholds[thresholds.length - 1];\n\t\t\tif (first_threshold > domain.min) labels.unshift((domain.min + first_threshold) / 2);\n\t\t\tif (last_threshold < domain.max) labels.unshift((last_threshold + domain.max) / 2);\n\t\t}\n\t\telse labels.push((domain.min + domain.max) / 2);\n\t}\n\telse labels = s.binned_label_custom.split(\";\").map(parseFloat);\n\n\treturn labels;\n};\n\nfunction getInRangeFunction(range) {\n\tvar legend_max = -Infinity;\n\tvar legend_min = Infinity;\n\tfor (var i in range) {\n\t\tlegend_max = Math.max(legend_max, range[i]);\n\t\tlegend_min = Math.min(legend_min, range[i]);\n\t}\n\treturn function (val) { return val >= legend_min && val <= legend_max; };\n}\n\nexport default ContinuousColorLegend;\n","import { select } from \"d3-selection\";\nimport { appendTo, format, getContainer, visible, autoTitle, _updateTitle, small_gap } from \"../common\";\nimport { remToPx, roundDown } from \"../utils\";\n\nvar legend_count = 0;\nvar DEFAULTS = Object.freeze({\n\tshow_legend: true,\n\n\ttitle_mode: \"auto\",\n\ttitle: \"\",\n\n\tclip_height: 1,\n\tsmall_circle_size: 0.5,\n\n\tshape_fill: \"#eeeeee\",\n\tshape_stroke: \"#555555\",\n\n});\n\nfunction ContinuousSizeLegend(state_) {\n\tthis._state = state_;\n\tfor (var key in DEFAULTS) {\tif (this._state[key] === undefined) this._state[key] = DEFAULTS[key]; }\n\n\tthis._scaleFunction = undefined;\n\tthis._formatFunction = undefined;\n\tthis._id = \"fl-legend-continuous-size-\" + legend_count;\n\tthis._visible = true;\n\tthis._auto_title = \"\";\n\n\tthis._container = select(document.createElement(\"div\"))\n\t\t.attr(\"class\", \"fl-legend-container\")\n\t\t.attr(\"id\", this._id)\n\t\t.style(\"display\", \"none\")\n\t\t.style(\"align-items\", \"center\");\n\n\tthis._container.append(\"p\")\n\t\t.attr(\"class\", \"fl-legend-title\");\n\n\tthis._container.append(\"div\")\n\t\t.classed(\"min label\", true);\n\n\tvar circles_container = this._container.append(\"div\")\n\t\t.classed(\"circles\", true);\n\n\tcircles_container.append(\"canvas\")\n\t\t.classed(\"min circle\", true);\n\n\tcircles_container.append(\"canvas\")\n\t\t.classed(\"max circle\", true);\n\n\tthis._container.append(\"div\")\n\t\t.classed(\"max label\", true);\n\n\tlegend_count++;\n\n\treturn this;\n}\n\n// Common methods\nContinuousSizeLegend.prototype.appendTo = appendTo;\nContinuousSizeLegend.prototype.format = format;\nContinuousSizeLegend.prototype.autoTitle = autoTitle;\nContinuousSizeLegend.prototype._updateTitle = _updateTitle;\nContinuousSizeLegend.prototype.getContainer = getContainer;\nContinuousSizeLegend.prototype.visible = visible;\n\n\nContinuousSizeLegend.prototype.scale = function(scaleFunction_) {\n\t// scaleFunction_ must be a scale function with size (radius) range\n\t// domain and range are assumed to be [0, max] where max is a number > 0\n\tif (scaleFunction_ === undefined) return this._scaleFunction;\n\n\tthis._scaleFunction = scaleFunction_;\n\n\treturn this;\n};\n\nContinuousSizeLegend.prototype.update = function() {\n\tvar should_display = this._state.show_legend && this._visible;\n\n\tvar h = Math.ceil(remToPx(this._state.clip_height));\n\tthis._container\n\t\t.style(\"display\", should_display ? \"inline-flex\" : \"none\")\n\t\t.style(\"align-items\", \"center\")\n\t\t.style(\"min-height\", h + \"px\");\n\n\tif (!should_display || !this._scaleFunction) return this;\n\n\tif (this._scaleFunction.domain()[0] !== 0) {\n\t\tconsole.warn(\"Non zero domain[0] in ContinuousSizeLegend\");\n\t}\n\n\tif (this._scaleFunction.range()[0] !== 0) {\n\t\tconsole.warn(\"Non zero range[0] in ContinuousSizeLegend\");\n\t}\n\n\tthis._updateTitle();\n\tthis._updateLegend();\n\n\treturn this;\n};\n\nContinuousSizeLegend.prototype._updateLegend = function() {\n\tvar domain = this._scaleFunction.domain();\n\tvar range = this._scaleFunction.range();\n\tvar format = this._formatFunction;\n\tvar s = this._state;\n\tvar h = remToPx(s.clip_height);\n\th = Math.ceil(Math.min(h, range[1] * 2));\n\tvar pixel_ratio = window.devicePixelRatio || 1;\n\n\tvar fill = s.shape_fill;\n\tvar stroke = s.shape_stroke;\n\n\tthis._container\n\t\t.style(\"min-height\", h + \"px\");\n\n\tthis._container.select(\".circles\")\n\t\t.style(\"display\", \"flex\")\n\t\t.style(\"flex-wrap\", \"nowrap\");\n\n\t// Calculate max circle size\n\tvar val_max_unrounded = this._scaleFunction.invert(h/2);\n\tval_max_unrounded = Math.min(val_max_unrounded, domain[1]);\n\tvar val_max = roundDown(val_max_unrounded) || 0;\n\n\t// Min circle\n\tvar val_min = val_max * s.small_circle_size;\n\tvar r_min = this._scaleFunction(val_min);\n\tvar w_min = Math.ceil(2 * r_min) + 2;\n\tvar canvas_min = this._container\n\t\t.select(\".min.circle\")\n\t\t.style(\"width\", w_min + \"px\")\n\t\t.style(\"height\", h + \"px\")\n\t\t.attr(\"width\", w_min * pixel_ratio)\n\t\t.attr(\"height\", h * pixel_ratio)\n\t\t.style(\"margin-right\", \"0.05rem\");\n\n\tthis._container\n\t\t.select(\".min.label\")\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.text(function () {\n\t\t\treturn format ? format(val_min) : val_min;\n\t\t})\n\t\t.style(\"padding-inline-start\", 0)\n\t\t.style(\"padding-inline-end\", small_gap);\n\n\tvar ctx_min = canvas_min.node().getContext(\"2d\");\n\tctx_min.scale(pixel_ratio, pixel_ratio);\n\tctx_min.fillStyle = fill;\n\tctx_min.clearRect(0, 0, 2 * r_min, 2 * r_min);\n\n\tctx_min.beginPath();\n\tctx_min.fillStyle = stroke;\n\tctx_min.arc(0.5 * w_min, 0.5 * h, r_min, 0, 2 * Math.PI);\n\tctx_min.fill();\n\n\tctx_min.beginPath();\n\tctx_min.fillStyle = fill;\n\tctx_min.arc(0.5 * w_min, 0.5 * h, Math.max(r_min - 1, 0), 0, 2 * Math.PI);\n\tctx_min.fill();\n\n\t// Max circle\n\tvar r_max = this._scaleFunction(val_max);\n\tvar w_max = Math.ceil(2 * r_max) + 2;\n\n\tvar canvas_max = this._container\n\t\t.select(\".max.circle\")\n\t\t.style(\"width\", w_max + \"px\")\n\t\t.style(\"height\", h + \"px\")\n\t\t.attr(\"width\", w_max * pixel_ratio)\n\t\t.attr(\"height\", h * pixel_ratio)\n\t\t.style(\"margin-left\", \"0.05rem\");\n\n\tthis._container\n\t\t.select(\".max.label\")\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"line-height\", \"1.25em\")\n\t\t.text(function () {\n\t\t\treturn format ? format(val_max) : val_max;\n\t\t})\n\t\t.style(\"padding-inline-start\", small_gap)\n\t\t.style(\"padding-inline-end\", 0);\n\n\tvar ctx_max = canvas_max.node().getContext(\"2d\");\n\tctx_max.scale(pixel_ratio, pixel_ratio);\n\tctx_max.clearRect(0, 0, 2 * r_max, 2 * r_max);\n\n\t// To ensure size of larger circle is accurate, draw two circles where the\n\t// outer (darker) one is the required size and the inside one slightly smaller\n\t// This gives the impression of a circle with darker stroke\n\tctx_max.beginPath();\n\tctx_max.fillStyle = stroke;\n\tctx_max.arc(0.5 * w_max, 0.5 * h, r_max, 0, 2 * Math.PI);\n\tctx_max.fill();\n\n\tctx_max.beginPath();\n\tctx_max.fillStyle = fill;\n\tctx_max.arc(0.5 * w_max, 0.5 * h, Math.max(r_max - 1, 0), 0, 2 * Math.PI);\n\tctx_max.fill();\n};\n\nexport default ContinuousSizeLegend;\n","import initLayout from \"@flourish/layout\";\nimport state from \"./core/state\";\nimport { createLegendContainer, createDiscreteColorLegend, createContinuousColorLegend, createContinuousSizeLegend } from \"@flourish/legend\";\n\n\nvar layout = initLayout(state.layout);\nconst legend_container = createLegendContainer(state.legend_container);\nconst legend_categorical = createDiscreteColorLegend(state.legend_categorical);\nlegend_container\n\t.appendTo(layout.getSection(\"legend\"))\n\t.add([\n\t\tlegend_categorical,\n\t]);\nlegend_container.update()\n\n\n\nexport { layout, legend_container, legend_categorical};\n","import DiscreteColorLegend from \"./discrete-color\";\nimport ContinuousColorLegend from \"./continuous-color\";\nimport ContinuousSizeLegend from \"./continuous-size\";\nimport legendContainer from \"./container\";\n\nfunction createLegendContainer(state) {\n\treturn new legendContainer(state);\n}\n\nfunction createDiscreteColorLegend(state) {\n\treturn new DiscreteColorLegend(state);\n}\n\nfunction createContinuousColorLegend(state) {\n\treturn new ContinuousColorLegend(state);\n}\n\nfunction createContinuousSizeLegend(state) {\n\treturn new ContinuousSizeLegend(state);\n}\n\nexport { createLegendContainer, createDiscreteColorLegend, createContinuousColorLegend, createContinuousSizeLegend };\n","\nconst data = {};\n//console.log(data);\n\n\nexport default data;\n\n\n","import { color } from \"d3-color\";\nimport { set as d3_set } from \"d3-collection\";\n\nvar getTextWidth = (function() {\n\tvar context = document.createElement(\"canvas\").getContext(\"2d\");\n\treturn function(text, font) {\n\t\tcontext.font = font || \"10px sans-serif\";\n\t\tvar metrics = context.measureText(text);\n\t\treturn metrics.width;\n\t};\n})();\n\nfunction isImage(string) {\n\tif (typeof string != \"string\") return false;\n\treturn string.match(/^(https?:\\/\\/.+\\.(jpg|jpeg|svg|png|gif|webp)$|data:image\\/)/i) != null;\n}\n\nfunction isUrl(string) {\n\tif (typeof string != \"string\") return false;\n\treturn string.match(/^(https?:\\/\\/|data:)/i) != null;\n}\n\nfunction hexToColor(hex_string, opacity) {\n\tif (typeof hex_string != \"string\") return false;\n\tvar c = color(hex_string);\n\tc.opacity = opacity !== undefined ? opacity : 1;\n\treturn c;\n}\n\nfunction hexToRgba(hex_string, opacity) {\n\tvar c = hexToColor(hex_string, opacity);\n\n\treturn c ? c.toString() : false;\n}\n\nfunction isPale(c) {\n\tif (!c) {\n\t\tconsole.warn(\"No valid color\", c);\n\t\treturn;\n\t}\n\tvar rgb = color(c);\n\t// https://stackoverflow.com/questions/11867545/change-text-color-based-on-brightness-of-the-covered-background-area\n\t// With adjusted threshold\n\treturn Math.round((rgb.r * 299) + (rgb.g * 587) + (rgb.b * 114)) / 1000 > 195;\n}\n\nfunction wrapStringToLines(text, font_styles, text_max_lines, max_width) {\n\tvar lines = [];\n\tvar max_line_width = 0;\n\n\t// TODO. Should this be just one canvas rather than one per label\n\tvar canvas = document.createElement(\"canvas\");\n\tvar ctx = canvas.getContext(\"2d\");\n\tctx.font = font_styles;\n\n\t//  if everything fits in one line, so leave as a single string\n\tvar text_width = ctx.measureText(text).width;\n\tif (text_width <= max_width) {\n\t\tlines.push(text);\n\t\tmax_line_width = text_width;\n\t}\n\n\t// Otherwise…\n\telse {\n\t\t// Create array of words\n\t\tvar words = text.trim().split(/\\s+/g);\n\t\t// Loop through the words, adding them until they won't fit\n\t\tvar current_line = \"\";\n\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\tvar word = words[i];\n\t\t\tvar string = current_line + (current_line ? \" \" : \"\") + word;\n\t\t\tvar string_width = ctx.measureText(string).width;\n\t\t\t// If the string including the next word fits, update the\n\t\t\t// current_line and the max_width\n\t\t\tif (string_width <= max_width) {\n\t\t\t\tcurrent_line = string;\n\t\t\t\tmax_line_width = Math.max(max_line_width, string_width);\n\t\t\t}\n\t\t\t// If we reach this point, the text has overflowed,\n\t\t\t// so should always result in a truncation or a new line\n\t\t\telse {\n\t\t\t\tvar last_line = lines.length + 1 == text_max_lines;\n\t\t\t\tif (!last_line && current_line) {\n\t\t\t\t\tlines.push(current_line);\n\t\t\t\t\tvar word_width = ctx.measureText(word).width;\n\t\t\t\t\tif (word_width <= max_width) {\n\t\t\t\t\t\tcurrent_line = word;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Truncate\n\t\t\t\tvar remove_counter = 1;\n\t\t\t\tvar truncated_string = string;\n\t\t\t\tdo {\n\t\t\t\t\ttruncated_string = string.substring(0, string.length - remove_counter) + \"…\";\n\t\t\t\t\tstring_width = ctx.measureText(truncated_string).width;\n\t\t\t\t}\n\t\t\t\twhile ((string_width > max_width) && (++remove_counter < string.length));\n\t\t\t\tmax_line_width = Math.max(max_line_width, string_width);\n\t\t\t\tcurrent_line = truncated_string;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tlines.push(current_line);\n\t}\n\tlines.widest_line = max_line_width;\n\treturn lines;\n}\n\n\nfunction getUniqueValuesFromBinding(data, binding, index) {\n\tif (data.column_names[binding] === undefined) return [];\n\n\tvar is_multi_col_binding = Array.isArray(data.column_names[binding]);\n\n\tvar value_set = d3_set(data, function(d) {\n\t\treturn is_multi_col_binding ? d[binding][index || 0] : d[binding];\n\t});\n\n\tvar value_array = [];\n\tvalue_set.each(function(d) { value_array.push(d); });\n\treturn value_array;\n}\n\nexport { getTextWidth, isImage, isPale, isUrl, hexToColor, hexToRgba, wrapStringToLines, getUniqueValuesFromBinding };\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return [min, max];\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","var noop = {value: function() {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend we’ve set an alarm, if we haven’t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(function(elapsed) {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  end: transition_end\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      return defaultTiming.time = now(), defaultTiming;\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","var pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction Path() {\n  this._x0 = this._y0 = // start of current subpath\n  this._x1 = this._y1 = null; // end of current subpath\n  this._ = \"\";\n}\n\nfunction path() {\n  return new Path;\n}\n\nPath.prototype = path.prototype = {\n  constructor: Path,\n  moveTo: function(x, y) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y);\n  },\n  closePath: function() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  },\n  lineTo: function(x, y) {\n    this._ += \"L\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  quadraticCurveTo: function(x1, y1, x, y) {\n    this._ += \"Q\" + (+x1) + \",\" + (+y1) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  bezierCurveTo: function(x1, y1, x2, y2, x, y) {\n    this._ += \"C\" + (+x1) + \",\" + (+y1) + \",\" + (+x2) + \",\" + (+y2) + \",\" + (this._x1 = +x) + \",\" + (this._y1 = +y);\n  },\n  arcTo: function(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n    var x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._ += \"M\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._ += \"L\" + (this._x1 = x1) + \",\" + (this._y1 = y1);\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      var x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._ += \"L\" + (x1 + t01 * x01) + \",\" + (y1 + t01 * y01);\n      }\n\n      this._ += \"A\" + r + \",\" + r + \",0,0,\" + (+(y01 * x20 > x01 * y20)) + \",\" + (this._x1 = x1 + t21 * x21) + \",\" + (this._y1 = y1 + t21 * y21);\n    }\n  },\n  arc: function(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n    var dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(\"negative radius: \" + r);\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._ += \"M\" + x0 + \",\" + y0;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._ += \"L\" + x0 + \",\" + y0;\n    }\n\n    // Is this arc empty? We’re done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (x - dx) + \",\" + (y - dy) + \"A\" + r + \",\" + r + \",0,1,\" + cw + \",\" + (this._x1 = x0) + \",\" + (this._y1 = y0);\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._ += \"A\" + r + \",\" + r + \",0,\" + (+(da >= pi)) + \",\" + cw + \",\" + (this._x1 = x + r * Math.cos(a1)) + \",\" + (this._y1 = y + r * Math.sin(a1));\n    }\n  },\n  rect: function(x, y, w, h) {\n    this._ += \"M\" + (this._x0 = this._x1 = +x) + \",\" + (this._y0 = this._y1 = +y) + \"h\" + (+w) + \"v\" + (+h) + \"h\" + (-w) + \"Z\";\n  },\n  toString: function() {\n    return this._;\n  }\n};\n\nexport default path;\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": formatDecimal,\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","export default function(specifier) {\n  var n = specifier.length / 6 | 0, colors = new Array(n), i = 0;\n  while (i < n) colors[i] = \"#\" + specifier.slice(i * 6, ++i * 6);\n  return colors;\n}\n","import {interpolateRgbBasis} from \"d3-interpolate\";\n\nexport default function(scheme) {\n  return interpolateRgbBasis(scheme[scheme.length - 1]);\n}\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"d8b365f5f5f55ab4ac\",\n  \"a6611adfc27d80cdc1018571\",\n  \"a6611adfc27df5f5f580cdc1018571\",\n  \"8c510ad8b365f6e8c3c7eae55ab4ac01665e\",\n  \"8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e\",\n  \"8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e\",\n  \"8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e\",\n  \"5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30\",\n  \"5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"af8dc3f7f7f77fbf7b\",\n  \"7b3294c2a5cfa6dba0008837\",\n  \"7b3294c2a5cff7f7f7a6dba0008837\",\n  \"762a83af8dc3e7d4e8d9f0d37fbf7b1b7837\",\n  \"762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837\",\n  \"762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837\",\n  \"762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837\",\n  \"40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b\",\n  \"40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e9a3c9f7f7f7a1d76a\",\n  \"d01c8bf1b6dab8e1864dac26\",\n  \"d01c8bf1b6daf7f7f7b8e1864dac26\",\n  \"c51b7de9a3c9fde0efe6f5d0a1d76a4d9221\",\n  \"c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221\",\n  \"c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221\",\n  \"c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221\",\n  \"8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419\",\n  \"8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"998ec3f7f7f7f1a340\",\n  \"5e3c99b2abd2fdb863e66101\",\n  \"5e3c99b2abd2f7f7f7fdb863e66101\",\n  \"542788998ec3d8daebfee0b6f1a340b35806\",\n  \"542788998ec3d8daebf7f7f7fee0b6f1a340b35806\",\n  \"5427888073acb2abd2d8daebfee0b6fdb863e08214b35806\",\n  \"5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806\",\n  \"2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08\",\n  \"2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62f7f7f767a9cf\",\n  \"ca0020f4a58292c5de0571b0\",\n  \"ca0020f4a582f7f7f792c5de0571b0\",\n  \"b2182bef8a62fddbc7d1e5f067a9cf2166ac\",\n  \"b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac\",\n  \"b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac\",\n  \"b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac\",\n  \"67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061\",\n  \"67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ef8a62ffffff999999\",\n  \"ca0020f4a582bababa404040\",\n  \"ca0020f4a582ffffffbababa404040\",\n  \"b2182bef8a62fddbc7e0e0e09999994d4d4d\",\n  \"b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d\",\n  \"b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d\",\n  \"b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d\",\n  \"67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a\",\n  \"67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91bfdb\",\n  \"d7191cfdae61abd9e92c7bb6\",\n  \"d7191cfdae61ffffbfabd9e92c7bb6\",\n  \"d73027fc8d59fee090e0f3f891bfdb4575b4\",\n  \"d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4\",\n  \"d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4\",\n  \"d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4\",\n  \"a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695\",\n  \"a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf91cf60\",\n  \"d7191cfdae61a6d96a1a9641\",\n  \"d7191cfdae61ffffbfa6d96a1a9641\",\n  \"d73027fc8d59fee08bd9ef8b91cf601a9850\",\n  \"d73027fc8d59fee08bffffbfd9ef8b91cf601a9850\",\n  \"d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850\",\n  \"d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850\",\n  \"a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837\",\n  \"a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fc8d59ffffbf99d594\",\n  \"d7191cfdae61abdda42b83ba\",\n  \"d7191cfdae61ffffbfabdda42b83ba\",\n  \"d53e4ffc8d59fee08be6f59899d5943288bd\",\n  \"d53e4ffc8d59fee08bffffbfe6f59899d5943288bd\",\n  \"d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd\",\n  \"d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd\",\n  \"9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2\",\n  \"9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5f999d8c92ca25f\",\n  \"edf8fbb2e2e266c2a4238b45\",\n  \"edf8fbb2e2e266c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a42ca25f006d2c\",\n  \"edf8fbccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824\",\n  \"f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0ecf49ebcda8856a7\",\n  \"edf8fbb3cde38c96c688419d\",\n  \"edf8fbb3cde38c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68856a7810f7c\",\n  \"edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b\",\n  \"f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e0f3dba8ddb543a2ca\",\n  \"f0f9e8bae4bc7bccc42b8cbe\",\n  \"f0f9e8bae4bc7bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc443a2ca0868ac\",\n  \"f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e\",\n  \"f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee8c8fdbb84e34a33\",\n  \"fef0d9fdcc8afc8d59d7301f\",\n  \"fef0d9fdcc8afc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59e34a33b30000\",\n  \"fef0d9fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000\",\n  \"fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece2f0a6bddb1c9099\",\n  \"f6eff7bdc9e167a9cf02818a\",\n  \"f6eff7bdc9e167a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf1c9099016c59\",\n  \"f6eff7d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450\",\n  \"fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ece7f2a6bddb2b8cbe\",\n  \"f1eef6bdc9e174a9cf0570b0\",\n  \"f1eef6bdc9e174a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d\",\n  \"f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b\",\n  \"fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e7e1efc994c7dd1c77\",\n  \"f1eef6d7b5d8df65b0ce1256\",\n  \"f1eef6d7b5d8df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0dd1c77980043\",\n  \"f1eef6d4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f\",\n  \"f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fde0ddfa9fb5c51b8a\",\n  \"feebe2fbb4b9f768a1ae017e\",\n  \"feebe2fbb4b9f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1c51b8a7a0177\",\n  \"feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177\",\n  \"fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"edf8b17fcdbb2c7fb8\",\n  \"ffffcca1dab441b6c4225ea8\",\n  \"ffffcca1dab441b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c42c7fb8253494\",\n  \"ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84\",\n  \"ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f7fcb9addd8e31a354\",\n  \"ffffccc2e69978c679238443\",\n  \"ffffccc2e69978c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67931a354006837\",\n  \"ffffccd9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32\",\n  \"ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fff7bcfec44fd95f0e\",\n  \"ffffd4fed98efe9929cc4c02\",\n  \"ffffd4fed98efe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929d95f0e993404\",\n  \"ffffd4fee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04\",\n  \"ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"ffeda0feb24cf03b20\",\n  \"ffffb2fecc5cfd8d3ce31a1c\",\n  \"ffffb2fecc5cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cf03b20bd0026\",\n  \"ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026\",\n  \"ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"deebf79ecae13182bd\",\n  \"eff3ffbdd7e76baed62171b5\",\n  \"eff3ffbdd7e76baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed63182bd08519c\",\n  \"eff3ffc6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594\",\n  \"f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"e5f5e0a1d99b31a354\",\n  \"edf8e9bae4b374c476238b45\",\n  \"edf8e9bae4b374c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47631a354006d2c\",\n  \"edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32\",\n  \"f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"f0f0f0bdbdbd636363\",\n  \"f7f7f7cccccc969696525252\",\n  \"f7f7f7cccccc969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696636363252525\",\n  \"f7f7f7d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525\",\n  \"fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"efedf5bcbddc756bb1\",\n  \"f2f0f7cbc9e29e9ac86a51a3\",\n  \"f2f0f7cbc9e29e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8756bb154278f\",\n  \"f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486\",\n  \"fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee0d2fc9272de2d26\",\n  \"fee5d9fcae91fb6a4acb181d\",\n  \"fee5d9fcae91fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4ade2d26a50f15\",\n  \"fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d\",\n  \"fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d\"\n).map(colors);\n\nexport default ramp(scheme);\n","import colors from \"../colors.js\";\nimport ramp from \"../ramp.js\";\n\nexport var scheme = new Array(3).concat(\n  \"fee6cefdae6be6550d\",\n  \"feeddefdbe85fd8d3cd94701\",\n  \"feeddefdbe85fd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3ce6550da63603\",\n  \"feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04\",\n  \"fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704\"\n).map(colors);\n\nexport default ramp(scheme);\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport default interpolateCubehelixLong(cubehelix(300, 0.5, 0.0), cubehelix(-240, 0.5, 1.0));\n","import {cubehelix} from \"d3-color\";\nimport {interpolateCubehelixLong} from \"d3-interpolate\";\n\nexport var warm = interpolateCubehelixLong(cubehelix(-100, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nexport var cool = interpolateCubehelixLong(cubehelix(260, 0.75, 0.35), cubehelix(80, 1.50, 0.8));\n\nvar c = cubehelix();\n\nexport default function(t) {\n  if (t < 0 || t > 1) t -= Math.floor(t);\n  var ts = Math.abs(t - 0.5);\n  c.h = 360 * t - 100;\n  c.s = 1.5 - 1.5 * ts;\n  c.l = 0.8 - 0.9 * ts;\n  return c + \"\";\n}\n","import colors from \"../colors.js\";\n\nfunction ramp(range) {\n  var n = range.length;\n  return function(t) {\n    return range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n  };\n}\n\nexport default ramp(colors(\"44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725\"));\n\nexport var magma = ramp(colors(\"00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf\"));\n\nexport var inferno = ramp(colors(\"00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4\"));\n\nexport var plasma = ramp(colors(\"0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921\"));\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // proceed\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x = pointX,\n      y = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function line(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","import * as d3 from 'd3';\nimport { getTextWidth } from \"@flourish/pocket-knife\"\n\nexport function formatData(data, dateFormat) {\n  console.log(data, dateFormat)\n  // var parseDate = d3.timeParse(dateFormat);\n  // // eslint-disable-next-line no-prototype-builtins\n  // if (data[0].hasOwnProperty('date')) {\n  //   return data.map(point => ({\n  //     ...point,\n  //     date: parseDate(point.date),\n  //   }));\n  // }\n  // return data;\n}\n\nexport function getSeriesNames(data, excludeColumns) {\n  const exclude = excludeColumns || ['date', 'label', 'annotate', 'highlight', 'type'];\n  const allSeriesNames = (Array.isArray(data)\n    ? data.reduce((acc, curr) => [...acc, ...Object.keys(curr)], [])\n    : Object.keys(data)\n  ).filter(d => !exclude.includes(d));\n  return [...new Set(allSeriesNames)];\n}\n\nexport function getMaxTextWidth(text, font) {\n    let maxWidth = 0\n    text.map(d => {\n        maxWidth = Math.max(maxWidth, getTextWidth(String(d),'16px MetricWeb'))\n    })\n    return maxWidth\n}\n\nexport function extentMulti(data, columns) {\n    const ext = data.reduce((acc, row) => {\n        const values = columns.map(key => +row[key]);\n        const rowExtent = d3.extent(values);\n        if (!acc.max) {\n            acc.max = rowExtent[1];\n            acc.min = rowExtent[0];\n        } else {\n            acc.max = Math.max(acc.max, rowExtent[1]);\n            acc.min = Math.min(acc.min, rowExtent[0]);\n        }\n        return acc;\n    }, {});\n    return [ext.min, ext.max];\n}\n// A function that returns an array of poll data for a given party\nexport function getDots(d, group,) {\n    const dotsData = [];\n    d.map((el) => {\n        const column = {};\n        column.name = group;\n        column.date = el.date;\n        column.value = Number(el[group]);\n        column.pollster = el.pollster\n        if (el[group]) {\n            dotsData.push(column);\n        }\n    });\n    return dotsData;\n}\n\nexport function getlines(d, group, displayNameDesk) {\n    // console.log('d and group',d,group)\n    const lineData = [];\n    d.forEach((el) => {\n        // console.log(el,i)\n        const column = {};\n        column.displayName = displayNameDesk;\n        column.name = group;\n        column.date = el.date;\n        column.value = +el[group];\n        if (el[group]) {\n            lineData.push(column);\n        }\n\n        // if(el[group] == false) {\n        //     lineData.push(null)\n        // }\n        if (el[group] === false && joinPoints === false) {\n            lineData.push(null);\n        }\n    });\n    return lineData;\n}\n\nexport function getMoE(d, group) {\n    // console.log('d and group',d,group)\n    const areaData = [];\n    d.forEach((el) => {\n        // console.log(el,i)\n        const column = {};\n        column.name = group;\n        column.x = el.date;\n        column.y1 = +el[group + '_upper'];\n        column.y0 = +el[group + '_lower'];\n        if (el[group]) {\n            areaData.push(column);\n        }\n\n        // if(el[group] == false) {\n        //     lineData.push(null)\n        // }\n        if (el[group] === false && joinPoints === false) {\n            areaData.push(null);\n        }\n    });\n    return areaData;\n}\n","export var BORDER = 25,\n    CORNER_RADIUS = 5,\n    TRIANGLE_HALFWIDTH = 10,\n    TRIANGLE_HEIGHT = 10;\n","/* The popup element can technically be partly outside the page, even though\n   visually it is not. This causes the page to become horizontally scrollable,\n   which can lead to problems like kiln/flourish#1267.\n\n   This code adds an absolutely-positioned “constrainer” element containing the\n   popup that has overlow:hidden, which covers the entire document.\n\n   It’s surprisingly hard to achieve that – or at least I failed to find an easy\n   way – and so we explicitly set the dimensions of the constrainer to match the\n   document, and recompute them when the popup is redrawn.\n*/\n\n// There is one constrainer for the entire page, however many Popup instances\n// there are, so these variables are global rather than properties of the instance.\nvar constrainer, style;\n\nexport function Popup__getConstrainer() {\n\tif (constrainer) return constrainer;\n\n\tconstrainer = document.createElement(\"div\");\n\tconstrainer.id = \"flourish-popup-constrainer\";\n\tstyle = constrainer.style;\n\n\tstyle.overflow = \"hidden\";\n\tstyle.pointerEvents = \"none\";\n\tstyle.position = \"absolute\";\n\tstyle.left = \"0\";\n\tstyle.top = \"0\";\n\tstyle.margin = \"0\";\n\tstyle.padding = \"0\";\n\n\tdocument.body.appendChild(constrainer);\n\tthis._resizeConstrainer();\n\n\treturn constrainer;\n};\n\nexport function Popup__resizeConstrainer() {\n\tif (!constrainer) Popup__getConstrainer.call(this);\n\t// The element must be hidden before we compute the dimensions, or\n\t// it will affect those dimensions itself, with the effect that the\n\t// constrainer can only grow and never shrink.\n\tvar old_display = style.display;\n\tstyle.display = \"none\";\n\tstyle.width = document.documentElement.scrollWidth + \"px\";\n\tstyle.height = document.documentElement.scrollHeight + \"px\";\n\tstyle.display = old_display;\n}\n","import { CORNER_RADIUS, TRIANGLE_HALFWIDTH, TRIANGLE_HEIGHT } from \"./constants\";\n\nvar locateTriangle = {};\nexport default locateTriangle;\n\nlocateTriangle.bottom = function locateTriangle_bottom(w, h) {\n\treturn {\n\t\tshape: [ -TRIANGLE_HALFWIDTH, -TRIANGLE_HEIGHT,  TRIANGLE_HALFWIDTH, -TRIANGLE_HEIGHT ],\n\t\tpos: [w/2, h + TRIANGLE_HEIGHT]\n\t};\n};\n\nlocateTriangle.top = function locateTriangle_top(w, h) {\n\treturn {\n\t\tshape: [ -TRIANGLE_HALFWIDTH, TRIANGLE_HEIGHT,  TRIANGLE_HALFWIDTH, TRIANGLE_HEIGHT ],\n\t\tpos: [w/2, -TRIANGLE_HEIGHT]\n\t};\n};\n\nlocateTriangle.left = function locateTriangle_left(w, h) {\n\treturn {\n\t\tshape: [ TRIANGLE_HEIGHT, TRIANGLE_HALFWIDTH,  TRIANGLE_HEIGHT, -TRIANGLE_HALFWIDTH ],\n\t\tpos: [-TRIANGLE_HEIGHT, h/2]\n\t};\n};\n\nlocateTriangle.right = function locateTriangle_right(w, h) {\n\treturn {\n\t\tshape: [ -TRIANGLE_HEIGHT, TRIANGLE_HALFWIDTH, -TRIANGLE_HEIGHT, -TRIANGLE_HALFWIDTH ],\n\t\tpos: [w + TRIANGLE_HEIGHT, h/2]\n\t};\n};\n\nlocateTriangle.topLeft = function locateTriangle_topLeft(w, h) {\n\treturn {\n\t\tshape: [ TRIANGLE_HEIGHT + CORNER_RADIUS, TRIANGLE_HEIGHT,\n\t\t         TRIANGLE_HEIGHT, TRIANGLE_HEIGHT + CORNER_RADIUS ],\n\t\tpos: [-TRIANGLE_HEIGHT, -TRIANGLE_HEIGHT]\n\t};\n};\n\nlocateTriangle.bottomLeft = function locateTriangle_bottomLeft(w, h) {\n\treturn {\n\t\tshape: [ TRIANGLE_HEIGHT + CORNER_RADIUS, -TRIANGLE_HEIGHT,\n\t\t\t       TRIANGLE_HEIGHT, -TRIANGLE_HEIGHT - CORNER_RADIUS ],\n\t\tpos: [-TRIANGLE_HEIGHT, h + TRIANGLE_HEIGHT]\n\t};\n};\n\nlocateTriangle.topRight = function locateTriangle_topRight(w, h) {\n\treturn {\n\t\tshape: [ -TRIANGLE_HEIGHT - CORNER_RADIUS, TRIANGLE_HEIGHT,\n\t\t\t       -TRIANGLE_HEIGHT, TRIANGLE_HEIGHT + CORNER_RADIUS ],\n\t\tpos: [w + TRIANGLE_HEIGHT, -TRIANGLE_HEIGHT]\n\t};\n};\n\nlocateTriangle.bottomRight = function locateTriangle_bottomRight(w, h) {\n\treturn {\n\t\tshape: [ -TRIANGLE_HEIGHT - CORNER_RADIUS, -TRIANGLE_HEIGHT,\n\t\t\t       -TRIANGLE_HEIGHT, -TRIANGLE_HEIGHT - CORNER_RADIUS ],\n\t\tpos: [w + TRIANGLE_HEIGHT, h + TRIANGLE_HEIGHT]\n\t};\n};\n\nfunction hFlexTriangle(w, h, x, y, cb, y_factor, y_pos) {\n\tvar l = x - w/2 - TRIANGLE_HEIGHT, r = x + w/2 + TRIANGLE_HEIGHT,\n\t    px = w/2 + Math.min(0, l - cb.left) + Math.max(0, r - cb.right),\n\t    shape;\n\n\tif (px - TRIANGLE_HALFWIDTH < CORNER_RADIUS) {\n\t\tshape = [ -px , (-TRIANGLE_HEIGHT - CORNER_RADIUS) * y_factor,\n\t\t\t\tMath.max(TRIANGLE_HALFWIDTH, CORNER_RADIUS - px), -TRIANGLE_HEIGHT * y_factor ];\n\t}\n\telse if (px + TRIANGLE_HALFWIDTH > w - CORNER_RADIUS) {\n\t\tshape = [ Math.min(-TRIANGLE_HALFWIDTH, w-px-CORNER_RADIUS), -TRIANGLE_HEIGHT * y_factor,\n\t\t\tMath.min(TRIANGLE_HALFWIDTH, w - px), (-TRIANGLE_HEIGHT - CORNER_RADIUS) * y_factor ];\n\t}\n\telse {\n\t\tshape = [ -TRIANGLE_HALFWIDTH, -TRIANGLE_HEIGHT * y_factor,\n\t\t\t\tTRIANGLE_HALFWIDTH, -TRIANGLE_HEIGHT * y_factor ];\n\t}\n\n\treturn { pos: [px, y_pos], shape: shape }\n};\n\nfunction vFlexTriangle(w, h, x, y, cb, x_factor, x_pos) {\n\tvar t = y - h/2 - TRIANGLE_HEIGHT, b = y + h/2 + TRIANGLE_HEIGHT,\n\t    py = h/2 + Math.min(0, t - cb.top) + Math.max(0, b - cb.bottom),\n\t    shape;\n\n\tif (py - TRIANGLE_HALFWIDTH < CORNER_RADIUS) {\n\t\tshape = [ (-TRIANGLE_HEIGHT - CORNER_RADIUS) * x_factor, -py,\n\t\t\t\t-TRIANGLE_HEIGHT * x_factor, Math.max(TRIANGLE_HALFWIDTH, CORNER_RADIUS - py) ];\n\t}\n\telse if (py + TRIANGLE_HALFWIDTH > h - CORNER_RADIUS) {\n\t\tshape = [ -TRIANGLE_HEIGHT * x_factor, Math.min(-TRIANGLE_HALFWIDTH, h-py-CORNER_RADIUS),\n\t\t\t(-TRIANGLE_HEIGHT - CORNER_RADIUS) * x_factor, Math.min(TRIANGLE_HALFWIDTH, h - py) ];\n\t}\n\telse {\n\t\tshape = [ -TRIANGLE_HEIGHT * x_factor, -TRIANGLE_HALFWIDTH,\n\t\t\t\t-TRIANGLE_HEIGHT * x_factor, TRIANGLE_HALFWIDTH ];\n\t}\n\n\treturn { pos: [x_pos, py], shape: shape }\n};\n\nlocateTriangle.bottomFlexible = function locateTriangle_bottomFlexible(w, h, x, y, cb) {\n\treturn hFlexTriangle(w, h, x, y, cb, +1, h + TRIANGLE_HEIGHT);\n};\n\nlocateTriangle.topFlexible = function locateTriangle_topFlexible(w, h, x, y, cb) {\n\treturn hFlexTriangle(w, h, x, y, cb, -1, -TRIANGLE_HEIGHT);\n};\n\nlocateTriangle.rightFlexible = function locateTriangle_rightFlexible(w, h, x, y, cb) {\n\treturn vFlexTriangle(w, h, x, y, cb, +1, w + TRIANGLE_HEIGHT);\n};\n\nlocateTriangle.leftFlexible = function locateTriangle_leftFlexible(w, h, x, y, cb) {\n\treturn vFlexTriangle(w, h, x, y, cb, -1, -TRIANGLE_HEIGHT);\n};\n","import { BORDER, TRIANGLE_HEIGHT } from \"./constants\";\nimport locateTriangle from \"./locate_triangle\";\n\nfunction boxBounds(dir, w, h, x, y, cb) {\n\tvar lt = locateTriangle[dir](w, h, x, y, cb),\n\t    left = x - BORDER - lt.pos[0],\n\t    top = y - BORDER - lt.pos[1];\n\treturn { left: left, top: top, right: left + w + 2*BORDER, bottom: top + h + 2*BORDER };\n}\n\nfunction positionBox(dir, s, path, w, h, x, y, clientX, clientY, cb) {\n\tvar lt = locateTriangle[dir](w, h, clientX, clientY, cb);\n\ts.left = (x - BORDER - lt.pos[0]) + \"px\";\n\ts.top = (y - BORDER - lt.pos[1]) + \"px\";\n\tpath.setAttribute(\"d\", \"M0,0L\" + lt.shape.join(\",\") + \"Z\");\n\tpath.setAttribute(\"transform\", \"translate(\" + (lt.pos[0] + BORDER) + \",\" + (lt.pos[1] + BORDER) + \")\");\n}\n\nexport default function Popup_draw() {\n\tvar popup = this;\n\n\tpopup.is_visible = true;\n\n\tfunction maxContentWidth(cb) {\n\t\tif (popup._maxWidth.match(/^\\d+(?:\\.\\d+)?%$/)) {\n\t\t\treturn cb.width * parseFloat(popup._maxWidth) / 100;\n\t\t}\n\t\tif (popup._maxWidth.match(/^\\d+(?:\\.\\d+)?(?:px)?$/)) {\n\t\t\treturn parseFloat(popup._maxWidth);\n\t\t}\n\t\tif (popup._maxWidth != null) {\n\t\t\tconsole.error(\"Popup: Unknown value for maxWidth: \" + popup._maxWidth);\n\t\t}\n\t\treturn cb.width;\n\t};\n\n\n\tif (!popup._point) {\n\t\tconsole.error(\"Popup: cannot draw popup till point() has been specified\");\n\t\treturn;\n\t}\n\n\tvar doc_rect = document.documentElement.getBoundingClientRect(),\n\t    clientX = popup._point[0], clientY = popup._point[1],\n\t    cb = popup._container.getBoundingClientRect();\n\n\tif (clientX < cb.left) clientX = cb.left;\n\telse if (clientX > cb.right) clientX = cb.right;\n\tif (clientY < cb.top) clientY = cb.top;\n\telse if (clientY > cb.bottom) clientY = cb.bottom;\n\n\tvar x = clientX - doc_rect.left, y = clientY - doc_rect.top;\n\n\tvar el = popup._getElement(), s = el.style,\n\tsvg = el.querySelector(\".flourish-popup-svg\"),\n\tg = svg.querySelector(\"g\"),\n\trect = g.querySelector(\"rect\"),\n\tpath = g.querySelector(\"path\"),\n\tcontent = el.querySelector(\".flourish-popup-content\");\n\n\ts.display = \"block\";\n\tcontent.style.maxWidth = maxContentWidth(cb) + \"px\";\n\tif (popup._inner_html != popup._html) {\n\t\tcontent.innerHTML = popup._inner_html = popup._html;\n\t}\n\tvar content_box = content.getBoundingClientRect(),\n\t    w, h;\n\tdo {\n\t\tw = Math.ceil(content_box.width);\n\t\th = Math.ceil(content_box.height);\n\t\ts.width = (w + 2*BORDER) + \"px\";\n\t\ts.height = (h + 2*BORDER) + \"px\";\n\t\tcontent_box = content.getBoundingClientRect();\n\t} while (w != Math.ceil(content_box.width) || h != Math.ceil(content_box.height));\n\n\trect.setAttribute(\"width\", w);\n\trect.setAttribute(\"height\", h);\n\tsvg.setAttribute(\"width\", w + 2*BORDER);\n\tsvg.setAttribute(\"height\", h + 2*BORDER);\n\n\tvar overlap = BORDER - TRIANGLE_HEIGHT;\n\tvar first_fit = null, best_horizontal_fit = null, best_vertical_fit = null,\n\t    least_horizontal_protrusion = Infinity, least_vertical_protrusion = Infinity,\n\t    vp_at_least_hp, hp_at_least_vp;\n\tfor (var i = 0; i < popup._directions.length; i++) {\n\t\tvar dir = popup._directions[i],\n\t\t    b = boxBounds(dir, w, h, clientX, clientY, cb),\n\t\t    horizontal_protrusion = Math.max(0, Math.floor(cb.left) - b.left - overlap)\n\t\t    \t+ Math.max(0, b.right - Math.ceil(cb.right) - overlap),\n\t\t    vertical_protrusion = Math.max(0, Math.floor(cb.top) - b.top - overlap)\n\t\t    \t+ Math.max(0, b.bottom - Math.ceil(cb.bottom) - overlap);\n\n\t\tif (horizontal_protrusion == 0 && vertical_protrusion == 0) {\n\t\t\tfirst_fit = dir;\n\t\t\tbreak;\n\t\t}\n\t\tif (horizontal_protrusion < least_horizontal_protrusion\n\t\t|| (horizontal_protrusion == least_horizontal_protrusion\n\t\t    && vertical_protrusion < vp_at_least_hp))\n\t\t{\n\t\t\tleast_horizontal_protrusion = horizontal_protrusion;\n\t\t\tvp_at_least_hp = vertical_protrusion;\n\t\t\tbest_horizontal_fit = dir;\n\t\t}\n\t\tif (vertical_protrusion < least_vertical_protrusion\n\t\t|| (vertical_protrusion == least_vertical_protrusion\n\t\t    && horizontal_protrusion < hp_at_least_vp))\n\t\t{\n\t\t\tleast_vertical_protrusion = vertical_protrusion;\n\t\t\thp_at_least_vp = horizontal_protrusion;\n\t\t\tbest_vertical_fit = dir;\n\t\t}\n\t}\n\n\t// If the box can be fit completely within the container, do that\n\tif (first_fit) {\n\t\tdir = first_fit;\n\t}\n\t// Otherwise use the fallback fit (horizontal or vertical) if specified\n\telse if (popup._fallbackFit == \"horizontal\") {\n\t\tdir = best_horizontal_fit;\n\t}\n\telse if (popup._fallbackFit == \"vertical\") {\n\t\tdir = best_vertical_fit;\n\t}\n\t// If all else fails, issue a warning and use the first specified direction.\n\telse {\n\t\tconsole.warn(\"Popup: failed to point box of size (\" + w + \", \" + h + \")\" +\n\t\t\t\" at (\" + clientX + \", \" + clientY + \") within (\" +\n\t\t\tcb.left + \", \" + cb.top +\", \" + cb.right + \", \" + cb.bottom + \")\");\n\t\tdir = popup._directions[0];\n\t}\n\n\t// Position the box and return\n\tpositionBox(dir, s, path, w, h, x, y, clientX, clientY, cb);\n\treturn popup;\n}\n","import { BORDER, CORNER_RADIUS } from \"./constants\";\n\nfunction svgElement(tagName, attrs, styles) {\n\tvar element = document.createElementNS(\"http://www.w3.org/2000/svg\", tagName);\n\tvar k;\n\tif (attrs) for (k in attrs) element.setAttribute(k, attrs[k]);\n\n\tvar s = element.style;\n\tif (styles) for (k in styles) s[k] = styles[k];\n\n\treturn element;\n}\n\nexport default function Popup__getElement() {\n\tvar popup = this;\n\tvar id = \"flourish-popup-\" + popup.unique_id;\n\tvar el = document.getElementById(id);\n\tif (!el) {\n\t\tel = document.createElement(\"div\");\n\t\tel.className = \"flourish-popup\";\n\t\tel.id = id;\n\n\t\tvar s = el.style;\n\t\ts.display = \"none\";\n\t\ts.margin = s.padding = 0;\n\t\ts.position = \"absolute\";\n\t\ts.width = \"80px\";\n\t\ts.height = \"40px\";\n\t\ts.boxSizing = \"border-box\";\n\n\t\tel.addEventListener(\"click\", function(e) {\n\t\t\tpopup.fire(\"click\", e);\n\t\t}, false);\n\n\t\tvar svg = svgElement(\"svg\", {\"class\": \"flourish-popup-svg\"}, {\n\t\t\tposition: \"absolute\",\n\t\t\ttop: 0, left: 0, bottom: 0, right: 0\n\t\t});\n\n\t\tvar filter = svgElement(\"filter\", {id: \"dropshadow-\" + popup.unique_id, height: \"130%\"});\n\t\tfilter.appendChild(svgElement(\"feGaussianBlur\", {\"in\": \"SourceAlpha\", stdDeviation: 5}));\n\t\tfilter.appendChild(svgElement(\"feOffset\", {dx: 0, dy: 2, result: \"offsetblur\"}));\n\t\tvar fe_component_transfer = svgElement(\"feComponentTransfer\");\n\t\tfe_component_transfer.appendChild(svgElement(\"feFuncA\", {type: \"linear\", slope: 0.2}));\n\t\tfilter.appendChild(fe_component_transfer);\n\t\tvar fe_merge = svgElement(\"feMerge\");\n\t\tfilter.appendChild(fe_merge);\n\t\tfe_merge.appendChild(svgElement(\"feMergeNode\"));\n\t\tfe_merge.appendChild(svgElement(\"feMergeNode\", {\"in\": \"SourceGraphic\"}));\n\t\tsvg.appendChild(filter);\n\n\t\tvar g = svgElement(\"g\", {\n\t\t\tfilter: \"url(#dropshadow-\" + popup.unique_id + \")\",\n\t\t\tfill: \"white\",\n\t\t\tstroke: \"none\"\n\t\t});\n\t\tg.appendChild(svgElement(\"rect\", {x: BORDER, y: BORDER, rx: CORNER_RADIUS}));\n\t\tg.appendChild(svgElement(\"path\"));\n\t\tsvg.appendChild(g);\n\t\tel.appendChild(svg);\n\n\t\tvar content = document.createElement(\"div\");\n\t\tcontent.className = \"flourish-popup-content\";\n\t\ts = content.style;\n\t\ts.position = \"absolute\";\n\t\ts.top = s.left = BORDER + \"px\";\n\t\ts.padding = \"10px\";\n\t\tel.appendChild(content);\n\n\t\tpopup._getConstrainer().appendChild(el);\n\t}\n\n\tpopup._resizeConstrainer();\n\treturn el;\n}\n","import Popup_draw from \"./draw\";\nimport Popup__getElement from \"./element\";\nimport { Popup__getConstrainer, Popup__resizeConstrainer } from \"./constrainer\";\nimport locateTriangle from \"./locate_triangle\";\n\n\nvar VERSION = \"2.1.5\";\nvar next_unique_id = 1;\nvar OPTIONS = {\n\tcontainer: document.body,\n\tmaxWidth: \"70%\",\n\tpoint: null,\n\thtml: null,\n\tdirections: [\n    \t\"bottom\", \"top\", \"left\", \"right\",\n    \t\"topLeft\", \"bottomLeft\", \"topRight\", \"bottomRight\",\n    \t\"bottomFlexible\", \"topFlexible\", \"leftFlexible\", \"rightFlexible\"\n    ],\n\tfallbackFit: \"horizontal\" // or \"vertical\"\n};\n\nfunction Popup() {\n\tthis.unique_id = next_unique_id++;\n\tthis.is_visible = true;\n\n\tfor (var k in OPTIONS) this[\"_\" + k] = OPTIONS[k];\n\n\tthis.handlers = {\n\t\t\"click\": []\n\t};\n}\n\n// Create accessor methods for all the options\nfunction accessor(k) {\n\tPopup.prototype[k] = function(v) {\n\t\tif (typeof v == \"undefined\") return this[\"_\" + k];\n\t\tthis[\"_\" + k] = v;\n\t\treturn this;\n\t};\n}\nfor (var k in OPTIONS) accessor(k);\n\n// Custom accessor method for .point\nPopup.prototype.point = function(arg1, arg2) {\n\tif (typeof arg1 == \"undefined\") return this._point;\n\tif (Array.isArray(arg1)) this._point = [ arg1[0], arg1[1] ];\n\telse if (typeof arg2 != \"undefined\") this._point = [ arg1, arg2 ];\n\telse if (arg1 instanceof HTMLElement || arg1 instanceof SVGElement) {\n\t\tvar r = arg1.getBoundingClientRect();\n\t\tthis._point = [ Math.floor(r.left + r.width/2), Math.floor(r.top + r.height/2) ];\n\t}\n\telse {\n\t\tconsole.error(\"Popup: could not understand argument\")\n\t}\n\n\treturn this;\n}\n\nPopup.prototype.directions = function(arg) {\n\tif (typeof arg === \"undefined\") return this._directions;\n\tif (typeof arg === \"string\") arg = [ arg ];\n\tthis._directions = arg.slice();\n\treturn this;\n}\n\nfunction textToHtml(text) {\n\treturn text.replace(/[&<>]/g, function (s) {\n\t\treturn ({ \"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\" })[s];\n\t});\n}\n\n// Accessor (setter only) for setting plain text\nPopup.prototype.text = function Popup_text(t) {\n\tthis._html = textToHtml(t);\n\treturn this;\n};\n\n// Attach event handlers\nPopup.prototype.on = function Popup_on(event, handler) {\n\tif (!(event in this.handlers)) throw new Error(\"Popup.on: No such event: \" + event);\n\tthis.handlers[event].push(handler);\n\treturn this;\n};\n\n// Fire event\nPopup.prototype.fire = function Popup_fire(event, d) {\n\tif (!(event in this.handlers)) throw new Error(\"Popup.fire: No such event: \" + event);\n\tvar handlers = this.handlers[event];\n\tfor (var i = 0; i < handlers.length; i++) {\n\t\thandlers[i].call(this, d);\n\t}\n\treturn this;\n};\n\n\nPopup.prototype._getElement = Popup__getElement;\nPopup.prototype._getConstrainer = Popup__getConstrainer;\nPopup.prototype._resizeConstrainer = Popup__resizeConstrainer;\n\nPopup.prototype.draw = Popup_draw;\n\nPopup.prototype.hide = function Popup_hide() {\n\tif (!this.is_visible) return this;\n\tthis.is_visible = false;\n\tthis._getElement().style.display = \"none\";\n\treturn this;\n}\n\n\nfunction Flourish_popup() {\n\treturn new Popup();\n}\nFlourish_popup.version = VERSION;\n\nexport default Flourish_popup;\n","import { select, event as d3_event } from \"d3-selection\";\nimport { timerFlush } from \"d3-timer\";\nimport \"d3-transition\";\n\nvar next_unique_id = 1;\n\nvar OPTIONS = {\n\tcontainer: document.body,\n\tpoint: [window.innerWidth/2, window.innerHeight/2],\n\thtml: \"\",\n\topen_duration: 250,\n\tclose_duration: 250,\n\tpopup_custom_template: \"\",\n\tposition: \"overlay\",\n\tshadow: true,\n\tunderlay_color: \"rgba(255, 255, 255, 0.75)\",\n\n\twidth_side: 35,\n\theight_side: 35,\n\twidth_overlay: 80,\n\theight_overlay: 80,\n\tvertical_position: \"click\",\n\tmax_width: null,\n\tmax_height: null,\n\tcloseable: true\n};\n\nfunction Panel() {\n\tvar panel = this;\n\tpanel.unique_id = next_unique_id++;\n\tpanel._is_open = false;\n\tpanel._onclose = null;\n\tfor (var k in OPTIONS) panel[\"_\" + k] = OPTIONS[k];\n}\n\n// Create accessor methods for all the options\nfunction accessor(k) {\n\tPanel.prototype[k] = function(v) {\n\t\tif (typeof v == \"undefined\") return this[\"_\" + k];\n\t\tthis[\"_\" + k] = v;\n\t\treturn this;\n\t};\n}\nfor (var k in OPTIONS) accessor(k);\n\n// Custom accessor method for .point\nPanel.prototype.point = function(arg1, arg2) {\n\tif (typeof arg1 == \"undefined\") return this._point;\n\tif (Array.isArray(arg1)) this._point = [ arg1[0], arg1[1] ];\n\telse if (typeof arg2 != \"undefined\") this._point = [ arg1, arg2 ];\n\telse if (arg1 instanceof HTMLElement || arg1 instanceof SVGElement) {\n\t\tvar r = arg1.getBoundingClientRect();\n\t\tthis._point = [ Math.floor(r.left + r.width/2), Math.floor(r.top + r.height/2) ];\n\t}\n\telse {\n\t\tconsole.error(\"Panel: could not understand argument\");\n\t}\n\treturn this;\n};\n\nPanel.prototype.container = function(container) {\n\tif (container) this._container = container;\n\treturn this;\n};\n\nfunction fadeOutPanel(panel) {\n\tpanel._getElement().style.pointerEvents = \"none\";\n\tpanel._is_open = false;\n\tvar duration = panel._close_duration;\n\tselect(panel._getElement())\n\t\t.transition().duration(duration)\n\t\t.style(\"background\", \"rgba(255, 255, 255, 0)\")\n\t\t.on(\"interrupt\", function() {\n\t\t\tselect(this).style(\"display\", panel._is_open ? \"block\" : \"none\");\n\t\t})\n\t\t.on(\"end\", function() {\n\t\t\tselect(this).style(\"display\", \"none\");\n\t\t})\n\t\t.select(\".flourish-panel-close\")\n\t\t.style(\"opacity\", \"0\");\n\n\tselect(panel._inner)\n\t\t.transition().duration(duration)\n\t\t.style(\"opacity\", 0);\n\n\tselect(panel._content)\n\t\t.transition().duration(duration/2)\n\t\t.style(\"opacity\", 0);\n}\n\n\nPanel.prototype.hide = function() {\n\tvar panel = this;\n\tif (!panel._is_open) return;\n\tfadeOutPanel(panel);\n\treturn this;\n};\n\nPanel.prototype.close = Panel.prototype.hide;\n\nfunction addCloseButton(panel) {\n\tselect(panel._inner).append(\"svg\")\n\t\t.attr(\"class\", \"flourish-panel-close\")\n\t\t.attr(\"viewBox\", \"0 0 40 40\")\n\t\t.style(\"width\", \"1.25rem\")\n\t\t.style(\"height\", \"1.25rem\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"right\", \"1rem\")\n\t\t.style(\"top\", \"1rem\")\n\t\t.style(\"cursor\", \"pointer\")\n\t\t.style(\"opacity\", 0)\n\t\t.on(\"mouseover\", function() { if (panel._closeable) this.style.opacity = 0.66; })\n\t\t.on(\"mouseout\", function() { if (panel._closeable) this.style.opacity = 1; })\n\t\t.on(\"click\", function () {\n\t\t\td3_event.stopPropagation();\n\t\t\tpanel.hide();\n\t\t\tif (panel._onclose) panel._onclose();\n\t\t})\n\t\t.on(\"touch\", function() {\n\t\t\td3_event.stopPropagation();\n\t\t\tpanel.hide();\n\t\t\tif (panel._onclose) panel._onclose();\n\t\t})\n\t\t.append(\"path\")\n\t\t.attr(\"stroke\", \"#333333\")\n\t\t.attr(\"stroke-width\", \"0.5rem\")\n\t\t.attr(\"stroke-linecap\", \"round\")\n\t\t.attr(\"d\", \"M 10,10 L 30,30 M 30,10 L 10,30\");\n}\n\nPanel.prototype.draw = function() {\n\tvar panel = this;\n\tpanel._content.innerHTML = panel._html;\n\topenPanel(panel);\n\treturn this;\n};\n\nPanel.prototype.on = function(event, callback) {\n\tif (event == \"close\") {\n\t\tif (callback) this._onclose = callback;\n\t}\n\telse console.error(\"Panel .on() method only supports 'close' events\");\n\treturn this;\n};\n\nfunction openPanel(panel) {\n\tvar duration = panel._is_open || panel._html == panel._default ? 0 : panel._open_duration;\n\n\tvar window_w = window.innerWidth, window_h = window.innerHeight;\n\n\tvar overlay = panel._position == \"overlay\",\n\t    full_width = panel._position == \"top\" || panel._position == \"bottom\",\n\t    full_height = panel._position == \"left\" || panel._position == \"right\",\n\t    max_w_percent = 100 * (panel._max_width || Infinity)/window_w,\n\t    max_h_percent = 100 * (panel._max_height || Infinity)/window_h,\n\t    y_percent = (100 * panel._point[1] / window_h);\n\n\tvar position_click = panel._vertical_position == \"click\" && !Flourish.fixed_height;\n\n\tvar end_w_percent = overlay ? Math.min(panel._width_overlay, max_w_percent) : (full_width ? 100 : Math.min(panel._width_side, max_w_percent)),\n\t    end_h_percent = overlay ? Math.min(panel._height_overlay, max_h_percent) : (full_height ? 100 : Math.min(panel._height_side, max_h_percent));\n\n\tvar end_l_percent = overlay ? (100 - end_w_percent) / 2 : (panel._position == \"right\" ? (100 - end_w_percent) : 0),\n\t    end_t_percent_overlay = position_click ? Math.max(1, Math.min((y_percent - (end_h_percent / 2)), 99 - end_h_percent)) : (100 - end_h_percent) / 2,\n\t    end_t_percent = overlay ? end_t_percent_overlay : (panel._position == \"bottom\" ? (100 - end_h_percent) : 0);\n\n\tvar start_w_percent = overlay ? 0 : end_w_percent,\n\t    start_h_percent = overlay ? 0 : end_h_percent,\n\t    start_l_percent = overlay ? (100 * panel._point[0]/window_w) : (panel._position == \"right\" ? 100 : (panel._position == \"left\" ? -end_w_percent : 0)),\n\t    start_t_percent = overlay ? y_percent : (panel._position == \"bottom\" ? 100 : (panel._position == \"top\" ? -end_h_percent : 0));\n\n\tselect(panel._getElement()).style(\"display\", \"block\")\n\t\t.transition().duration(duration).delay(duration * 0.25)\n\t\t.style(\"background\", overlay ? panel._underlay_color : \"rgba(255, 255, 255, 0)\")\n\t\t.style(\"pointer-events\", overlay ? null : \"none\");\n\n\tselect(panel._inner)\n\t\t.style(\"opacity\", 1)\n\t\t.style(\"display\", \"block\")\n\t\t.style(\"pointer-events\", \"none\")\n\t\t.style(\"width\", start_w_percent + \"%\")\n\t\t.style(\"height\", start_h_percent + \"%\")\n\t\t.style(\"left\", start_l_percent + \"%\")\n\t\t.style(\"top\", start_t_percent + \"%\")\n\t\t.transition().duration(duration)\n\t\t.style(\"width\", end_w_percent + \"%\")\n\t\t.style(\"height\", end_h_percent + \"%\")\n\t\t.style(\"left\", end_l_percent + \"%\")\n\t\t.style(\"top\", end_t_percent + \"%\")\n\t\t.on(\"end\", function() {\n\t\t\tselect(panel._inner)\n\t\t\t\t.style(\"pointer-events\", \"all\")\n\t\t\t\t.style(\"width\", end_w_percent + \"%\")\n\t\t\t\t.style(\"height\", end_h_percent + \"%\")\n\t\t\t\t.style(\"left\", end_l_percent + \"%\")\n\t\t\t\t.style(\"top\", end_t_percent + \"%\");\n\t\t})\n\t\t.on(\"interrupt\", function() {\n\t\t\tselect(panel._inner)\n\t\t\t\t.style(\"pointer-events\", \"all\")\n\t\t\t\t.style(\"width\", end_w_percent + \"%\")\n\t\t\t\t.style(\"height\", end_h_percent + \"%\")\n\t\t\t\t.style(\"left\", end_l_percent + \"%\")\n\t\t\t\t.style(\"top\", end_t_percent + \"%\");\n\t\t});\n\n\tvar offset_panel_content = full_height && position_click;\n\n\tselect(panel._content)\n\t\t.transition().duration(duration/4).delay(duration)\n\t\t.style(\"opacity\", 1)\n\t\t.on(\"interrupt\", function() {\n\t\t\tselect(this).style(\"opacity\", 1);\n\t\t});\n\n\tselect(panel._content).select(\".flourish-panel-content-inner\")\n\t\t.style(\"position\", offset_panel_content ? \"absolute\" : null)\n\t\t.style(\"top\", offset_panel_content ? y_percent + \"%\" : null)\n\t\t.style(\"transform\", offset_panel_content ? \"translateY(-50%)\" : null);\n\n\tselect(panel._inner).select(\".flourish-panel-close\")\n\t\t.style(\"opacity\", 0)\n\t\t.transition().duration(duration / 4).delay(duration)\n\t\t.style(\"opacity\", panel._closeable ? 1 : 0);\n\n\tpanel._is_open = true;\n\n\ttimerFlush();\n}\n\nPanel.prototype.margins = function() {\n\tvar margins = { top: 0, right: 0, bottom: 0, left: 0 };\n\tif (this._is_open && this._position != \"overlay\") {\n\t\tvar rect = this._getElement().getBoundingClientRect();\n\t\tif (this._position == \"top\") margins.top = rect.top + rect.height;\n\t\tif (this._position == \"right\") margins.right = rect.left;\n\t\tif (this._position == \"bottom\") margins.bottom = rect.top;\n\t\tif (this._position == \"left\") margins.left = rect.left + rect.width;\n\t}\n\tmargins.css = margins.top + \"px \" + margins.right + \"px \" + margins.bottom + \"px \" + margins.left + \"px\";\n\treturn margins;\n};\n\nPanel.prototype._getElement = function() {\n\tvar panel = this;\n\tvar id = \"flourish-panel-\" + panel.unique_id;\n\tvar el = document.getElementById(id);\n\tif (!el) {\n\t\tel = document.createElement(\"div\");\n\t\tel.className = \"flourish-panel\";\n\t\tel.id = id;\n\t\tel.addEventListener(\"click\", function(e) {\n\t\t\te.stopPropagation();\n\t\t\tpanel.hide();\n\t\t\tif (panel._onclose) panel._onclose();\n\t\t});\n\n\t\tvar s = el.style;\n\t\ts.position = \"absolute\";\n\t\ts.zIndex = \"999999\";\n\t\ts.pointerEvents = \"none\";\n\t\ts.width = \"100%\";\n\t\ts.height = \"100%\";\n\t\ts.top = \"0\";\n\t\ts.left = \"0\";\n\t\ts.background = \"rgba(255, 255, 255, 0)\";\n\n\t\tvar inner = document.createElement(\"div\");\n\t\tinner.className = \"flourish-panel-inner\";\n\t\tel.appendChild(inner);\n\t\tpanel._inner = inner;\n\n\t\ts = inner.style;\n\t\ts.width = \"0\";\n\t\ts.height = \"0\";\n\t\ts.position = \"absolute\";\n\t\ts.boxSizing = \"border-box\";\n\n\t\tvar shadow = document.createElement(\"div\");\n\t\tshadow.className = \"flourish-panel-shadow\";\n\t\tinner.appendChild(shadow);\n\n\t\tvar content = document.createElement(\"div\");\n\t\tcontent.className = \"flourish-panel-content\";\n\t\tinner.appendChild(content);\n\t\tpanel._content = content;\n\n\t\ts = content.style;\n\t\ts.opacity = \"0\";\n\t\ts.overflowY = \"auto\";\n\t\ts.height = \"100%\";\n\n\t\taddCloseButton(panel);\n\n\t\tpanel._container.appendChild(el);\n\t}\n\treturn el;\n};\n\nfunction initPanel() {\n\treturn new Panel();\n}\n\nexport default initPanel;\n","var DEFAULTS = {\n\tmode: \"popup\",\n\n\t// If truthy, means panel or popup are locked\n\tlocked_id: null,\n\n\t// Popup content\n\tpopup_is_custom: false,\n\tpopup_custom_header: \"Popup header\",\n\tpopup_custom_main: \"Popup main content. Write your column names in between double curly brackets to display dynamic content.\",\n\tpopup_teaser_default: \"Click to see more\",\n\n\t// Popup styles\n\tpopup_text_color: \"#333333\",\n\tpopup_align: \"start\",\n\tpopup_font_size: 1,\n\tpopup_width: 12,\n\tpopup_background: \"#ffffff\",\n\tpopup_background_opacity: 1,\n\tpopup_padding: 0.5,\n\tpopup_radius: 0.2,\n\tpopup_shadow: true,\n\tpopup_pointer: true,\n\tpopup_header_background: \"#333333\",\n\tpopup_header_text_color: \"#ffffff\",\n\tpopup_header_type: \"block\",\n\tpopup_list_type: \"table\",\n\tpopup_list_label_weight: \"normal\",\n\tpopup_list_separator: \": \",\n\n\t// Panel content\n\tpanel_is_custom: false,\n\tpanel_custom_header: \"Custom panel header\",\n\tpanel_custom_main: \"Custom panel main content\",\n\tpanel_side_default_content: \"<h1>Tap or click to explore</h1>\",\n\tpanel_side_fixed: false,\n\n\t// Panel layout\n\tpanel_position: \"overlay\",\n\tpanel_width_overlay: 80,\n\tpanel_height_overlay: 80,\n\tpanel_vertical_position: \"center\",\n\tpanel_width_side: 35,\n\tpanel_height_side: 35,\n\tpanel_max_width: null,\n\tpanel_max_height: null,\n\n\t// Panel styles\n\tpanel_text_color: \"#333333\",\n\tpanel_align: \"start\",\n\tpanel_font_size: 1.25,\n\tpanel_background: \"#ffffff\",\n\tpanel_background_opacity: 0.9,\n\tpanel_padding: 1.2,\n\tpanel_radius: 0.2,\n\tpanel_shadow: true,\n\tpanel_open_duration: 250,\n\tpanel_close_duration: 250,\n\tpanel_list_type: \"table\",\n\tpanel_list_label_weight: \"normal\",\n\tpanel_list_separator: \": \",\n};\n\nexport default DEFAULTS;\n","function getDefaultHTML(instance, d, mode) {\n\tvar html = \"<div class='flourish-panel-content-inner'>\";\n\tvar custom_default = instance[\"_\" + mode + \"_default_template\"];\n\tvar list_mode = instance._state[mode + \"_list_type\"];\n\tvar separator = instance._state[mode + \"_list_separator\"];\n\tvar separator_is_line_break = separator === \"<br />\";\n\tvar character_separator = separator_is_line_break ? \"\" : separator;\n\tvar line_break = separator_is_line_break ? separator : \"\";\n\n\tif (!custom_default) {\n\t\t// By default just show all the selected columns\n\t\tvar col_name;\n\t\tvar col_names_in_popup = {};\n\t\tif (d[instance._title_key] || d[instance._subtitle_key]) {\n\t\t\thtml += \"<header>\";\n\t\t\tif (d[instance._title_key]) {\n\t\t\t\thtml += \"<h1>\" + d[instance._title_key] + \"</h1>\";\n\t\t\t\tcol_name = instance._column_names[instance._title_key];\n\t\t\t\tcol_names_in_popup[col_name] = true;\n\t\t\t}\n\t\t\tif (d[instance._subtitle_key]) {\n\t\t\t\thtml += \"<h2>\" + d[instance._subtitle_key] + \"</h2>\";\n\t\t\t\tcol_name = instance._column_names[instance._subtitle_key];\n\t\t\t\tcol_names_in_popup[col_name] = true;\n\t\t\t}\n\t\t\thtml += \"</header>\";\n\t\t}\n\t\tvar main_content = \"\";\n\t\tfor (var binding in instance._column_names) {\n\t\t\tif (binding == instance._title_key) continue;\n\t\t\tif (binding == instance._subtitle_key) continue;\n\t\t\telse if (Array.isArray(d[binding])) {\n\t\t\t\tfor (var m = 0; m < d[binding].length; m++) {\n\t\t\t\t\tcol_name = instance._column_names[binding][m];\n\t\t\t\t\tif (col_names_in_popup[col_name]) continue;\n\t\t\t\t\tcol_names_in_popup[col_name] = true;\n\t\t\t\t\tif (list_mode == \"table\") main_content += \"<tr><td class='table-col-label'><span class='data-heading'>\" + col_name + \"</span></td><td class='table-col-value'>\" + d[binding][m] + \"</td></tr>\";\n\t\t\t\t\telse if (list_mode == \"ul\") main_content += \"<li><span class='data-heading'>\" + col_name + character_separator +\" </span> \"+ line_break + d[binding][m] + \"</li>\";\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcol_name = instance._column_names[binding];\n\t\t\t\tif (col_names_in_popup[col_name]) continue;\n\t\t\t\tcol_names_in_popup[col_name] = true;\n\t\t\t\tif (list_mode == \"table\") main_content += \"<tr><td class='table-col-label'><span class='data-heading'>\" + col_name + \"</span></td><td class='table-col-value'>\" + d[binding] + \"</td></tr>\";\n\t\t\t\telse if (list_mode == \"ul\") main_content += \"<li><span class='data-heading'>\" + col_name + character_separator + \" </span> \" + line_break + d[binding] + \"</li>\";\n\t\t\t}\n\t\t}\n\t\tif (main_content !== \"\") {\n\t\t\thtml += \"<div class='main-content'><\" + list_mode + \">\";\n\t\t\thtml += main_content;\n\t\t\thtml += \"</\" + list_mode + \"></div></div>\";\n\t\t}\n\t}\n\telse {\n\t\thtml += custom_default.replace(/\\{\\{((?:[^}]|\\}[^}])*)\\}\\}/g, function(_, target_col_name) {\n\t\t\tvar value;\n\t\t\tif (Array.isArray(instance._column_names[target_col_name])) {\n\t\t\t\tvar column_name = instance._column_names[target_col_name];\n\t\t\t\tif (column_name.length == 0) return \"\";\n\t\t\t\tvalue = \"<ul>\";\n\t\t\t\tcolumn_name.forEach(function(name, i) {\n\t\t\t\t\tvalue += \"<li>\" + name + separator + d[target_col_name][i] + \"</li>\";\n\t\t\t\t});\n\t\t\t\tvalue += \"</ul>\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalue = d[target_col_name];\n\t\t\t}\n\t\t\tif (value !== undefined) return value;\n\t\t\treturn \"\";\n\t\t});\n\t}\n\treturn html;\n}\n\nfunction getValueFromColumnName(instance, target_col_name, d) {\n\tvar value;\n\tObject.keys(instance._column_names).some(function(key) {\n\t\tif (Array.isArray(instance._column_names[key])) {\n\t\t\tvar index = instance._column_names[key].indexOf(target_col_name);\n\t\t\tif (index >= 0) {\n\t\t\t\tvalue = d[key][index];\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\telse if (instance._column_names[key] == target_col_name) {\n\t\t\tvalue = d[key];\n\t\t\treturn true;\n\t\t}\n\t});\n\tif (value !== undefined) return value;\n\treturn \"\";\n}\n\nfunction getCustomHTML(instance, content_header_raw, content_main_raw, d) {\n\tvar content = \"\";\n\n\t// TODO. Add handlebars proper to extend this to support else statements and nested conditions\n\tvar content_header_parsed = getParsedContent(content_header_raw, instance, d);\n\tvar content_main_parsed = getParsedContent(content_main_raw, instance, d);\n\n\tif (content_header_parsed) content += \"<header>\" + content_header_parsed + \"</header>\";\n\tif (content_main_parsed) content += \"<div class='main-content'>\" + content_main_parsed + \"</div>\";\n\n\treturn content;\n}\n\nfunction getParsedContent(content_raw, instance, d) {\n\tvar condition_regex = /\\{\\{#if ((?:[^}]|\\}[^}])*)\\}\\}([\\s\\S]*?)\\{\\{\\/if\\}\\}/g;\n\tvar variable_regex = /\\{\\{((?:[^}]|\\}[^}])*)\\}\\}/g;\n\treturn content_raw\n\t\t.replace(condition_regex, function (_, target_col_name, if_contents) {\n\t\t\treturn getValueFromColumnName(instance, target_col_name, d) == \"\" ? \"\" : if_contents;\n\t\t})\n\t\t.replace(variable_regex, function (_, target_col_name) {\n\t\t\treturn getValueFromColumnName(instance, target_col_name, d);\n\t\t}).trim();\n}\n\nexport function getPopupHTML(instance, d, teaser) {\n\tvar html = \"\";\n\tif (teaser && !instance._state.popup_is_custom) html += \"<div class='main-content'>\" + instance._state.popup_teaser_default + \"</div>\";\n\telse if (!teaser && !instance._state.popup_is_custom) html += getDefaultHTML(instance, d, \"popup\");\n\telse html += getCustomHTML(instance, instance._state.popup_custom_header, instance._state.popup_custom_main, d);\n\treturn html;\n}\n\nexport function getPanelHTML(instance, d) {\n\tvar html = \"\";\n\tif (!instance._state.panel_is_custom) html += getDefaultHTML(instance, d, \"panel\");\n\telse html += getCustomHTML(instance, instance._state.panel_custom_header, instance._state.panel_custom_main, d);\n\treturn html;\n}\n","import { color } from \"d3-color\";\nimport Stylesheet from \"@flourish/js2css\";\n\nexport function appendStyles(instance) {\n\tif (!document.querySelector(\"#popup-styles\")) {\n\t\tvar css = document.createElement(\"style\");\n\t\tcss.id = \"popup-styles\";\n\t\tdocument.head.appendChild(css);\n\t}\n\tvar styles = new Stylesheet();\n\tvar header_block = instance._state.popup_header_type == \"block\";\n\tvar header_background = color(instance._state.popup_header_background || \"transparent\");\n\theader_background.opacity = instance._state.popup_header_background ? instance._state.popup_background_opacity : 0;\n\tvar panel_pos = instance._state.panel_position;\n\tstyles.select(\".flourish-panel .flourish-panel-shadow\")\n\t\t.style(\"pointer-events\", \"none\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"display\", panel_pos == \"overlay\" || !instance._state.panel_shadow ? \"none\" : \"block\")\n\t\t.style(\"top\", panel_pos == \"bottom\" ? \"-3rem\" : panel_pos == \"top\" ? \"auto\" : 0)\n\t\t.style(\"right\", panel_pos == \"left\" ? \"-3rem\" : panel_pos == \"right\" ? \"auto\" : 0)\n\t\t.style(\"bottom\", panel_pos == \"top\" ? \"-3rem\" : panel_pos == \"bottom\" ? \"auto\" : 0)\n\t\t.style(\"left\", panel_pos == \"right\" ? \"-3rem\" : panel_pos == \"left\" ? \"auto\" : 0)\n\t\t.style(\"width\", panel_pos == \"left\" || panel_pos == \"right\" ? \"3rem\" : \"100%\")\n\t\t.style(\"height\", panel_pos == \"top\" || panel_pos == \"bottom\" ? \"3rem\" : \"100%\")\n\t\t.style(\"z-index\", \"-1\")\n\t\t.style(\"overflow\", \"hidden\");\n\n\tstyles.select(\".flourish-panel .flourish-panel-shadow:before\")\n\t\t.style(\"content\", \"''\")\n\t\t.style(\"display\", \"block\")\n\t\t.style(\"position\", \"absolute\")\n\t\t.style(\"width\", panel_pos == \"left\" || panel_pos == \"right\" ? \"1.5rem\" : \"100%\")\n\t\t.style(\"height\", panel_pos == \"top\" || panel_pos == \"bottom\" ? \"1.5rem\" : \"100%\")\n\t\t.style(\"border-radius\", \"50%\")\n\t\t.style(\"background\", \"rgba(0,0,0,0.3)\")\n\t\t.style(\"bottom\", panel_pos == \"bottom\" ? \"-50%\" : panel_pos == \"top\" ? \"auto\" : 0)\n\t\t.style(\"left\", panel_pos == \"left\" ? \"-50%\" : panel_pos == \"right\" ? \"auto\" : 0)\n\t\t.style(\"top\", panel_pos == \"top\" ? \"-50%\" : panel_pos == \"bottom\" ? \"auto\" : 0)\n\t\t.style(\"right\", panel_pos == \"right\" ? \"-50%\" : panel_pos == \"left\" ? \"auto\" : 0)\n\t\t.style(\"filter\", \"blur(15px)\");\n\n\tstyles.select(\".flourish-popup\")\n\t\t.style(\"pointer-events\", \"none\")\n\t\t.select(\".flourish-popup-content\")\n\t\t.style(\"pointer-events\", \"auto\")\n\t\t.style(\"max-width\", instance._state.popup_width == null ? null : instance._state.popup_width + \"rem !important\");\n\n\tstyles.select(\".flourish-popup header, .flourish-panel header\")\n\t\t.style(\"margin\", \"0\");\n\n\tstyles.select(\".flourish-popup header\")\n\t\t.style(\"font-weight\", \"bold\")\n\t\t.style(\"color\", header_block ? instance._state.popup_header_text_color : null)\n\t\t.style(\"background\", header_block ? header_background.rgb() : null)\n\t\t.style(\"padding\", instance._state.popup_padding + \"rem\")\n\t\t.style(\"border-radius\", instance._state.popup_radius + \"rem \" + instance._state.popup_radius + \"rem 0 0\");\n\n\t// If a header is not the last child that means the popup has content\n\tconst headers_with_content = styles.select(\".flourish-popup header:not(:last-child)\");\n\t// We want the padding bottom to be zero only when the popup has content and has an inline header\n\theaders_with_content.style(\"padding-bottom\", header_block ? null : \"0\");\n\n\t// Header which isn't the last child has content following it. If it's an\n\t// inline header, there should be no extra padding between it and the content.\n\tstyles.select(\".flourish-popup header:not(:last-child)\")\n\t\t.style(\"padding-bottom\", header_block ? null : \"0\");\n\n\n\tstyles.select(\".flourish-panel .flourish-panel-content-inner\")\n\t\t.style(\"overflow\", \"auto\");\n\n\tstyles.select(\".flourish-panel header\")\n\t\t.style(\"font-weight\", \"bold\")\n\t\t.style(\"margin-bottom\", \"0.5em\")\n\t\t.style(\"padding-right\", \"1rem\");\n\n\tstyles.select(\".flourish-popup .main-content\")\n\t\t.style(\"padding\", instance._state.popup_padding + \"rem\");\n\n\tstyles.select(\".flourish-popup header + .main-content\")\n\t\t.style(\"padding\", instance._state.popup_padding + \"rem\")\n\t\t.style(\"padding-top\", !header_block ? \"0\" : null);\n\n\n\tstyles.select(\".flourish-popup h1, .flourish-panel h1\")\n\t\t.style(\"font-size\", \"1em\")\n\t\t.style(\"margin\", \"0\");\n\n\n\tstyles.select(\".flourish-popup h1, .flourish-popup h2, .flourish-popup ul li\")\n\t\t.style(\"text-align\", instance._state.popup_align);\n\n\tstyles.select(\".flourish-panel h1, .flourish-panel h2, .flourish-panel ul li\")\n\t\t.style(\"text-align\", instance._state.panel_align);\n\n\tstyles.select(\".flourish-popup h2, .flourish-panel h2\")\n\t\t.style(\"font-size\", \"1em\")\n\t\t.style(\"margin\", header_block ? \"0\" : \"0 0 0.25em\")\n\t\t.style(\"opacity\", \"0.6\")\n\t\t.style(\"font-weight\", \"normal\");\n\n\tstyles.select(\".flourish-popup h2:empty, .flourish-panel h2:empty, .flourish-popup h1:empty, .flourish-panel h1:empty, .flourish-popup p:empty, .flourish-panel p:empty\")\n\t\t.style(\"display\", \"none\");\n\n\tstyles.select(\".flourish-popup p, .flourish-panel p\")\n\t\t.style(\"margin\", \"0\")\n\t\t.style(\"font-size\", \"inherit\")\n\t\t.style(\"font-weight\", \"normal\");\n\n\tstyles.select(\".flourish-popup table, .flourish-panel table\")\n\t\t.style(\"margin\", \"0\")\n\t\t.style(\"width\", \"100%\")\n\t\t.style(\"border-collapse\", \"collapse\")\n\t\t.style(\"table-layout\", \"auto\");\n\n\tstyles.select(\".flourish-popup table tr, .flourish-panel table tr\")\n\t\t.style(\"border-top\", \"1px solid #eee\");\n\n\tstyles.select(\".flourish-popup table tr:first-child, .flourish-panel table tr:first-child\")\n\t\t.style(\"border-top\", \"none\");\n\n\tstyles.select(\".flourish-popup table tr td, .flourish-panel table tr td\")\n\t\t.style(\"padding\", \"0.25em 0 0.25em 0\")\n\t\t.style(\"padding-inline-end\", \"0.25em\")\n\t\t.style(\"vertical-align\", \"top\")\n\t\t.style(\"font-size\", \"inherit\")\n\t\t.style(\"text-align\", \"start\")\n\t\t.style(\"font-weight\", \"normal\")\n\t\t.style(\"overflow\", \"hidden\")\n\t\t.style(\"word-break\", \"break-word\")\n\t\t.style(\"text-overflow\", \"ellipsis\");\n\n\tstyles.select(\".flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td\")\n\t\t.style(\"padding-bottom\", \"0\");\n\n\tstyles.select(\".flourish-popup .data-heading\")\n\t\t.style(\"font-weight\", instance._state.popup_list_label_weight)\n\t\t.style(\"display\", \"inline-block\");\n\n\tstyles.select(\".flourish-panel .data-heading\")\n\t\t.style(\"font-weight\", instance._state.panel_list_label_weight)\n\t\t.style(\"display\", \"inline-block\");\n\n\n\tstyles.select(\".flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value\")\n\t\t.style(\"text-align\", \"end\")\n\t\t.style(\"padding\", \"0.25em 0 0.25em 0\")\n\t\t.style(\"padding-inline-end\", \"0.25em\");\n\n\tstyles.select(\".flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value\")\n\t\t.style(\"padding-bottom\", \"0\");\n\n\tstyles.select(\".flourish-popup ul, .flourish-panel ul\")\n\t\t.style(\"padding\", \"0\")\n\t\t.style(\"margin\", \"0\");\n\n\tstyles.select(\".flourish-popup ul li, .flourish-panel ul li\")\n\t\t.style(\"font-size\", \"inherit\")\n\t\t.style(\"list-style\", \"none\");\n\n\tdocument.head.querySelector(\"#popup-styles\").innerHTML = styles.print();\n}\n\nexport function updateStyle(instance) {\n\tvar popup_el = instance.popup._getElement();\n\tvar popup_el_content = popup_el.querySelector(\".flourish-popup-content\");\n\n\tpopup_el_content.style.padding = \"0\";\n\tpopup_el_content.style.textAlign = instance._state.popup_align;\n\tpopup_el_content.style.color = instance._state.popup_text_color;\n\tpopup_el_content.style.fontSize = instance._state.popup_font_size + \"rem\";\n\tpopup_el_content.style.borderRadius = instance._state.popup_radius + \"rem\";\n\tpopup_el_content.addEventListener(\"click\", function() { event.stopPropagation(); });\n\n\tvar panel_el = instance.panel._getElement();\n\tvar panel_el_inner = panel_el.querySelector(\".flourish-panel-inner\");\n\tvar panel_el_content = panel_el.querySelector(\".flourish-panel-content\");\n\n\tvar rgba = color(instance._state.panel_background);\n\tpanel_el_inner.style.background = \"rgba(\" + rgba.r + \",\" + rgba.g + \",\" + rgba.b + \",\" + instance._state.panel_background_opacity + \")\";\n\tpanel_el_inner.style.borderRadius = instance._state.popup_radius + \"rem\";\n\tpanel_el_inner.style.boxShadow = instance._state.panel_position == \"overlay\" && instance._state.panel_shadow ? \"0 0 1.5rem rgba(0,0,0,0.2)\" : \"\";\n\tpanel_el_inner.addEventListener(\"click\", function() { event.stopPropagation(); });\n\n\tpanel_el_content.style.padding = instance._state.panel_padding + \"rem\";\n\tpanel_el_content.style.textAlign = instance._state.panel_align;\n\tpanel_el_content.style.color = instance._state.panel_text_color;\n\tpanel_el_content.style.fontSize = instance._state.panel_font_size + \"rem\";\n\tpanel_el_content.style.boxSizing = \"border-box\";\n\n\tvar g = popup_el.querySelector(\".flourish-popup-svg g\");\n\tg.style.fill = instance._state.popup_background;\n\tg.style.opacity = instance._state.popup_background_opacity;\n\n\tvar closer = panel_el.querySelector(\".flourish-panel-close path\");\n\tif (closer) closer.style.stroke = instance._state.panel_text_color;\n\n\tif (instance._state.popup_shadow == false) g.removeAttribute(\"filter\");\n\telse g.setAttribute(\"filter\", \"url(#dropshadow-\" + instance.popup.unique_id + \")\");\n\tg.querySelector(\"rect\").setAttribute(\"rx\", instance._state.popup_radius + \"rem\");\n\tg.querySelector(\"path\").style.display = (instance._state.popup_pointer ? \"block\" : \"none\");\n\n\tappendStyles(instance);\n}\n\n","import Popup from \"@flourish/popup\";\nimport Panel from \"./panel\";\n\nimport DEFAULTS from \"./defaults\";\nimport { getPopupHTML, getPanelHTML } from \"./html\";\nimport { updateStyle } from \"./style\";\n\nfunction InfoPopup(state, panel_container, popup_container) {\n\tvar instance = this;\n\tthis._state = state;\n\tthis._popup_default_template = null;\n\tthis._panel_default_template = null;\n\tthis._title_key = \"name\";\n\tthis._subtitle_key = null;\n\tthis._first_load = true;\n\tthis._on_panel_close = null;\n\tthis._show_default_content_timer = null;\n\tthis._panel_container = panel_container || document.body;\n\tthis._popup_container = popup_container || document.body;\n\tthis._popup_directions = [\"top\", \"bottom\", \"left\", \"right\"];\n\tthis._getLockedPosition = function() { return null; };\n\n\tfor (var key in DEFAULTS) {\n\t\tif (state[key] == undefined) state[key] = DEFAULTS[key];\n\t}\n\n\tthis.panel = Panel().container(this._panel_container).on(\"close\", function() {\n\t\tinstance._state.locked_id = null;\n\t\tinstance.popup.hide();\n\t\tif (typeof instance._on_panel_close == \"function\") instance._on_panel_close();\n\t});\n\tthis.popup = Popup().container(this._popup_container).point(0, 0).draw().hide();\n}\n\n// ============ //\n// INIT METHODS //\n// ============ //\n\nInfoPopup.prototype.getLockedPosition = function(getLockedPositionFunction) {\n\tif (typeof getLockedPositionFunction != \"function\") {\n\t\tconsole.error(\"Invalid function passed to @flourish/info-popup getLockedPosition\");\n\t}\n\telse this._getLockedPosition = getLockedPositionFunction;\n\treturn this;\n};\n\n// ====== //\n// UDPATE //\n// ====== //\n\nInfoPopup.prototype.update = function(callback) {\n\tif (this._state.locked_id !== null && this._state.mode != \"none\") {\n\t\tvar selected = this._getLockedPosition(this._state.locked_id);\n\t\tif (selected) this.click(selected[0], selected[1], this._state.locked_id, callback);\n\t\telse console.warn(\"@flourish/info-popup: failed to return value from getLockedPosition function\");\n\t}\n\telse this.clickout();\n};\n\n// ============= //\n// EVENT METHODS //\n// ============= //\n\nfunction disablePopupPointerEvents(instance) {\n\tinstance.popup._getElement().querySelector(\".flourish-popup-content\").style.pointerEvents = \"none\";\n}\n\nfunction enablePopupPointerEvents(instance) {\n\tinstance.popup._getElement().querySelector(\".flourish-popup-content\").style.pointerEvents = \"auto\";\n}\n\nInfoPopup.prototype.click = function(coords_or_node, d, id, callback) {\n\tif (this._state.mode == \"none\") return;\n\tvar target = this._state.mode == \"popup\" ? \"popup\" : \"panel\";\n\tif (this._checkIfPopupIsEmpty(d, target)) {\n\t\ttarget === \"panel\" ? this.hidePanel() : this.hidePopup();\n\t\treturn;\n\t}\n\t// TODO: Check if popup content is empty\n\tthis._point(coords_or_node);\n\tif (id != undefined) {\n\t\tthis._state.locked_id = id;\n\t\tenablePopupPointerEvents(this);\n\t}\n\telse this._state.locked_id = null;\n\tif (target == \"panel\") {\n\t\tclearTimeout(this._show_default_content_timer);\n\t\tthis.popup.hide();\n\t\tthis._drawPanel(d, callback);\n\t}\n\telse if (target == \"popup\") {\n\t\tthis.panel.hide();\n\t\tthis._drawPopup(d, callback);\n\t}\n};\n\nInfoPopup.prototype.clickout = function() {\n\tthis._state.locked_id = null;\n\tif (this._state.mode == \"both\" || this._state.mode == \"panel\") {\n\t\tthis.popup.draw(); // call draw to resize constrainer, if necessary\n\t\tthis.popup.hide();\n\t\tif (this._state.panel_position == \"overlay\" || !this._state.panel_side_fixed) {\n\t\t\tthis.panel.hide();\n\t\t}\n\t\telse this._showDefaultPanelContent();\n\t}\n\tif (this._state.mode == \"popup\") {\n\t\tthis.panel.hide();\n\t\tthis.popup.draw(); // call draw to resize constrainer, if necessary\n\t\tthis.popup.hide();\n\t}\n};\n\nInfoPopup.prototype.touch = function(coords_or_node, d, id, callback) {\n\tthis.mouseover(coords_or_node, d, callback, true, id);\n};\n\nInfoPopup.prototype.mouseover = function(coords_or_node, d, callback, touch, touch_id) {\n\tvar target = this._state.mode == \"panel\" ? \"panel\" : \"popup\";\n\tif (this._checkIfPopupIsEmpty(d, target, this._state.mode == \"both\")) {\n\t\ttarget === \"panel\" ? this.hidePanel() : this.hidePopup();\n\t\treturn;\n\t}\n\tvar instance = this;\n\tif (this._state.mode == \"both\") {\n\t\tthis._point(coords_or_node);\n\t\tthis._drawPopup(d, callback, true);\n\t\ttouch ? enablePopupPointerEvents(this) : disablePopupPointerEvents(this);\n\t\tif (touch) {\n\t\t\tvar popup_contents = instance.popup._getElement().querySelector(\".flourish-popup-content\");\n\t\t\tpopup_contents.onclick = function() {\n\t\t\t\tinstance.click(coords_or_node, d, touch_id, callback);\n\t\t\t};\n\t\t}\n\t}\n\tif (this._state.mode == \"popup\") {\n\t\tif (this._state.locked_id !== null) return;\n\t\tdisablePopupPointerEvents(this);\n\t\tthis._point(coords_or_node);\n\t\tthis._drawPopup(d, callback);\n\t}\n\tif (this._state.mode == \"panel\") {\n\t\tif (this._state.locked_id !== null || this._state.panel_position == \"overlay\") return;\n\t\tif (!this._state.panel_side_fixed) return;\n\t\tclearTimeout(this._show_default_content_timer);\n\t\tthis._point(coords_or_node);\n\t\tthis._drawPanel(d, callback);\n\t}\n};\n\nInfoPopup.prototype.mouseout = function() {\n\tif (this._state.mode == \"both\") {\n\t\tthis.popup.hide();\n\t}\n\tif (this._state.mode == \"popup\") {\n\t\tif (this._state.locked_id !== null) return;\n\t\tthis.popup.hide();\n\t}\n\tif (this._state.mode == \"panel\") {\n\t\tif (this._state.locked_id !== null) return;\n\t\tif (this._state.panel_position == \"overlay\" || !this._state.panel_side_fixed) return;\n\t\tthis._showDefaultPanelContent();\n\t}\n};\n\n// ======= //\n// GETTERS //\n// ======= //\n\nInfoPopup.prototype.locked = function() {\n\treturn this._state.locked_id;\n};\n\nInfoPopup.prototype.mode = function () {\n\treturn this._state.mode;\n};\n\n// ====================== //\n// DATA & CONTENT METHODS //\n// ====================== //\n\nInfoPopup.prototype.setColumnNames = function(column_names) {\n\tthis._column_names = column_names;\n\n\treturn this;\n};\n\nInfoPopup.prototype._showDefaultPanelContent = function () {\n\tvar instance = this;\n\tclearTimeout(this._show_default_content_timer);\n\t// This delays the return to the default content by 100ms, to avoid\n\t// a \"strobe\" effect if you are quickly moving in and out of data points\n\t// e.g. on a map\n\tthis._show_default_content_timer = setTimeout(function () {\n\t\tinstance.panel.html(instance._state.panel_side_default_content);\n\t\tinstance._drawPanel();\n\t}, 100);\n\t// We do, however, immediately call the drawPanel function to make sure\n\t// the margins() measurement is correct, rather than stuck with the old\n\t// values at the time of being called.\n\tinstance._drawPanel();\n};\n\nInfoPopup.prototype._checkIfPopupIsEmpty = function (d, target, teaser) {\n\tvar popup_content = target == \"panel\" ? getPanelHTML(this, d) : getPopupHTML(this, d, teaser);\n\treturn popup_content.trim() == \"\";\n};\n\n// =================== //\n// DRAW & HIDE METHODS //\n// =================== //\n\nInfoPopup.prototype.onPanelClose = function(f) {\n\tthis._on_panel_close = f;\n\treturn this;\n};\n\nInfoPopup.prototype._drawPopup = function(d, callback, teaser) {\n\tif (d) this.popup.html(getPopupHTML(this, d, teaser));\n\tupdateStyle(this);\n\tthis.popup.draw();\n\tif (callback) callback(this.popup._getElement(), d);\n\treturn this;\n};\n\nInfoPopup.prototype._drawPanel = function(d, callback) {\n\tvar instance = this;\n\tupdateStyle(instance);\n\tthis.panel\n\t\t.open_duration(this._state.panel_open_duration)\n\t\t.close_duration(this._state.panel_close_duration)\n\t\t.width_overlay(this._state.panel_width_overlay)\n\t\t.height_overlay(this._state.panel_height_overlay)\n\t\t.vertical_position(this._state.panel_vertical_position)\n\t\t.width_side(this._state.panel_width_side)\n\t\t.height_side(this._state.panel_height_side)\n\t\t.position(this._state.panel_position)\n\t\t.max_width(this._state.panel_max_width)\n\t\t.max_height(this._state.panel_max_height)\n\t\t.closeable(this._state.panel_position == \"overlay\" || !this._state.panel_side_fixed);\n\tif (d === undefined) this.panel.draw();\n\telse this.panel.html(getPanelHTML(instance, d, \"panel\")).draw();\n\tif (callback) callback(this.panel._getElement(), d);\n\treturn this;\n};\n\nInfoPopup.prototype.hidePanel = function() {\n\tthis.panel.hide();\n\treturn this;\n};\n\nInfoPopup.prototype.hidePopup = function () {\n\tthis.popup.hide();\n\treturn this;\n};\n\n// ================== //\n// POSITIONAL METHODS //\n// ================== //\n\nInfoPopup.prototype.popupDirections = function(value) {\n\tif (!value) return this._popup_directions.slice();\n\tthis._popup_directions = value;\n\treturn this;\n};\n\nInfoPopup.prototype.margins = function() {\n\treturn this.panel.margins();\n};\n\nInfoPopup.prototype._getBiggestGap = function(node_bbox) {\n\tvar constrainer_bbox = this._popup_container.getBoundingClientRect();\n\tvar best_side, biggest_gap = 0, arrow_directions;\n\tvar gaps = {\n\t\t\"right\": ((constrainer_bbox.width + constrainer_bbox.left) - (node_bbox.width + node_bbox.left)) / constrainer_bbox.width,\n\t\t\"bottom\": ((constrainer_bbox.height + constrainer_bbox.top) - (node_bbox.height + node_bbox.top)) / constrainer_bbox.height,\n\t\t\"left\": (node_bbox.left - constrainer_bbox.left) / constrainer_bbox.width,\n\t\t\"top\": (node_bbox.top - constrainer_bbox.top) / constrainer_bbox.height,\n\t};\n\n\n\tvar all_arrow_directions = {\n\t\t\"right\": [\"left\", \"leftFlexible\", \"topLeft\", \"bottomLeft\", \"bottomFlexible\", \"bottom\", \"topFlexible\", \"top\", \"bottomRight\", \"topRight\", \"rightFlexible\", \"right\"],\n\t\t\"left\": [\"right\", \"rightFlexible\", \"topRight\", \"bottomRight\", \"top\", \"topFlexible\", \"bottom\", \"bottomFlexible\", \"bottomLeft\", \"topLeft\", \"leftFlexible\", \"left\"],\n\t\t\"top\": [\"bottom\", \"bottomFlexible\", \"bottomRight\", \"bottomLeft\", \"rightFlexible\", \"leftFlexible\", \"right\", \"left\", \"topRight\", \"topLeft\", \"topFlexible\", \"top\"],\n\t\t\"bottom\": [\"top\", \"topFlexible\", \"topLeft\", \"topRight\", \"left\", \"right\", \"leftFlexible\", \"rightFlexible\", \"bottomLeft\", \"bottomRight\", \"bottomFlexible\", \"bottom\"]\n\t};\n\n\tfor (var side in gaps) {\n\t\tif (this._popup_directions.indexOf(side) < 0) continue;\n\t\tif (gaps[side] > biggest_gap) {\n\t\t\tbiggest_gap = gaps[side];\n\t\t\tbest_side = side;\n\t\t\tarrow_directions = all_arrow_directions[side];\n\t\t}\n\t}\n\n\tvar x = node_bbox.left, y = node_bbox.top;\n\tif (best_side == \"left\" || best_side == \"right\") y += node_bbox.height * 0.5;\n\telse if (best_side == \"bottom\") y += node_bbox.height;\n\n\tif (best_side == \"top\" || best_side == \"bottom\") x += node_bbox.width * 0.5;\n\telse if (best_side == \"right\") x += node_bbox.width;\n\n\treturn {\n\t\t\"side\": best_side,\n\t\t\"arrow_directions\": arrow_directions,\n\t\t\"x\": x,\n\t\t\"y\": y\n\t};\n};\n\n// Point should not often be required by template authors, who\n// should generally use the click or mouseover methods\nInfoPopup.prototype._point = function(coords_or_node) {\n\tvar x, y, arrow_directions = this._popup_directions;\n\tif (Array.isArray(coords_or_node)) {\n\t\tx = coords_or_node[0];\n\t\ty = coords_or_node[1];\n\t}\n\telse if (coords_or_node && coords_or_node.getBoundingClientRect) {\n\t\tvar node_rect = coords_or_node.getBoundingClientRect();\n\t\tvar best_side = this._getBiggestGap(node_rect);\n\t\tx = best_side.x;\n\t\ty = best_side.y;\n\t\tarrow_directions = best_side.arrow_directions;\n\t}\n\telse {\n\t\tconsole.warn(\"@flourish/info-popup: Invalid positional value passed in point function, should be a coordinates array, or a node. Current value is\", coords_or_node);\n\t\treturn this;\n\t}\n\tthis.panel.point(coords_or_node);\n\tthis.popup.directions(arrow_directions).point(x, y);\n\treturn this;\n};\n\n// ============== //\n// CONFIG METHODS //\n// ============== //\n\nInfoPopup.prototype.popupDefaultTemplate = function(template) {\n\tif (template != undefined) {\n\t\tthis._popup_default_template = template;\n\t\treturn this;\n\t}\n\telse return this._popup_default_template;\n};\n\nInfoPopup.prototype.panelDefaultTemplate = function(template) {\n\tif (template != undefined) {\n\t\tthis._panel_default_template = template;\n\t\treturn this;\n\t}\n\telse return this._panel_default_template;\n};\n\nInfoPopup.prototype.titleKey = function(key) {\n\tif (key != undefined) {\n\t\tthis._title_key = key;\n\t\treturn this;\n\t}\n\telse return this._title_key;\n};\n\nInfoPopup.prototype.subtitleKey = function(key) {\n\tif (key != undefined) {\n\t\tthis._subtitle_key = key;\n\t\treturn this;\n\t}\n\telse return this._subtitle_key;\n};\n\n// ==== //\n// INIT //\n// ==== //\n\nexport default function(state, panel_container, popup_container) {\n\treturn new InfoPopup(state, panel_container, popup_container);\n}\n","/**\n * @file\n * The update function is called whenever the user changes a data table or settings\n * in the visualisation editor, or when changing slides in the story editor.\n *\n * Tip: to make your template work nicely in the story editor, ensure that all user\n * interface controls such as buttons and sliders update the state and then call update.\n */\nimport state from \"./state\";\nimport update from \"./update\";\nimport data from \"./data\";\nimport { isPale, wrapStringToLines } from \"@flourish/pocket-knife\"\nimport { getMaxTextWidth } from '../parseData';\nimport * as d3 from 'd3';\nimport { timeFormat, } from 'd3-time-format';\nimport {layout, chart, annoLabel, chart_layout, dateFormat, parseDate, columnNames, formattedPolls, parties, colors, formattedAverages, valueExtent, plotData, legendData, annoData} from \"./draw\";\nimport { legend_container, legend_categorical } from \"../init\";\nimport initialisePopup from \"@flourish/info-popup\";\nimport { createContinuousColorLegend } from \"@flourish/legend\";\n\n// Helper function to position labels\nconst positionLabels = (labels, spacing, alpha) => {\n\tlabels.each(d1 => {\n\t\tconst y1 = d1.position;\n\t\tconst a1 = d1.average;\n\n\t\tlabels.each(d2 => {\n\t\t\tconst y2 = d2.position;\n\t\t\tconst a2 = d2.average;\n\n\t\t\t/* Difference between current averages for each party\n\t\t\tThis ensures the parties are always in the correct order */\n\t\t\tconst deltaA = a1 - a2;\n\t\t\t/* Difference between current positions\n\t\t\tWhen this is below the required minimum spacing the positioning\n\t\t\talgorithm should stop */\n\t\t\tconst deltaY = y1 - y2;\n\n\t\t\tif (d1 !== d2 && Math.abs(deltaY) <= spacing) {\n\t\t\t\tconst sign = deltaA > 0 ? -1 : 1;\n\t\t\t\tconst adjust = sign * alpha;\n\n\t\t\t\td1.position = +y1 + adjust;\n\t\t\t\td2.position = +y2 - adjust;\n\n\t\t\t\tpositionLabels(labels, spacing, alpha);\n\t\t\t}\n\t\t});\n\t});\n}\n//function to remove item from array\nfunction removeItemOnce(arr, value) {\n\tvar index = arr.indexOf(value);\n\tif (index > -1) {\n\t\tarr.splice(index, 1);\n\t}\n\treturn arr;\n}\n\nlet displayData;\n\nexport default function() {\n\tcolors.updateColorScale(columnNames)\n\t\n\t// legend_categorical\n\t// \t.data(legendData) // See explanation below\n\t// \t.on(\"click\", function(d, i) { // Add event listener to legend items (eg. \"click\", \"mouseover\", etc.)\n\t// \t\tconsole.log(this, d.label, i); // (Legend item node element, {label: \"Brazil\", color: \"#333333\", index: \"0\"}, index)\n\t// \t\tif(state.displayValues.includes(d.label)) {\n\t// \t\t\tremoveItemOnce(state.displayValues, d.label)\n\t// \t\t}\n\t// \t\telse state.displayValues.push(d.label)\n\t// \t\td3.select(this).style('opacity',0.5)\n\t// \t\tconsole.log('displayValues', state.displayValues)\n\t// \t\tdisplayData = plotData.filter(d => state.displayValues.includes(d.displayNameDesk))\n\t// \t\tupdate()\n\t// \t});\n\t// legend_container.update()\n\tlayout.update()\n\n\tvar width = layout.getPrimaryWidth()\n\tvar height = layout.getPrimaryHeight()\n\tchart\n\t\t.attr('width', width)\n\t\t.attr('height', height)\n\t//get the current frame break name\n\tconst breaks = width > state.layout.breakpoint_mobile_small && width <= state.layout.breakpoint_mobile_big ? 'mobile_small'\n\t\t: width > state.layout.breakpoint_mobile_big && width <= state.layout.breakpoint_tablet ? 'mobile_big'\n\t\t: width > state.layout.breakpoint_tablet && width <= state.layout.breakpoint_desktop ? 'tablet'\n\t\t: width > state.layout.breakpoint_desktop && width <= state.layout.breakpoint_big_screen ? 'desktop'\n\t\t: 'big_screen'\n\t\n\tchart_layout.width(width)\n\tchart_layout.height(height)\n\t\n\tconst breakpoint = state.layout.breakpoint_tablet\n\t//returns the current body text size. (Strangely this expressed as a % of footer size when returned)\n\tconst fontSize = state.layout['font_size_' + breaks]\n\t//use the body size text as rem expressed in px not em\n\tconst rem = layout.remToPx(fontSize)/100\n\tconst format = d3.format(\".1f\");\n\n\tconst popup = initialisePopup(state.popup);\n\n\tconst averagesExtent = d3.extent(formattedAverages, d => d.date);\n\tconst pollsExtent = d3.extent(formattedPolls, d => d.date);\n\tconst dateExtent = d3.extent((averagesExtent.concat(pollsExtent)), d => d);\n\tconst dotSize = width < breakpoint ? state.polls.smallSize : state.polls.largeSize\n\tconst dotOpacity = width < breakpoint ? state.polls.smallOpacity : state.polls.largeOpacity\n\tconst lineWidth = width < breakpoint ? state.averages.smallStrokeWidth : state.averages.largeStrokeWidth\n\tconst lineOpacity = width < breakpoint ? state.averages.smallOpacity : state.averages.largeOpacity\n\tconst moeOpacity = width < breakpoint ? state.moe.opacityMob : state.moe.opacityDesk\n\t//Calculate the width need for the righ chart_layput margin\n\t//This needs to be passed to the chrt-layout EVERY time it is updated\n\tconst rightLabelWidth =  getMaxTextWidth(columnNames, rem + 'px Metric') + (rem * 3.5)\n\tconst xAlign = state.x.axis_position\n\n\tdateExtent[0] = state.x.datetime_min ? parseDate(state.x.datetime_min) : dateExtent[0];\n\tdateExtent[1] = state.x.datetime_max ? parseDate(state.x.datetime_max) : dateExtent[1];\n\tconst numDays = Math.floor((dateExtent[1] - dateExtent[0]) / 86400000);\n\tconsole.log('displayData', displayData)\n\tdisplayData = displayData ? displayData: plotData\n\n\tconst filteredData = displayData.map(({ dots, lines,...d }) => {\n\t\t\treturn {\n\t\t\t\t...d,\n\t\t\t\tdots: dots.filter(el => el.date > dateExtent[0] && el.date , dateExtent[1]),\n\t\t\t\tlines: lines.filter(el => el.date > dateExtent[0] && el.date , dateExtent[1]),\n\t\t\t};\n\t\t})\n\tconsole.log('filteredData', filteredData)\n\n\tconst xTixkFormat = state.tickFormat? state.tickFormat\n\t: numDays < 1095 ? '%b %y' : '%Y';\n\n\tchart_layout.yData([0,valueExtent[1]])\n\t//pass the date formatting function to the chart_layout. User defined date min and max will not work properly without this\n\tchart_layout.xDatetimeParse(parseDate);\n\tchart_layout.xData(dateExtent);\n\tchart_layout.xFormat(timeFormat(xTixkFormat));\n\n\t//chart_layout.xFormat(getDateFormat('years', chart_layout.xTicks()))\n\tif(xAlign == 'bottom') {\n\t\tchart_layout.update({margins: {top: 50, right: rightLabelWidth}})\n\t}\n\telse {chart_layout.update({margins: {bottom: 50, right: rightLabelWidth}})}\n\n\tconst plot = chart_layout.data_foreground\n\tconst popHolder = plot.append('g')\n\tconst yScale = chart_layout.yScale()\n\tconst xScale = chart_layout.xScale()\n\n\t//set up line interpolation and line drawing function\n\tconst areaData = d3.area()\n\t\t.x(d => xScale(d.x))\n\t\t.y1(d => yScale(d.y1))\n\t\t.y0(d => yScale(d.y0));\n\t\n\t//Add a group for each annotation line\n\tplot.selectAll('.annoHolder')\n\t\t.data(annoData)\n\t\t.enter()\n\t\t.append('g')\n\t\t.attr('class','annoHolder')\n\t\n\tplot.selectAll('.annoHolder').selectAll('line')\n\t\t.data(annoData)\n\t\t.join(\n\t\tfunction(enter) {\n\t\t\treturn enter\n\t\t\t.append('line')\n\t\t\t.attr('x1', d => xScale(d.date))\n\t\t\t.attr('x2', d => xScale(d.date))\n\t\t\t.attr('y1', 0)\n\t\t\t.attr('y2', height)\n\t\t},\n\t\tfunction(update) {\n\t\t\treturn update\n\t\t\t.attr('x1', d => xScale(d.date))\n\t\t\t.attr('x2', d => xScale(d.date))\n\t\t\t.attr('y1', 0)\n\t\t\t.attr('y2', height)\n\t\t},\n\t\tfunction(exit) {\n\t\treturn exit\n\t\t\t.transition()\n\t\t\t.on('end', function() {\n\t\t\td3.select(this).remove()\n\t\t\t});\n\t\t})\n\t.style('stroke', '#66605C')\n\t.style('stroke-width',1)\n\n\t//The label added to its own g element in the primary chart svg so as to avoid being cropped off\n\tannoLabel.selectAll('text')\n\t\t.data(annoData)\n\t\t.join(\n\t\tfunction(enter) {\n\t\t\treturn enter\n\t\t\t.append('text')\n\t\t\t.attr('x', d => xScale(d.date))\n\t\t\t.attr('y', xAlign == 'bottom' ? chart_layout.margins.top - (rem * .5):\n\t\t\t\tchart_layout.height() - chart_layout.margins.bottom + (rem *.8))\n\t\t},\n\t\tfunction(update) {\n\t\t\treturn update\n\t\t\t.attr('x', d => xScale(d.date))\n\t\t\t.attr('y', xAlign == 'bottom' ? chart_layout.margins.top - (rem * .5):\n\t\t\t\tchart_layout.height() - chart_layout.margins.bottom + (rem *.8))\n\t\t},\n\t\tfunction(exit) {\n\t\t\treturn exit\n\t\t\t.transition()\n\t\t\t.text('')\n\t\t\t.attr('opacity', 0)\n\t\t\t.on('end', function() {\n\t\t\t\td3.select(this).remove()\n\t\t\t});\n\t\t})\n\t.text(d => d.annotation)\n\t.style('text-anchor', 'middle')\n\t.style('fill', '#66605C')\n\t.attr('font-weight', 400)\n\n\t//Add Margin of error\n\tplot.selectAll('.areas')\n\t\t.data(filteredData)\n\t\t.join(\n\t\tfunction(enter) {\n\t\t\treturn enter\n\t\t\t.append('path')\n\t\t\t.attr('d', d => areaData(d.areas))\n\t\t},\n\t\tfunction(update) {\n\t\t\treturn update\n\t\t\t.attr('d', d => areaData(d.areas))\n\t\t},\n\t\tfunction(exit) {\n\t\t\treturn exit\n\t\t\t.transition()\n\t\t\t.duration(100)\n\t\t\t.on('end', function() {\n\t\t\t\td3.select(this).remove()\n\t\t\t});\n\t\t},\n\t\t)\n\t.attr('class', 'areas')\n\t.attr('fill', d => colors.getColor(d.party))\n\t.attr('id', d => d.party)\n\t.attr('opacity', moeOpacity)\n\n\t//Add a group for each series of dots\n\tplot.selectAll('.dotHolder')\n\t\t.data(filteredData)\n\t\t.enter()\n\t\t.append('g')\n\t\t.attr('class','dotHolder')\n\t\n\t//Add the polling circles\n\tplot.selectAll('.dotHolder').selectAll('circle')\n\t\t.data(d => d.dots)\n\t\t.join(\n\t\t\tfunction(enter) {\n\t\t\treturn enter\n\t\t\t\t.append('circle')\n\t\t\t\t.attr('cx', d => xScale(d.date))\n\t\t\t\t.attr('cy', d => yScale(d.value))\n\t\t\t},\n\t\t\tfunction(update) {\n\t\t\treturn update\n\t\t\t\t.attr('cx', d => xScale(d.date))\n\t\t\t\t.attr('cy', d => yScale(d.value))\n\t\t\t},\n\t\t\tfunction(exit) {\n\t\t\treturn exit\n\t\t\t\t.transition()\n\t\t\t\t.on('end', function() {\n\t\t\t\td3.select(this).remove()\n\t\t\t\t});\n\t\t\t}\n\t\t\t)\n\t\t.attr('r', dotSize)\n\t\t.attr('fill', d => colors.getColor(d.name))\n\t\t.attr('opacity', dotOpacity)\n\t\n\n\t//set up line interpolation and line drawing function\n\tlet interpolation = d3.curveLinear;\n\tconst lineData = d3.line()\n\t\t.defined(d => d)\n\t\t.curve(interpolation)\n\t\t.x(d => xScale(d.date))\n\t\t.y(d => yScale(d.value));\n\t\n\tplot.selectAll('.lines')\n\t\t.data(filteredData)\n\t\t.join(\n\t\tfunction(enter) {\n\t\t\treturn enter\n\t\t\t.append('path')\n\t\t\t.attr('d', d => lineData(d.lines))\n\t\t},\n\t\tfunction(update) {\n\t\t\treturn update\n\t\t\t.attr('d', d => lineData(d.lines))\n\t\t},\n\t\tfunction(exit) {\n\t\t\treturn exit\n\t\t\t.transition()\n\t\t\t.duration(100)\n\t\t\t.attr('d', d => lineData(d.lines))\n\t\t\t.on('end', function() {\n\t\t\t\td3.select(this).remove()\n\t\t\t});\n\t\t},\n\t\t)\n\t\t.attr('class', 'lines')\n\t\t.attr('fill', 'none')\n\t\t.attr('stroke-width', lineWidth)\n\t\t.attr('stroke', d => colors.getColor(d.party))\n\t\t.attr('id', d => d.party)\n\t\t.attr('opacity', lineOpacity)\n\t\n\t//Add a group for each series of popup circles\n\tplot.selectAll('.popHolder')\n\t\t.data(filteredData)\n\t\t.enter()\n\t\t.append('g')\n\t\t.attr('class','popHolder')\n\tconsole.log(filteredData)\n\n\tpopup\n\t\t.setColumnNames({\n\t\t\tDate: 'Date',\n\t\t\tValue: 'Value',\n\t\t})\n\t\t.update()\n\tconst popFormat = '%b %d %Y'\n\tconst popDate = timeFormat(popFormat)\n\t\n\tconst filteredAverages = formattedAverages.filter((d) => {\n\t\treturn d.date >= dateExtent[0] && d.date <= dateExtent[1]\n\t})\n\tconsole.log(columnNames)\n\tconst popColumns = \n\t\n\t//Add lines to trigger popup\n\tplot.selectAll('.popHolder').selectAll('line')\n\t\t.data(filteredAverages)\n\t\t.join(\n\t\tfunction(enter) {\n\t\t\treturn enter\n\t\t\t.append('line')\n\t\t\t.attr('x1', d => xScale(d.date))\n\t\t\t.attr('x2', d => xScale(d.date))\n\t\t\t.attr('y1', 0)\n\t\t\t.attr('y2', height)\n\t\t\t.on(\"mouseover\",  function(ev, d) {\n\t\t\t\tlet popUps = columnNames.map((el, i) => {\n\t\t\t\t\tconst partyData = parties.filter(d => d.party === el);\n\t\t\t\t\treturn{\n\t\t\t\t\t\tname: el,\n\t\t\t\t\t\tdisplayName: partyData[0].displayNameDesktop,\n\t\t\t\t\t\tvalue: d[el],\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t\t.filter(d  => d.value !== '' )\n\t\t\t\t\t.sort((a, b) => b.value - a.value)\n\t\t\t\tlet popColumns = {name: 'name'}\n\t\t\t\tpopUps.map((el, i) => {\n\t\t\t\t\tpopColumns[el.displayName] = el.displayName\n\t\t\t\t})\n\t\t\t\tpopup.setColumnNames(popColumns)\n\t\t\t\t\t.update()\n\t\t\t\tlet popData = {name: popDate(d.date)}\n\t\t\t\tpopUps.map((el, i) => {\n\t\t\t\t\tpopData[el.displayName] = format(el.value)\n\t\t\t\t})\t\t\t\t\n\t\t\t\tconst el = this\n\t\t\t\tconst popLine = d3.select(this);\n\t\t\t\tpopLine.attr('opacity', 1)\n\t\t\t\tpopup.mouseover(el, popData)\n\t\t\t})\n\t\t\t.on(\"mouseout\", function() {\n\t\t\t\tconst popLine = d3.select(this);\n\t\t\t\tpopLine.attr('opacity', 0)\n\t\t\t\tpopup.mouseout();\n\t\t\t})\n\t\t},\n\t\tfunction(update) {\n\t\t\treturn update\n\t\t\t.attr('x1', d => xScale(d.date))\n\t\t\t.attr('x2', d => xScale(d.date))\n\t\t\t.attr('y1', 0)\n\t\t\t.attr('y2', height)\n\t\t},\n\t\tfunction(exit) {\n\t\treturn exit\n\t\t\t.transition()\n\t\t\t.on('end', function() {\n\t\t\td3.select(this).remove()\n\t\t\t});\n\t\t})\n\t.attr('opacity', 0)\n\t.style('stroke', '#66605C')\n\t.style('stroke-width',1)\n\t\n\t\n\t// //Add the popup circles\n\t// plot.selectAll('.popHolder').selectAll('circle')\n\t// \t.data(d => d.lines)\n\t// \t.join(\n\t// \t\tfunction(enter) {\n\t// \t\t\t//let popData = {Name: 'not yet added', Date: \"01/01/2017\", Value: 54,}\n\t// \t\treturn enter\n\t// \t\t\t.append('circle')\n\t// \t\t\t.attr('cx', d => xScale(d.date))\n\t// \t\t\t.attr('cy', d => yScale(d.value))\n\t// \t\t\t.on(\"mouseover\",  function(data, popData) {\n\t// \t\t\t\tconst el = this;\n\t// \t\t\t\tconsole.log(popData)\n\t// \t\t\t\tpopup.mouseover(el, {\n\t// \t\t\t\t\tname: popData.displayName,\n\t// \t\t\t\t\tValue: format(popData.value) + '%',\n\t// \t\t\t\t\tDate: popDate(popData.date),\n\t// \t\t\t\t})\n\t// \t\t\t})\n\t// \t\t\t.on(\"mouseout\", function() {\n\t// \t\t\t\tpopup.mouseout();\n\t// \t\t\t})\n\t// \t\t},\n\t// \t\tfunction(update) {\n\t// \t\treturn update\n\t// \t\t\t.attr('cx', d => xScale(d.date))\n\t// \t\t\t.attr('cy', d => yScale(d.value))\n\t// \t\t},\n\t// \t\tfunction(exit) {\n\t// \t\treturn exit\n\t// \t\t\t.transition()\n\t// \t\t\t.on('end', function() {\n\t// \t\t\td3.select(this).remove()\n\t// \t\t\t});\n\t// \t\t}\n\t// \t\t)\n\t// \t.attr('r', lineWidth/2)\n\t// \t.attr('fill', d => colors.getColor(d.name))\n\t// \t.attr('opacity', dotOpacity)\n\n\tconst lastDate = new Date(state.x.datetime_max) > averagesExtent[1] ? averagesExtent[1] :  dateExtent[1];\n\t// Set up label data\n\tconst labelData = filteredData\n\t\t.map(({ lines, party, displayNameDesk, displayNameMob, }) => {\n\t\t\tconst average = lines[lines.length - 1].value;\n\t\t\treturn {\n\t\t\t\tparty,\n\t\t\t\tdisplayNameDesk,\n\t\t\t\tdisplayNameMob,\n\t\t\t\taverage,\n\t\t\t\t// Set initial positions for each label\n\t\t\t\tposition: yScale(average),\n\t\t\t};\n\t\t})\n\t\t.sort((a, b) => b.average - a.average);\n\t\n\tchart.selectAll('.labelHolder')\n\t\t.data(labelData)\n\t\t.enter()\n\t\t.append('g')\n\t\t.attr('class','labelHolder')\n\t\n\t// Calculate new label positions recursively\n\tpositionLabels(\n\t\tchart.selectAll('.labelHolder'),\n\t\trem, // Minimum spacing between labels (increase for more space)\n\t\t0.5 // Amount to change label positon by each iteration\n\t);\n\n\tchart.selectAll('.labelHolder').selectAll('rect')\n\t\t.data(d => [d])\n\t\t.join(\n\t\tfunction(enter) {\n\t\t\treturn enter\n\t\t\t.append('rect')\n\t\t\t.attr('height', rem)\n\t\t\t.attr('y', d => d.position - (rem *.5))\n\t\t\t.attr('x', d => xScale(lastDate) + (rem * .3))\n\t\t},\n\t\tfunction(update) {\n\t\t\treturn update\n\t\t\t.attr('y', d => d.position - (rem *.5))\n\t\t\t.attr('x', d => xScale(lastDate) + (rem * .3))\n\t\t\t.attr('width', rem * .5)\n\t\t},\n\t\tfunction(exit) {\n\t\t\treturn exit\n\t\t\t.transition()\n\t\t\t.attr('width', 0)\n\t\t\t.on('end', function() {\n\t\t\t\td3.select(this).remove()\n\t\t\t});\n\t\t})\n\t.attr('fill', d => colors.getColor(d.party))\n\t.attr('height', rem)\n\t.attr('width', rem * .5)\n\n\tchart.selectAll('.labelHolder').selectAll('text')\n\t\t.data(d => [d])\n\t\t.join(\n\t\tfunction(enter) {\n\t\t\treturn enter\n\t\t\t.append('text')\n\t\t\t.attr('y', d => d.position + (rem *.3))\n\t\t\t.attr('x', d => xScale(lastDate) + (rem ))\n\t\t},\n\t\tfunction(update) {\n\t\t\treturn update\n\t\t\t.attr('y', d => d.position + (rem *.3))\n\t\t\t.attr('x', d => xScale(lastDate) + (rem))\n\t\t},\n\t\tfunction(exit) {\n\t\t\treturn exit\n\t\t\t.transition()\n\t\t\t.attr('opacity', 0)\n\t\t\t.on('end', function() {\n\t\t\t\td3.select(this).remove()\n\t\t\t});\n\t\t}\n\t\t)\n\t.attr('font-weight', 600)\n\t.style('fill',  d => colors.getColor(d.party))\n\t.text((d) =>  {\n\t\tif( breaks === 'mobile_small' || breaks === 'mobile_big') {\n\t\t\treturn  d.displayNameMob + ' ' + format(d.average)\n\t\t}\n\t\treturn d.displayNameDesk + ' ' + format(d.average)\n\t})\n\t\t\n\n\t\n\n\tlayout.update()\n\t//console.log(state.layout)\n\n\n\n\n}\n","import {path} from \"d3-path\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport line from \"./line.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function() {\n  var x0 = pointX,\n      x1 = null,\n      y0 = constant(0),\n      y1 = pointY,\n      defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null;\n\n  function area(data) {\n    var i,\n        j,\n        k,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer,\n        x0z = new Array(n),\n        y0z = new Array(n);\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) {\n          j = i;\n          output.areaStart();\n          output.lineStart();\n        } else {\n          output.lineEnd();\n          output.lineStart();\n          for (k = i - 1; k >= j; --k) {\n            output.point(x0z[k], y0z[k]);\n          }\n          output.lineEnd();\n          output.areaEnd();\n        }\n      }\n      if (defined0) {\n        x0z[i] = +x0(d, i, data), y0z[i] = +y0(d, i, data);\n        output.point(x1 ? +x1(d, i, data) : x0z[i], y1 ? +y1(d, i, data) : y0z[i]);\n      }\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  function arealine() {\n    return line().defined(defined).curve(curve).context(context);\n  }\n\n  area.x = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), x1 = null, area) : x0;\n  };\n\n  area.x0 = function(_) {\n    return arguments.length ? (x0 = typeof _ === \"function\" ? _ : constant(+_), area) : x0;\n  };\n\n  area.x1 = function(_) {\n    return arguments.length ? (x1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : x1;\n  };\n\n  area.y = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), y1 = null, area) : y0;\n  };\n\n  area.y0 = function(_) {\n    return arguments.length ? (y0 = typeof _ === \"function\" ? _ : constant(+_), area) : y0;\n  };\n\n  area.y1 = function(_) {\n    return arguments.length ? (y1 = _ == null ? null : typeof _ === \"function\" ? _ : constant(+_), area) : y1;\n  };\n\n  area.lineX0 =\n  area.lineY0 = function() {\n    return arealine().x(x0).y(y0);\n  };\n\n  area.lineY1 = function() {\n    return arealine().x(x0).y(y1);\n  };\n\n  area.lineX1 = function() {\n    return arealine().x(x1).y(y0);\n  };\n\n  area.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), area) : defined;\n  };\n\n  area.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), area) : curve;\n  };\n\n  area.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), area) : context;\n  };\n\n  return area;\n}\n","function fillInDefaults(target, defaults) {\n\tObject.keys(defaults).forEach(function(key) {\n\t\tif (target[key] === undefined) target[key] = defaults[key];\n\t});\n\treturn target;\n}\n\nexport { fillInDefaults };\n","var X_DEFAULTS = Object.freeze({\n\taxis_position: \"bottom\",\n\ty_axis_position: \"\",\n\n\tnumeric_scale_type: \"linear\",\n\tnice: true,\n\tflip: false,\n\tzero_axis: \"auto\",\n\tlinear_min: null,\n\tlinear_max: null,\n\tlog_min: null,\n\tlog_max: null,\n\tdatetime_min: \"\",\n\tdatetime_max: \"\",\n\n\tline_visible: true,\n\tline_and_tick_color: \"#eeeeee\",\n\tline_and_tick_width: 0.1,\n\n\ttick_side: \"out\",\n\ttick_mode: \"auto\",\n\ttick_number: 5,\n\ttick_custom: \"\",\n\ttick_length: 0.5,\n\ttick_padding: 0.25,\n\tedge_padding: 50,\n\n\ttick_label_position: \"default\",\n\ttick_label_size: 0.9,\n\ttick_label_color: \"#aaaaaa\",\n\ttick_label_angle: \"45\",\n\ttick_label_weight: \"normal\",\n\ttick_label_space_mode: \"auto\",\n\ttick_label_space: 10,\n\ttick_label_max_lines: 2,\n\t// Perhaps this should be nullable; then if you null it\n\t// it is set to 1 for continuous scales and in discrete scales\n\t// we do set it automatically to Math.floor(step/line_height).\n\t// This way we'd always favour showing more discrete ticks over\n\t// adding new lines.\n\ttick_label_line_height: 1.1,\n\n\tgridlines_visible: false,\n\tgridline_color: \"#eeeeee\",\n\tgridline_width: 0.1,\n\tgridline_style: \"solid\",\n\tgridline_category_dividers: false,\n\tgridline_category_dividers_extend: false,\n\n\ttitle_mode: \"auto\",\n\ttitle: \"\",\n\ttitle_color: \"#aaaaaa\",\n\ttitle_size: 1.1,\n\ttitle_weight: \"normal\",\n\ttitle_padding: 0.6\n});\n\n\nexport { X_DEFAULTS };\n","import { fillInDefaults } from \"./common\";\n\n\nvar Y_DEFAULTS = Object.freeze({\n\taxis_visible: true,\n\n\tnumeric_scale_type: \"linear\",\n\tnice: true,\n\tflip: false,\n\tzero_axis: \"auto\",\n\tlinear_min: null,\n\tlinear_max: null,\n\tlog_min: null,\n\tlog_max: null,\n\tdatetime_min: \"\",\n\tdatetime_max: \"\",\n\n\tline_visible: true,\n\tline_and_tick_color: \"#eeeeee\",\n\tline_and_tick_width: 0.1,\n\n\ttick_side: \"out\",\n\ttick_mode: \"auto\",\n\ttick_number: 5,\n\ttick_custom: \"\",\n\ttick_length: 0.5,\n\ttick_padding: 0.25,\n\tedge_padding: 50,\n\n\ttick_label_position: \"default\",\n\ttick_label_size: 0.9,\n\ttick_label_color: \"#aaaaaa\",\n\ttick_label_angle: \"0\",\n\ttick_label_weight: \"normal\",\n\ttick_label_space_mode: \"auto\",\n\ttick_label_space: 10,\n\ttick_label_max_lines: 2,\n\ttick_label_line_height: 1.1,\n\n\tgridlines_visible: true,\n\tgridline_color: \"#eeeeee\",\n\tgridline_width: 0.1,\n\tgridline_style: \"solid\",\n\tgridline_category_dividers: false,\n\tgridline_category_dividers_extend: false,\n\n\ttitle_mode: \"auto\",\n\ttitle: \"\",\n\ttitle_color: \"#aaaaaa\",\n\ttitle_size: 1.1,\n\ttitle_weight: \"normal\",\n\ttitle_padding: 0.6\n});\n\n\nvar Y2_DEFAULTS = Object.freeze(\n\tfillInDefaults({ axis_visible: false }, Y_DEFAULTS)\n);\n\n\nexport { Y_DEFAULTS, Y2_DEFAULTS };\n","var BACKGROUND_DEFAULTS = Object.freeze({\n\tbackground_color_enabled: false,\n\tbackground_color: \"#f5f5f5\",\n\tbackground_image_enabled: false,\n\tbackground_image_src: \"\",\n\tbackground_image_size: \"stretch\",\n\tbackground_image_position: \"xMidYMid\",\n});\n\n\nexport { BACKGROUND_DEFAULTS };\n","import { fillInDefaults } from \"./common\";\nimport { X_DEFAULTS } from \"./x\";\nimport { Y_DEFAULTS, Y2_DEFAULTS } from \"./y\";\nimport { BACKGROUND_DEFAULTS } from \"./background\";\n\n\nfunction _assignProperties(state, obj_name, default_obj) {\n\tif (!state[obj_name]) state[obj_name] = {};\n\tfillInDefaults(state[obj_name], default_obj);\n}\n\n\nfunction prepareState(state) {\n\tstate = state || {};\n\tvar assignProperties = _assignProperties.bind(null, state);\n\tassignProperties(\"x\", X_DEFAULTS);\n\tassignProperties(\"y\", Y_DEFAULTS);\n\tassignProperties(\"y2\", Y2_DEFAULTS);\n\tassignProperties(\"background\", BACKGROUND_DEFAULTS);\n\treturn state;\n}\n\n\nexport { prepareState };\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","export default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return this.children;\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport array from \"../array.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that don’t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = array(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","import { select } from \"d3-selection\";\n\n\nfunction isSvg(node) {\n\treturn node.tagName.toLowerCase() === \"svg\";\n}\n\n\nfunction getContainers(target) {\n\tvar container;\n\tif (target && target.select && target.selectAll) {\n\t\tcontainer = select(target.node()); // Make sure we have a select not selectAll\n\t}\n\telse container = select(target);\n\tvar container_node = container.node();\n\tif (!container_node) throw new Error(\"Chart layout instance must have a target\");\n\tvar container_is_svg = isSvg(container_node);\n\n\tvar getSvg = function() {\n\t\tif (container_is_svg) return container;\n\t\tvar current_node = container_node.parentElement;\n\t\twhile (current_node && !isSvg(current_node)) current_node = current_node.parentElement;\n\t\tif (!isSvg(current_node)) throw new Error(\"target must be an SVG or a descendant of an SVG\");\n\t\treturn select(current_node);\n\t};\n\n\treturn { container: container, getSvg: getSvg };\n}\n\n\nexport { getContainers };\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    var group = select.apply(this, arguments);\n    return group == null ? [] : array(group);\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  enter = typeof onenter === \"function\" ? onenter(enter) : enter.append(onenter + \"\");\n  if (onupdate != null) update = onupdate(update);\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(selection) {\n  if (!(selection instanceof Selection)) throw new Error(\"invalid merge\");\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","var counter = 0;\n\nfunction initIdentifier(instance) {\n\tvar identifier = \"fl-chart-layout-\" + counter++;\n\n\treturn function(value) {\n\t\tif (value === undefined) return identifier;\n\t\tidentifier = value;\n\t\treturn instance;\n\t};\n}\n\n\nexport { initIdentifier };\n","var ALL_TRUE = Object.freeze({ left: true, top: true, right: true, bottom: true });\nvar ALL_FALSE = Object.freeze({ left: false, top: false, right: false, bottom: false });\n\n\nfunction initClip(instance) {\n\tvar clip = ALL_TRUE;\n\n\treturn function(value) {\n\t\tif (value === undefined) return clip;\n\t\tif (!value) clip = ALL_FALSE;\n\t\telse if (typeof value !== \"object\") clip = ALL_TRUE;\n\t\telse {\n\t\t\tclip = Object.freeze({\n\t\t\t\tleft: !!value.left,\n\t\t\t\ttop: !!value.top,\n\t\t\t\tright: !!value.right,\n\t\t\t\tbottom: !!value.bottom\n\t\t\t});\n\t\t}\n\t\treturn instance;\n\t};\n}\n\n\nexport { initClip };\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and we’re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and we’re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and we’re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","function defaultFormat(value) { return \"\" + value; }\n\nfunction initFormat(instance) {\n\tvar currentFormat = defaultFormat;\n\treturn function(func) {\n\t\tif (func === undefined) return currentFormat || defaultFormat;\n\t\telse currentFormat = func;\n\t\treturn instance;\n\t};\n}\n\nexport { initFormat };\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","var t0 = new Date,\n    t1 = new Date;\n\nexport default function newInterval(floori, offseti, count, field) {\n\n  function interval(date) {\n    return floori(date = arguments.length === 0 ? new Date : new Date(+date)), date;\n  }\n\n  interval.floor = function(date) {\n    return floori(date = new Date(+date)), date;\n  };\n\n  interval.ceil = function(date) {\n    return floori(date = new Date(date - 1)), offseti(date, 1), floori(date), date;\n  };\n\n  interval.round = function(date) {\n    var d0 = interval(date),\n        d1 = interval.ceil(date);\n    return date - d0 < d1 - date ? d0 : d1;\n  };\n\n  interval.offset = function(date, step) {\n    return offseti(date = new Date(+date), step == null ? 1 : Math.floor(step)), date;\n  };\n\n  interval.range = function(start, stop, step) {\n    var range = [], previous;\n    start = interval.ceil(start);\n    step = step == null ? 1 : Math.floor(step);\n    if (!(start < stop) || !(step > 0)) return range; // also handles Invalid Date\n    do range.push(previous = new Date(+start)), offseti(start, step), floori(start);\n    while (previous < start && start < stop);\n    return range;\n  };\n\n  interval.filter = function(test) {\n    return newInterval(function(date) {\n      if (date >= date) while (floori(date), !test(date)) date.setTime(date - 1);\n    }, function(date, step) {\n      if (date >= date) {\n        if (step < 0) while (++step <= 0) {\n          while (offseti(date, -1), !test(date)) {} // eslint-disable-line no-empty\n        } else while (--step >= 0) {\n          while (offseti(date, +1), !test(date)) {} // eslint-disable-line no-empty\n        }\n      }\n    });\n  };\n\n  if (count) {\n    interval.count = function(start, end) {\n      t0.setTime(+start), t1.setTime(+end);\n      floori(t0), floori(t1);\n      return Math.floor(count(t0, t1));\n    };\n\n    interval.every = function(step) {\n      step = Math.floor(step);\n      return !isFinite(step) || !(step > 0) ? null\n          : !(step > 1) ? interval\n          : interval.filter(field\n              ? function(d) { return field(d) % step === 0; }\n              : function(d) { return interval.count(0, d) % step === 0; });\n    };\n  }\n\n  return interval;\n}\n","import interval from \"./interval.js\";\n\nvar millisecond = interval(function() {\n  // noop\n}, function(date, step) {\n  date.setTime(+date + step);\n}, function(start, end) {\n  return end - start;\n});\n\n// An optimized implementation for this simple case.\nmillisecond.every = function(k) {\n  k = Math.floor(k);\n  if (!isFinite(k) || !(k > 0)) return null;\n  if (!(k > 1)) return millisecond;\n  return interval(function(date) {\n    date.setTime(Math.floor(date / k) * k);\n  }, function(date, step) {\n    date.setTime(+date + step * k);\n  }, function(start, end) {\n    return (end - start) / k;\n  });\n};\n\nexport default millisecond;\nexport var milliseconds = millisecond.range;\n","export const durationSecond = 1000;\nexport const durationMinute = durationSecond * 60;\nexport const durationHour = durationMinute * 60;\nexport const durationDay = durationHour * 24;\nexport const durationWeek = durationDay * 7;\nexport const durationMonth = durationDay * 30;\nexport const durationYear = durationDay * 365;\n","import interval from \"./interval.js\";\nimport {durationSecond} from \"./duration.js\";\n\nvar second = interval(function(date) {\n  date.setTime(date - date.getMilliseconds());\n}, function(date, step) {\n  date.setTime(+date + step * durationSecond);\n}, function(start, end) {\n  return (end - start) / durationSecond;\n}, function(date) {\n  return date.getUTCSeconds();\n});\n\nexport default second;\nexport var seconds = second.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationSecond} from \"./duration.js\";\n\nvar minute = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond);\n}, function(date, step) {\n  date.setTime(+date + step * durationMinute);\n}, function(start, end) {\n  return (end - start) / durationMinute;\n}, function(date) {\n  return date.getMinutes();\n});\n\nexport default minute;\nexport var minutes = minute.range;\n","import interval from \"./interval.js\";\nimport {durationHour, durationMinute, durationSecond} from \"./duration.js\";\n\nvar hour = interval(function(date) {\n  date.setTime(date - date.getMilliseconds() - date.getSeconds() * durationSecond - date.getMinutes() * durationMinute);\n}, function(date, step) {\n  date.setTime(+date + step * durationHour);\n}, function(start, end) {\n  return (end - start) / durationHour;\n}, function(date) {\n  return date.getHours();\n});\n\nexport default hour;\nexport var hours = hour.range;\n","import interval from \"./interval.js\";\nimport {durationDay, durationMinute} from \"./duration.js\";\n\nvar day = interval(\n  date => date.setHours(0, 0, 0, 0),\n  (date, step) => date.setDate(date.getDate() + step),\n  (start, end) => (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationDay,\n  date => date.getDate() - 1\n);\n\nexport default day;\nexport var days = day.range;\n","import interval from \"./interval.js\";\nimport {durationMinute, durationWeek} from \"./duration.js\";\n\nfunction weekday(i) {\n  return interval(function(date) {\n    date.setDate(date.getDate() - (date.getDay() + 7 - i) % 7);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setDate(date.getDate() + step * 7);\n  }, function(start, end) {\n    return (end - start - (end.getTimezoneOffset() - start.getTimezoneOffset()) * durationMinute) / durationWeek;\n  });\n}\n\nexport var sunday = weekday(0);\nexport var monday = weekday(1);\nexport var tuesday = weekday(2);\nexport var wednesday = weekday(3);\nexport var thursday = weekday(4);\nexport var friday = weekday(5);\nexport var saturday = weekday(6);\n\nexport var sundays = sunday.range;\nexport var mondays = monday.range;\nexport var tuesdays = tuesday.range;\nexport var wednesdays = wednesday.range;\nexport var thursdays = thursday.range;\nexport var fridays = friday.range;\nexport var saturdays = saturday.range;\n","import interval from \"./interval.js\";\n\nvar month = interval(function(date) {\n  date.setDate(1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setMonth(date.getMonth() + step);\n}, function(start, end) {\n  return end.getMonth() - start.getMonth() + (end.getFullYear() - start.getFullYear()) * 12;\n}, function(date) {\n  return date.getMonth();\n});\n\nexport default month;\nexport var months = month.range;\n","import interval from \"./interval.js\";\n\nvar year = interval(function(date) {\n  date.setMonth(0, 1);\n  date.setHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setFullYear(date.getFullYear() + step);\n}, function(start, end) {\n  return end.getFullYear() - start.getFullYear();\n}, function(date) {\n  return date.getFullYear();\n});\n\n// An optimized implementation for this simple case.\nyear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setFullYear(Math.floor(date.getFullYear() / k) * k);\n    date.setMonth(0, 1);\n    date.setHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setFullYear(date.getFullYear() + step * k);\n  });\n};\n\nexport default year;\nexport var years = year.range;\n","import interval from \"./interval.js\";\nimport {durationDay} from \"./duration.js\";\n\nvar utcDay = interval(function(date) {\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCDate(date.getUTCDate() + step);\n}, function(start, end) {\n  return (end - start) / durationDay;\n}, function(date) {\n  return date.getUTCDate() - 1;\n});\n\nexport default utcDay;\nexport var utcDays = utcDay.range;\n","import interval from \"./interval.js\";\nimport {durationWeek} from \"./duration.js\";\n\nfunction utcWeekday(i) {\n  return interval(function(date) {\n    date.setUTCDate(date.getUTCDate() - (date.getUTCDay() + 7 - i) % 7);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCDate(date.getUTCDate() + step * 7);\n  }, function(start, end) {\n    return (end - start) / durationWeek;\n  });\n}\n\nexport var utcSunday = utcWeekday(0);\nexport var utcMonday = utcWeekday(1);\nexport var utcTuesday = utcWeekday(2);\nexport var utcWednesday = utcWeekday(3);\nexport var utcThursday = utcWeekday(4);\nexport var utcFriday = utcWeekday(5);\nexport var utcSaturday = utcWeekday(6);\n\nexport var utcSundays = utcSunday.range;\nexport var utcMondays = utcMonday.range;\nexport var utcTuesdays = utcTuesday.range;\nexport var utcWednesdays = utcWednesday.range;\nexport var utcThursdays = utcThursday.range;\nexport var utcFridays = utcFriday.range;\nexport var utcSaturdays = utcSaturday.range;\n","import interval from \"./interval.js\";\n\nvar utcYear = interval(function(date) {\n  date.setUTCMonth(0, 1);\n  date.setUTCHours(0, 0, 0, 0);\n}, function(date, step) {\n  date.setUTCFullYear(date.getUTCFullYear() + step);\n}, function(start, end) {\n  return end.getUTCFullYear() - start.getUTCFullYear();\n}, function(date) {\n  return date.getUTCFullYear();\n});\n\n// An optimized implementation for this simple case.\nutcYear.every = function(k) {\n  return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : interval(function(date) {\n    date.setUTCFullYear(Math.floor(date.getUTCFullYear() / k) * k);\n    date.setUTCMonth(0, 1);\n    date.setUTCHours(0, 0, 0, 0);\n  }, function(date, step) {\n    date.setUTCFullYear(date.getUTCFullYear() + step * k);\n  });\n};\n\nexport default utcYear;\nexport var utcYears = utcYear.range;\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending.js\";\n\nexport default function(f) {\n  let delta = f;\n  let compare = f;\n\n  if (f.length === 1) {\n    delta = (d, x) => f(d) - x;\n    compare = ascendingComparator(f);\n  }\n\n  function left(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) < 0) lo = mid + 1;\n      else hi = mid;\n    }\n    return lo;\n  }\n\n  function right(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    while (lo < hi) {\n      const mid = (lo + hi) >>> 1;\n      if (compare(a[mid], x) > 0) hi = mid;\n      else lo = mid + 1;\n    }\n    return lo;\n  }\n\n  function center(a, x, lo, hi) {\n    if (lo == null) lo = 0;\n    if (hi == null) hi = a.length;\n    const i = left(a, x, lo, hi - 1);\n    return i > lo && delta(a[i - 1], x) > -delta(a[i], x) ? i - 1 : i;\n  }\n\n  return {left, center, right};\n}\n\nfunction ascendingComparator(f) {\n  return (d, x) => ascending(f(d), x);\n}\n","import ascending from \"./ascending.js\";\nimport bisector from \"./bisector.js\";\nimport number from \"./number.js\";\n\nconst ascendingBisect = bisector(ascending);\nexport const bisectRight = ascendingBisect.right;\nexport const bisectLeft = ascendingBisect.left;\nexport const bisectCenter = bisector(number).center;\nexport default bisectRight;\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n\nexport function* numbers(values, valueof) {\n  if (valueof === undefined) {\n    for (let value of values) {\n      if (value != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  } else {\n    let index = -1;\n    for (let value of values) {\n      if ((value = valueof(value, ++index, values)) != null && (value = +value) >= value) {\n        yield value;\n      }\n    }\n  }\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    let r0 = Math.round(start / step), r1 = Math.round(stop / step);\n    if (r0 * step < start) ++r0;\n    if (r1 * step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) * step;\n  } else {\n    step = -step;\n    let r0 = Math.round(start * step), r1 = Math.round(stop * step);\n    if (r0 / step < start) ++r0;\n    if (r1 / step > stop) --r1;\n    ticks = new Array(n = r1 - r0 + 1);\n    while (++i < n) ticks[i] = (r0 + i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","export default function(start, stop, step) {\n  start = +start, stop = +stop, step = (n = arguments.length) < 2 ? (stop = start, start = 0, 1) : n < 3 ? 1 : +step;\n\n  var i = -1,\n      n = Math.max(0, Math.ceil((stop - start) / step)) | 0,\n      range = new Array(n);\n\n  while (++i < n) {\n    range[i] = start + i * step;\n  }\n\n  return range;\n}\n","import {\n  timeDay,\n  timeSunday,\n  timeMonday,\n  timeThursday,\n  timeYear,\n  utcDay,\n  utcSunday,\n  utcMonday,\n  utcThursday,\n  utcYear\n} from \"d3-time\";\n\nfunction localDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(-1, d.m, d.d, d.H, d.M, d.S, d.L);\n    date.setFullYear(d.y);\n    return date;\n  }\n  return new Date(d.y, d.m, d.d, d.H, d.M, d.S, d.L);\n}\n\nfunction utcDate(d) {\n  if (0 <= d.y && d.y < 100) {\n    var date = new Date(Date.UTC(-1, d.m, d.d, d.H, d.M, d.S, d.L));\n    date.setUTCFullYear(d.y);\n    return date;\n  }\n  return new Date(Date.UTC(d.y, d.m, d.d, d.H, d.M, d.S, d.L));\n}\n\nfunction newDate(y, m, d) {\n  return {y: y, m: m, d: d, H: 0, M: 0, S: 0, L: 0};\n}\n\nexport default function formatLocale(locale) {\n  var locale_dateTime = locale.dateTime,\n      locale_date = locale.date,\n      locale_time = locale.time,\n      locale_periods = locale.periods,\n      locale_weekdays = locale.days,\n      locale_shortWeekdays = locale.shortDays,\n      locale_months = locale.months,\n      locale_shortMonths = locale.shortMonths;\n\n  var periodRe = formatRe(locale_periods),\n      periodLookup = formatLookup(locale_periods),\n      weekdayRe = formatRe(locale_weekdays),\n      weekdayLookup = formatLookup(locale_weekdays),\n      shortWeekdayRe = formatRe(locale_shortWeekdays),\n      shortWeekdayLookup = formatLookup(locale_shortWeekdays),\n      monthRe = formatRe(locale_months),\n      monthLookup = formatLookup(locale_months),\n      shortMonthRe = formatRe(locale_shortMonths),\n      shortMonthLookup = formatLookup(locale_shortMonths);\n\n  var formats = {\n    \"a\": formatShortWeekday,\n    \"A\": formatWeekday,\n    \"b\": formatShortMonth,\n    \"B\": formatMonth,\n    \"c\": null,\n    \"d\": formatDayOfMonth,\n    \"e\": formatDayOfMonth,\n    \"f\": formatMicroseconds,\n    \"g\": formatYearISO,\n    \"G\": formatFullYearISO,\n    \"H\": formatHour24,\n    \"I\": formatHour12,\n    \"j\": formatDayOfYear,\n    \"L\": formatMilliseconds,\n    \"m\": formatMonthNumber,\n    \"M\": formatMinutes,\n    \"p\": formatPeriod,\n    \"q\": formatQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatSeconds,\n    \"u\": formatWeekdayNumberMonday,\n    \"U\": formatWeekNumberSunday,\n    \"V\": formatWeekNumberISO,\n    \"w\": formatWeekdayNumberSunday,\n    \"W\": formatWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatYear,\n    \"Y\": formatFullYear,\n    \"Z\": formatZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var utcFormats = {\n    \"a\": formatUTCShortWeekday,\n    \"A\": formatUTCWeekday,\n    \"b\": formatUTCShortMonth,\n    \"B\": formatUTCMonth,\n    \"c\": null,\n    \"d\": formatUTCDayOfMonth,\n    \"e\": formatUTCDayOfMonth,\n    \"f\": formatUTCMicroseconds,\n    \"g\": formatUTCYearISO,\n    \"G\": formatUTCFullYearISO,\n    \"H\": formatUTCHour24,\n    \"I\": formatUTCHour12,\n    \"j\": formatUTCDayOfYear,\n    \"L\": formatUTCMilliseconds,\n    \"m\": formatUTCMonthNumber,\n    \"M\": formatUTCMinutes,\n    \"p\": formatUTCPeriod,\n    \"q\": formatUTCQuarter,\n    \"Q\": formatUnixTimestamp,\n    \"s\": formatUnixTimestampSeconds,\n    \"S\": formatUTCSeconds,\n    \"u\": formatUTCWeekdayNumberMonday,\n    \"U\": formatUTCWeekNumberSunday,\n    \"V\": formatUTCWeekNumberISO,\n    \"w\": formatUTCWeekdayNumberSunday,\n    \"W\": formatUTCWeekNumberMonday,\n    \"x\": null,\n    \"X\": null,\n    \"y\": formatUTCYear,\n    \"Y\": formatUTCFullYear,\n    \"Z\": formatUTCZone,\n    \"%\": formatLiteralPercent\n  };\n\n  var parses = {\n    \"a\": parseShortWeekday,\n    \"A\": parseWeekday,\n    \"b\": parseShortMonth,\n    \"B\": parseMonth,\n    \"c\": parseLocaleDateTime,\n    \"d\": parseDayOfMonth,\n    \"e\": parseDayOfMonth,\n    \"f\": parseMicroseconds,\n    \"g\": parseYear,\n    \"G\": parseFullYear,\n    \"H\": parseHour24,\n    \"I\": parseHour24,\n    \"j\": parseDayOfYear,\n    \"L\": parseMilliseconds,\n    \"m\": parseMonthNumber,\n    \"M\": parseMinutes,\n    \"p\": parsePeriod,\n    \"q\": parseQuarter,\n    \"Q\": parseUnixTimestamp,\n    \"s\": parseUnixTimestampSeconds,\n    \"S\": parseSeconds,\n    \"u\": parseWeekdayNumberMonday,\n    \"U\": parseWeekNumberSunday,\n    \"V\": parseWeekNumberISO,\n    \"w\": parseWeekdayNumberSunday,\n    \"W\": parseWeekNumberMonday,\n    \"x\": parseLocaleDate,\n    \"X\": parseLocaleTime,\n    \"y\": parseYear,\n    \"Y\": parseFullYear,\n    \"Z\": parseZone,\n    \"%\": parseLiteralPercent\n  };\n\n  // These recursive directive definitions must be deferred.\n  formats.x = newFormat(locale_date, formats);\n  formats.X = newFormat(locale_time, formats);\n  formats.c = newFormat(locale_dateTime, formats);\n  utcFormats.x = newFormat(locale_date, utcFormats);\n  utcFormats.X = newFormat(locale_time, utcFormats);\n  utcFormats.c = newFormat(locale_dateTime, utcFormats);\n\n  function newFormat(specifier, formats) {\n    return function(date) {\n      var string = [],\n          i = -1,\n          j = 0,\n          n = specifier.length,\n          c,\n          pad,\n          format;\n\n      if (!(date instanceof Date)) date = new Date(+date);\n\n      while (++i < n) {\n        if (specifier.charCodeAt(i) === 37) {\n          string.push(specifier.slice(j, i));\n          if ((pad = pads[c = specifier.charAt(++i)]) != null) c = specifier.charAt(++i);\n          else pad = c === \"e\" ? \" \" : \"0\";\n          if (format = formats[c]) c = format(date, pad);\n          string.push(c);\n          j = i + 1;\n        }\n      }\n\n      string.push(specifier.slice(j, i));\n      return string.join(\"\");\n    };\n  }\n\n  function newParse(specifier, Z) {\n    return function(string) {\n      var d = newDate(1900, undefined, 1),\n          i = parseSpecifier(d, specifier, string += \"\", 0),\n          week, day;\n      if (i != string.length) return null;\n\n      // If a UNIX timestamp is specified, return it.\n      if (\"Q\" in d) return new Date(d.Q);\n      if (\"s\" in d) return new Date(d.s * 1000 + (\"L\" in d ? d.L : 0));\n\n      // If this is utcParse, never use the local timezone.\n      if (Z && !(\"Z\" in d)) d.Z = 0;\n\n      // The am-pm flag is 0 for AM, and 1 for PM.\n      if (\"p\" in d) d.H = d.H % 12 + d.p * 12;\n\n      // If the month was not specified, inherit from the quarter.\n      if (d.m === undefined) d.m = \"q\" in d ? d.q : 0;\n\n      // Convert day-of-week and week-of-year to day-of-year.\n      if (\"V\" in d) {\n        if (d.V < 1 || d.V > 53) return null;\n        if (!(\"w\" in d)) d.w = 1;\n        if (\"Z\" in d) {\n          week = utcDate(newDate(d.y, 0, 1)), day = week.getUTCDay();\n          week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);\n          week = utcDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getUTCFullYear();\n          d.m = week.getUTCMonth();\n          d.d = week.getUTCDate() + (d.w + 6) % 7;\n        } else {\n          week = localDate(newDate(d.y, 0, 1)), day = week.getDay();\n          week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);\n          week = timeDay.offset(week, (d.V - 1) * 7);\n          d.y = week.getFullYear();\n          d.m = week.getMonth();\n          d.d = week.getDate() + (d.w + 6) % 7;\n        }\n      } else if (\"W\" in d || \"U\" in d) {\n        if (!(\"w\" in d)) d.w = \"u\" in d ? d.u % 7 : \"W\" in d ? 1 : 0;\n        day = \"Z\" in d ? utcDate(newDate(d.y, 0, 1)).getUTCDay() : localDate(newDate(d.y, 0, 1)).getDay();\n        d.m = 0;\n        d.d = \"W\" in d ? (d.w + 6) % 7 + d.W * 7 - (day + 5) % 7 : d.w + d.U * 7 - (day + 6) % 7;\n      }\n\n      // If a time zone is specified, all fields are interpreted as UTC and then\n      // offset according to the specified time zone.\n      if (\"Z\" in d) {\n        d.H += d.Z / 100 | 0;\n        d.M += d.Z % 100;\n        return utcDate(d);\n      }\n\n      // Otherwise, all fields are in local time.\n      return localDate(d);\n    };\n  }\n\n  function parseSpecifier(d, specifier, string, j) {\n    var i = 0,\n        n = specifier.length,\n        m = string.length,\n        c,\n        parse;\n\n    while (i < n) {\n      if (j >= m) return -1;\n      c = specifier.charCodeAt(i++);\n      if (c === 37) {\n        c = specifier.charAt(i++);\n        parse = parses[c in pads ? specifier.charAt(i++) : c];\n        if (!parse || ((j = parse(d, string, j)) < 0)) return -1;\n      } else if (c != string.charCodeAt(j++)) {\n        return -1;\n      }\n    }\n\n    return j;\n  }\n\n  function parsePeriod(d, string, i) {\n    var n = periodRe.exec(string.slice(i));\n    return n ? (d.p = periodLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortWeekday(d, string, i) {\n    var n = shortWeekdayRe.exec(string.slice(i));\n    return n ? (d.w = shortWeekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseWeekday(d, string, i) {\n    var n = weekdayRe.exec(string.slice(i));\n    return n ? (d.w = weekdayLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseShortMonth(d, string, i) {\n    var n = shortMonthRe.exec(string.slice(i));\n    return n ? (d.m = shortMonthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseMonth(d, string, i) {\n    var n = monthRe.exec(string.slice(i));\n    return n ? (d.m = monthLookup.get(n[0].toLowerCase()), i + n[0].length) : -1;\n  }\n\n  function parseLocaleDateTime(d, string, i) {\n    return parseSpecifier(d, locale_dateTime, string, i);\n  }\n\n  function parseLocaleDate(d, string, i) {\n    return parseSpecifier(d, locale_date, string, i);\n  }\n\n  function parseLocaleTime(d, string, i) {\n    return parseSpecifier(d, locale_time, string, i);\n  }\n\n  function formatShortWeekday(d) {\n    return locale_shortWeekdays[d.getDay()];\n  }\n\n  function formatWeekday(d) {\n    return locale_weekdays[d.getDay()];\n  }\n\n  function formatShortMonth(d) {\n    return locale_shortMonths[d.getMonth()];\n  }\n\n  function formatMonth(d) {\n    return locale_months[d.getMonth()];\n  }\n\n  function formatPeriod(d) {\n    return locale_periods[+(d.getHours() >= 12)];\n  }\n\n  function formatQuarter(d) {\n    return 1 + ~~(d.getMonth() / 3);\n  }\n\n  function formatUTCShortWeekday(d) {\n    return locale_shortWeekdays[d.getUTCDay()];\n  }\n\n  function formatUTCWeekday(d) {\n    return locale_weekdays[d.getUTCDay()];\n  }\n\n  function formatUTCShortMonth(d) {\n    return locale_shortMonths[d.getUTCMonth()];\n  }\n\n  function formatUTCMonth(d) {\n    return locale_months[d.getUTCMonth()];\n  }\n\n  function formatUTCPeriod(d) {\n    return locale_periods[+(d.getUTCHours() >= 12)];\n  }\n\n  function formatUTCQuarter(d) {\n    return 1 + ~~(d.getUTCMonth() / 3);\n  }\n\n  return {\n    format: function(specifier) {\n      var f = newFormat(specifier += \"\", formats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    parse: function(specifier) {\n      var p = newParse(specifier += \"\", false);\n      p.toString = function() { return specifier; };\n      return p;\n    },\n    utcFormat: function(specifier) {\n      var f = newFormat(specifier += \"\", utcFormats);\n      f.toString = function() { return specifier; };\n      return f;\n    },\n    utcParse: function(specifier) {\n      var p = newParse(specifier += \"\", true);\n      p.toString = function() { return specifier; };\n      return p;\n    }\n  };\n}\n\nvar pads = {\"-\": \"\", \"_\": \" \", \"0\": \"0\"},\n    numberRe = /^\\s*\\d+/, // note: ignores next directive\n    percentRe = /^%/,\n    requoteRe = /[\\\\^$*+?|[\\]().{}]/g;\n\nfunction pad(value, fill, width) {\n  var sign = value < 0 ? \"-\" : \"\",\n      string = (sign ? -value : value) + \"\",\n      length = string.length;\n  return sign + (length < width ? new Array(width - length + 1).join(fill) + string : string);\n}\n\nfunction requote(s) {\n  return s.replace(requoteRe, \"\\\\$&\");\n}\n\nfunction formatRe(names) {\n  return new RegExp(\"^(?:\" + names.map(requote).join(\"|\") + \")\", \"i\");\n}\n\nfunction formatLookup(names) {\n  return new Map(names.map((name, i) => [name.toLowerCase(), i]));\n}\n\nfunction parseWeekdayNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.w = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekdayNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.u = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberSunday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.U = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberISO(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.V = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseWeekNumberMonday(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.W = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseFullYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 4));\n  return n ? (d.y = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.y = +n[0] + (+n[0] > 68 ? 1900 : 2000), i + n[0].length) : -1;\n}\n\nfunction parseZone(d, string, i) {\n  var n = /^(Z)|([+-]\\d\\d)(?::?(\\d\\d))?/.exec(string.slice(i, i + 6));\n  return n ? (d.Z = n[1] ? 0 : -(n[2] + (n[3] || \"00\")), i + n[0].length) : -1;\n}\n\nfunction parseQuarter(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 1));\n  return n ? (d.q = n[0] * 3 - 3, i + n[0].length) : -1;\n}\n\nfunction parseMonthNumber(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.m = n[0] - 1, i + n[0].length) : -1;\n}\n\nfunction parseDayOfMonth(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseDayOfYear(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.m = 0, d.d = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseHour24(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.H = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMinutes(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.M = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 2));\n  return n ? (d.S = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMilliseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 3));\n  return n ? (d.L = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseMicroseconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i, i + 6));\n  return n ? (d.L = Math.floor(n[0] / 1000), i + n[0].length) : -1;\n}\n\nfunction parseLiteralPercent(d, string, i) {\n  var n = percentRe.exec(string.slice(i, i + 1));\n  return n ? i + n[0].length : -1;\n}\n\nfunction parseUnixTimestamp(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.Q = +n[0], i + n[0].length) : -1;\n}\n\nfunction parseUnixTimestampSeconds(d, string, i) {\n  var n = numberRe.exec(string.slice(i));\n  return n ? (d.s = +n[0], i + n[0].length) : -1;\n}\n\nfunction formatDayOfMonth(d, p) {\n  return pad(d.getDate(), p, 2);\n}\n\nfunction formatHour24(d, p) {\n  return pad(d.getHours(), p, 2);\n}\n\nfunction formatHour12(d, p) {\n  return pad(d.getHours() % 12 || 12, p, 2);\n}\n\nfunction formatDayOfYear(d, p) {\n  return pad(1 + timeDay.count(timeYear(d), d), p, 3);\n}\n\nfunction formatMilliseconds(d, p) {\n  return pad(d.getMilliseconds(), p, 3);\n}\n\nfunction formatMicroseconds(d, p) {\n  return formatMilliseconds(d, p) + \"000\";\n}\n\nfunction formatMonthNumber(d, p) {\n  return pad(d.getMonth() + 1, p, 2);\n}\n\nfunction formatMinutes(d, p) {\n  return pad(d.getMinutes(), p, 2);\n}\n\nfunction formatSeconds(d, p) {\n  return pad(d.getSeconds(), p, 2);\n}\n\nfunction formatWeekdayNumberMonday(d) {\n  var day = d.getDay();\n  return day === 0 ? 7 : day;\n}\n\nfunction formatWeekNumberSunday(d, p) {\n  return pad(timeSunday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction dISO(d) {\n  var day = d.getDay();\n  return (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n}\n\nfunction formatWeekNumberISO(d, p) {\n  d = dISO(d);\n  return pad(timeThursday.count(timeYear(d), d) + (timeYear(d).getDay() === 4), p, 2);\n}\n\nfunction formatWeekdayNumberSunday(d) {\n  return d.getDay();\n}\n\nfunction formatWeekNumberMonday(d, p) {\n  return pad(timeMonday.count(timeYear(d) - 1, d), p, 2);\n}\n\nfunction formatYear(d, p) {\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatYearISO(d, p) {\n  d = dISO(d);\n  return pad(d.getFullYear() % 100, p, 2);\n}\n\nfunction formatFullYear(d, p) {\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatFullYearISO(d, p) {\n  var day = d.getDay();\n  d = (day >= 4 || day === 0) ? timeThursday(d) : timeThursday.ceil(d);\n  return pad(d.getFullYear() % 10000, p, 4);\n}\n\nfunction formatZone(d) {\n  var z = d.getTimezoneOffset();\n  return (z > 0 ? \"-\" : (z *= -1, \"+\"))\n      + pad(z / 60 | 0, \"0\", 2)\n      + pad(z % 60, \"0\", 2);\n}\n\nfunction formatUTCDayOfMonth(d, p) {\n  return pad(d.getUTCDate(), p, 2);\n}\n\nfunction formatUTCHour24(d, p) {\n  return pad(d.getUTCHours(), p, 2);\n}\n\nfunction formatUTCHour12(d, p) {\n  return pad(d.getUTCHours() % 12 || 12, p, 2);\n}\n\nfunction formatUTCDayOfYear(d, p) {\n  return pad(1 + utcDay.count(utcYear(d), d), p, 3);\n}\n\nfunction formatUTCMilliseconds(d, p) {\n  return pad(d.getUTCMilliseconds(), p, 3);\n}\n\nfunction formatUTCMicroseconds(d, p) {\n  return formatUTCMilliseconds(d, p) + \"000\";\n}\n\nfunction formatUTCMonthNumber(d, p) {\n  return pad(d.getUTCMonth() + 1, p, 2);\n}\n\nfunction formatUTCMinutes(d, p) {\n  return pad(d.getUTCMinutes(), p, 2);\n}\n\nfunction formatUTCSeconds(d, p) {\n  return pad(d.getUTCSeconds(), p, 2);\n}\n\nfunction formatUTCWeekdayNumberMonday(d) {\n  var dow = d.getUTCDay();\n  return dow === 0 ? 7 : dow;\n}\n\nfunction formatUTCWeekNumberSunday(d, p) {\n  return pad(utcSunday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction UTCdISO(d) {\n  var day = d.getUTCDay();\n  return (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n}\n\nfunction formatUTCWeekNumberISO(d, p) {\n  d = UTCdISO(d);\n  return pad(utcThursday.count(utcYear(d), d) + (utcYear(d).getUTCDay() === 4), p, 2);\n}\n\nfunction formatUTCWeekdayNumberSunday(d) {\n  return d.getUTCDay();\n}\n\nfunction formatUTCWeekNumberMonday(d, p) {\n  return pad(utcMonday.count(utcYear(d) - 1, d), p, 2);\n}\n\nfunction formatUTCYear(d, p) {\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCYearISO(d, p) {\n  d = UTCdISO(d);\n  return pad(d.getUTCFullYear() % 100, p, 2);\n}\n\nfunction formatUTCFullYear(d, p) {\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCFullYearISO(d, p) {\n  var day = d.getUTCDay();\n  d = (day >= 4 || day === 0) ? utcThursday(d) : utcThursday.ceil(d);\n  return pad(d.getUTCFullYear() % 10000, p, 4);\n}\n\nfunction formatUTCZone() {\n  return \"+0000\";\n}\n\nfunction formatLiteralPercent() {\n  return \"%\";\n}\n\nfunction formatUnixTimestamp(d) {\n  return +d;\n}\n\nfunction formatUnixTimestampSeconds(d) {\n  return Math.floor(+d / 1000);\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var timeFormat;\nexport var timeParse;\nexport var utcFormat;\nexport var utcParse;\n\ndefaultLocale({\n  dateTime: \"%x, %X\",\n  date: \"%-m/%-d/%Y\",\n  time: \"%-I:%M:%S %p\",\n  periods: [\"AM\", \"PM\"],\n  days: [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"],\n  shortDays: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n  months: [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"],\n  shortMonths: [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  timeFormat = locale.format;\n  timeParse = locale.parse;\n  utcFormat = locale.utcFormat;\n  utcParse = locale.utcParse;\n  return locale;\n}\n","import { timeParse } from \"d3-time-format\";\n\n\nvar defaultNumberParser = parseFloat;\nvar defaultDatetimeParser = timeParse(\"%Y-%m-%d\");\n\n\nfunction initNumberParse(instance) {\n\tvar currentNumberParser = defaultNumberParser;\n\treturn function(func) {\n\t\tif (func === undefined) return currentNumberParser || defaultNumberParser;\n\t\telse currentNumberParser = func;\n\t\treturn instance;\n\t};\n}\n\n\nfunction initDatetimeParse(instance) {\n\tvar currentDatetimeParser = defaultDatetimeParser;\n\treturn function(func) {\n\t\tif (func === undefined) return currentDatetimeParser || defaultDatetimeParser;\n\t\telse currentDatetimeParser = func;\n\t\treturn instance;\n\t};\n}\n\n\nexport { initNumberParse, initDatetimeParse };\n","function getUniqueValues(arr) {\n\tvar uniq_arr = [];\n\tvar uniq_obj = {};\n\tarr.forEach(function(d) {\n\t\tif (uniq_obj[d]) return;\n\t\tuniq_arr.push(d);\n\t\tuniq_obj[d] = true;\n\t});\n\treturn uniq_arr;\n}\n\nvar isArray = Array.isArray;\n\nexport { getUniqueValues, isArray };\n","function identity(x) {\n\treturn x;\n}\n\nexport { identity };\n","function createAdder(obj) {\n\tvar prop = function(name, value) {\n\t\tObject.defineProperty(obj, name, { value: value, enumerable: true });\n\t};\n\n\tvar getter = function(name, func) {\n\t\tObject.defineProperty(obj, name, { get: func, enumerable: true });\n\t};\n\n\tvar method = function(name, func) {\n\t\tObject.defineProperty(obj, name, { value: func });\n\t};\n\n\treturn {\n\t\tprop: prop,\n\t\tgetter: getter,\n\t\tmethod: method\n\t};\n}\n\n\nexport { createAdder };\n","// 1 2 2 4\nfunction best(sorted_values, lowest_first) {\n\tvar reducer = lowest_first ? \"reduce\" : \"reduceRight\";\n\tvar rank = 1;\n\treturn sorted_values[reducer](function(lookup, d) {\n\t\tif (!lookup[d]) lookup[d] = rank;\n\t\trank += 1;\n\t\treturn lookup;\n\t}, {});\n}\n\n// 1 3 3 4\nfunction worst(sorted_values, lowest_first) {\n\tvar reducer = lowest_first ? \"reduce\" : \"reduceRight\";\n\tvar rank = 1;\n\treturn sorted_values[reducer](function(lookup, d) {\n\t\tlookup[d] = rank++;\n\t\treturn lookup;\n\t}, {});\n}\n\n// 1 2 2 3\nfunction dense(sorted_values, lowest_first) {\n\tvar reducer = lowest_first ? \"reduce\" : \"reduceRight\";\n\tvar rank = 1;\n\treturn sorted_values[reducer](function(lookup, d) {\n\t\tif (!lookup[d]) lookup[d] = rank++;\n\t\treturn lookup;\n\t}, {});\n}\n\n// 1 2.5 2.5 4\nfunction fractional(sorted_values, lowest_first) {\n\tvar ll = best(sorted_values, lowest_first);\n\tvar hl = worst(sorted_values, lowest_first);\n\treturn Object.keys(ll).reduce(function(obj, key) {\n\t\tobj[key] = (ll[key] + hl[key]) / 2;\n\t\treturn obj;\n\t}, {});\n}\n\n\nfunction rank(unsorted_values, sorted_values, lowest_first, ties_method) {\n\tvar lookup;\n\tif (ties_method === \"dense\") lookup = dense(sorted_values, lowest_first);\n\telse if (ties_method === \"fractional\") lookup = fractional(sorted_values, lowest_first);\n\telse if (ties_method === \"worst\") lookup = worst(sorted_values, lowest_first);\n\telse lookup = best(sorted_values, lowest_first);\n\n\tvar mapFunc = function(d) { return lookup[d]; };\n\t// ties_method ordinal (1 2 3 4) uses lowest lookup but then modifies it in place\n\tif (ties_method === \"ordinal\") mapFunc = function(d) { return lookup[d]++; };\n\n\treturn unsorted_values.map(mapFunc);\n}\n\nexport { rank };\n","function getRandomIntegerGenerator(nextRandom) {\n\tnextRandom = nextRandom || Math.random;\n\treturn function(first, last) {\n\t\tvar n = (last - first) + 1;\n\t\treturn Math.floor(nextRandom() * n) + first;\n\t};\n}\n\n\nfunction randomFromArray(values, nextRandom) {\n\tvar index = getRandomIntegerGenerator(nextRandom)(0, values.length-1);\n\treturn values[index];\n}\n\n\nfunction sampleArray(values, n_samples, replace, nextRandom) {\n\tvar n_points = values.length;\n\treplace = n_samples !== undefined ? replace : false;\n\tn_samples = n_samples !== undefined ? Math.floor(n_samples) : n_points;\n\n\tif (!n_points || n_samples < 1) return [];\n\n\tvar out;\n\tvar getRandomInteger = getRandomIntegerGenerator(nextRandom);\n\n\tif (replace || n_samples === 1) {\n\t\tout = [];\n\t\tfor (var i = 0; i < n_samples; i++) {\n\t\t\tout.push(values[getRandomInteger(0, n_points - 1)]);\n\t\t}\n\t\treturn out;\n\t}\n\n\tout = values.slice();\n\tvar n = Math.min(n_points, n_samples);\n\n\tfor (var i = 0; i < n; i++) {\n\t\tvar pick_index = getRandomInteger(i, n_points - 1);\n\t\tif (pick_index === i) continue;\n\t\tvar pick = out[pick_index];\n\t\tvar temp = out[i];\n\t\tout[i] = pick;\n\t\tout [pick_index] = temp;\n\t}\n\n\tout.length = n;\n\n\treturn out;\n}\n\n\nexport { randomFromArray, sampleArray };\n","function uncleanArray(dataset, dropped_indexes, dirty_value) {\n\tif (!dropped_indexes.length) return dataset.slice();\n\n\tvar counter = 0;\n\tvar unclean_data = dataset.reduce(function(arr, d) {\n\t\twhile (arr.length === dropped_indexes[counter]) {\n\t\t\tarr.push(dirty_value);\n\t\t\tcounter++;\n\t\t}\n\t\tarr.push(d);\n\t\treturn arr;\n\t}, []);\n\twhile (dropped_indexes[counter++]) unclean_data.push(dirty_value);\n\n\treturn unclean_data;\n}\n\n\nexport { uncleanArray };\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n","import number from \"./number\";\n\nexport default function(values, p, valueof) {\n  if (valueof == null) valueof = number;\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","import { quantile as d3_quantile, variance as d3_variance } from \"d3-array\";\nimport { isArray } from \"../../../common\";\n\nfunction quantiles(sorted_data, vals) {\n\tif (!isArray(vals)) return d3_quantile(sorted_data, vals);\n\treturn vals.map(function(d) { return d3_quantile(sorted_data, d); });\n}\n\n\nfunction addSummaries(add) {\n\tvar variance = function() {\n\t\treturn d3_variance(this.values);\n\t};\n\n\tvar sd = function() {\n\t\treturn Math.sqrt(this.variance);\n\t};\n\n\tvar quartiles = function() {\n\t\treturn quantiles(this.sorted_values, [ 0.25, 0.5, 0.75 ]);\n\t};\n\n\tvar median = function() {\n\t\treturn quantiles(this.sorted_values, 0.5);\n\t};\n\n\tvar iqr = function() {\n\t\tvar iq = quantiles(this.sorted_values, [ 0.25, 0.75 ]);\n\t\treturn iq[1] - iq[0];\n\t};\n\n\tadd.getter(\"variance\", variance);\n\tadd.getter(\"sd\", sd);\n\tadd.getter(\"median\", median);\n\tadd.getter(\"iqr\", iqr);\n\tadd.method(\"quantiles\", function(vals) { return quantiles(this.sorted_values, vals); });\n\tadd.method(\"quartiles\", quartiles);\n}\n\n\nexport default addSummaries;\n","import number from \"./number\";\n\nexport default function(values, valueof) {\n  var n = values.length,\n      m = 0,\n      i = -1,\n      mean = 0,\n      value,\n      delta,\n      sum = 0;\n\n  if (valueof == null) {\n    while (++i < n) {\n      if (!isNaN(value = number(values[i]))) {\n        delta = value - mean;\n        mean += delta / ++m;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n\n  else {\n    while (++i < n) {\n      if (!isNaN(value = number(valueof(values[i], i, values)))) {\n        delta = value - mean;\n        mean += delta / ++m;\n        sum += delta * (value - mean);\n      }\n    }\n  }\n\n  if (m > 1) return sum / (m - 1);\n}\n","function isLatitude(value) { return value >= -90 && value <= 90; }\nfunction isLongitude(value) { return value >= -180 && value <= 180; }\n\n\nfunction getScore(instance, func, predicate_mode) {\n\tif (!instance.length) return null;\n\tif (predicate_mode) return func(instance.min) && func(instance.max) ? 1 : 0;\n\treturn instance.values.reduce(function(count, value) { return count + func(value); }, 0) / instance.length;\n}\n\n\nfunction addGeographic(add) {\n\tadd.method(\"latitudeScore\", function(predicate_mode) {\n\t\treturn getScore(this, isLatitude, predicate_mode);\n\t});\n\n\tadd.method(\"longitudeScore\", function(predicate_mode) {\n\t\treturn getScore(this, isLongitude, predicate_mode);\n\t});\n}\n\nexport default addGeographic;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import initProto from \"./proto\";\nimport initInstance from \"./instance\";\n\nvar proto = initProto();\n\nfunction init(input_data, accessor) {\n\tvar obj = Object.create(proto);\n\tinitInstance(obj, input_data, accessor);\n\treturn obj;\n}\n\nexport default init;\n","import { createAdder } from \"../../common\";\nimport addSorting from \"./lib/sorting\";\nimport addSummaries from \"./lib/summaries\";\nimport addSampling from \"./lib/sampling\";\nimport addRanking from \"./lib/ranking\";\nimport addUncleaning from \"./lib/uncleaning\";\nimport addGeographic from \"./lib/geographic\";\n\nfunction init() {\n\tvar proto = {};\n\tvar add = createAdder(proto);\n\taddSorting(add);\n\taddSummaries(add);\n\taddSampling(add);\n\taddRanking(add);\n\taddUncleaning(add);\n\taddGeographic(add);\n\treturn proto;\n}\n\nexport default init;\n","import { getUniqueValues } from \"../../../common\";\n\nfunction addSorting(add) {\n\tadd.method(\"unsorted\", function() { return this.values.slice(); });\n\tadd.method(\"ascending\", function() { return this.sorted_values.slice(); });\n\tadd.method(\"descending\", function() { return this.sorted_values.slice().reverse(); });\n\tadd.method(\"unique\", function() { return getUniqueValues(this.values); });\n\tadd.method(\"uniqueAscending\", function() { return getUniqueValues(this.sorted_values); });\n\tadd.method(\"uniqueDescending\", function() { return getUniqueValues(this.sorted_values).reverse(); });\n}\n\nexport default addSorting;\n","import { randomFromArray, sampleArray } from \"../../../common\";\n\n\nfunction addSampling(add) {\n\tadd.method(\"random\", function(nextRandom) {\n\t\treturn randomFromArray(this.values, nextRandom);\n\t});\n\n\tadd.method(\"sample\", function(n_samples, replace, nextRandom) {\n\t\treturn sampleArray(this.values, n_samples, replace, nextRandom);\n\t});\n}\n\n\nexport default addSampling;\n","import { rank } from \"../../../common\";\n\nfunction addRanking(add) {\n\tadd.method(\"rank\", function(lowest_first, ties_method) {\n\t\treturn rank(this.values, this.sorted_values, lowest_first, ties_method);\n\t});\n}\n\nexport default addRanking;\n","import { uncleanArray } from \"../../../common\";\n\nfunction addUncleaning(add) {\n\tadd.method(\"unclean\", function(dataset) {\n\t\tif (dataset && dataset.length < this.values.length) throw new RangeError(\"dataset is too short\");\n\t\tif (dataset && dataset.length > this.values.length) throw new RangeError(\"dataset is too long\");\n\t\tdataset = dataset || this.values;\n\t\treturn uncleanArray(dataset, this.dropped_indexes, NaN);\n\t});\n}\n\nexport default addUncleaning;\n","import { createAdder, identity } from \"../../common\";\nimport { ascending, isAscending, isDescending } from \"../utils\";\n\n\nfunction init(obj, input_data, accessor) {\n\taccessor = accessor || identity;\n\n\tvar min = Infinity;\n\tvar max = -Infinity;\n\tvar sorted_values = null;\n\tvar sum = 0;\n\tvar dropped_indexes = [];\n\n\tvar values = Object.freeze(input_data.reduce(function(arr, d, i) {\n\t\tvar value = accessor(d);\n\t\tif (typeof value === \"number\" && !isNaN(value)) {\n\t\t\tarr.push(value);\n\t\t\tmin = Math.min(min, value);\n\t\t\tmax = Math.max(max, value);\n\t\t\tsum += value;\n\t\t}\n\t\telse dropped_indexes.push(i);\n\t\treturn arr;\n\t}, []));\n\n\tvar add = createAdder(obj);\n\n\tadd.prop(\"enhanced_array\", true);\n\tadd.prop(\"numeric_array\", true);\n\tadd.prop(\"values\", values);\n\tadd.prop(\"min\", values.length ? min : null);\n\tadd.prop(\"max\", values.length ? max : null);\n\tadd.prop(\"sum\", sum);\n\tadd.prop(\"mean\", values.length ? sum / values.length : null);\n\tadd.prop(\"range\", values.length ? max - min : null);\n\tadd.prop(\"length\", values.length);\n\tadd.prop(\"dropped_indexes\", Object.freeze(dropped_indexes));\n\tadd.method(\"extent\", function() { return [this.min, this.max]; });\n\n\tadd.getter(\"sorted_values\", function() {\n\t\tif (!sorted_values) {\n\t\t\tif (isAscending(values)) sorted_values = values;\n\t\t\tif (isDescending(values)) sorted_values = Object.freeze(values.slice().reverse());\n\t\t\telse sorted_values = Object.freeze(values.slice().sort(ascending));\n\t\t}\n\t\treturn sorted_values;\n\t});\n\n\treturn obj;\n}\n\n\nexport default init;\n","import { ascending } from \"d3-array\";\n\nfunction isAscending(arr) {\n\tvar prev = -Infinity;\n\treturn arr.every(function(d) {\n\t\tif (d >= prev) {\n\t\t\tprev = d;\n\t\t\treturn true;\n\t\t}\n\t});\n}\n\nfunction isDescending(arr) {\n\tvar prev = Infinity;\n\treturn arr.every(function(d) {\n\t\tif (d <= prev) {\n\t\t\tprev = d;\n\t\t\treturn true;\n\t\t}\n\t});\n}\n\nexport { ascending, isAscending, isDescending };\n","import { createAdder, identity } from \"../../common\";\nimport createNumericArray from \"../../numeric\";\n\nvar PROPS_TO_STEAL = Object.freeze([ \"min\", \"max\", \"mean\" ]);\n\nvar METHODS_TO_STEAL = Object.freeze([\n\t\"extent\",\n\t\"random\", \"sample\",\n\t\"unsorted\", \"ascending\", \"descending\", \"unique\", \"uniqueAscending\", \"uniqueDescending\",\n\t\"quartiles\", \"quantiles\",\n\t\"unclean\"\n]);\n\n\nfunction isValidDate(entity) {\n\treturn Object.prototype.toString.call(entity) === \"[object Date]\" && !isNaN(entity.getTime());\n}\n\n\nfunction numberToDate(num) {\n\tif (typeof num !== \"number\") return null;\n\treturn new Date(num);\n}\n\n\nfunction _stealMethod(numeric_array, method) {\n\treturn function() {\n\t\tvar res = numeric_array[method].apply(numeric_array, arguments);\n\t\treturn Array.isArray(res) ? res.map(numberToDate) : numberToDate(res);\n\t};\n}\n\n\nfunction init(obj, input_data, accessor) {\n\taccessor = accessor || identity;\n\n\tvar numeric_array = createNumericArray(\n\t\tinput_data.map(function(d) {\n\t\t\tvar dt = accessor(d);\n\t\t\treturn isValidDate(dt) ? dt.getTime(): null;\n\t\t})\n\t);\n\n\tvar add = createAdder(obj);\n\n\tadd.prop(\"enhanced_array\", true);\n\tadd.prop(\"datetime_array\", true);\n\tadd.getter(\"values\", function() { return Object.freeze(numeric_array.values.map(numberToDate)); });\n\tadd.getter(\"sorted_values\", function() { return Object.freeze(numeric_array.sorted_values.map(numberToDate)); });\n\tadd.getter(\"median\", function() { return numberToDate(numeric_array.median); });\n\tadd.prop(\"length\", numeric_array.values.length);\n\tadd.prop(\"dropped_indexes\", numeric_array.dropped_indexes);\n\tadd.method(\"rank\", function() { return numeric_array.rank(arguments); });\n\n\tvar stealMethod = _stealMethod.bind(null, numeric_array);\n\tPROPS_TO_STEAL.forEach(function(prop) { add.prop(prop, numberToDate(numeric_array[prop])); });\n\tMETHODS_TO_STEAL.forEach(function(method) { add.method(method, stealMethod(method)); });\n\n\treturn obj;\n}\n\n\nexport default init;\n","// import initProto from \"./proto\";\nimport initInstance from \"./instance\";\n\n// var proto = initProto();\n\nfunction init(input_data, accessor) {\n\tvar obj = {}; // Object.create(proto);\n\tinitInstance(obj, input_data, accessor);\n\treturn obj;\n}\n\nexport default init;\n","import initProto from \"./proto\";\nimport initInstance from \"./instance\";\n\nvar proto = initProto();\n\nfunction init(input_data, accessor) {\n\tvar obj = Object.create(proto);\n\tinitInstance(obj, input_data, accessor);\n\treturn obj;\n}\n\nexport default init;\n","var remToPx;\nfunction updateRemToPx() {\n\tvar multiplier = parseFloat(getComputedStyle(document.documentElement).fontSize);\n\tvar dpr = window.devicePixelRatio;\n\n\tremToPx = function(rem, round) {\n\t\tif (!rem) return 0;\n\t\tif (!round) return rem * multiplier;\n\t\treturn Math.max(Math.round(rem * multiplier * dpr), 1) / dpr;\n\t};\n}\n\n\nfunction getFont(container_selection, size_in_rem, weight) {\n\tvar family_string = getComputedStyle(container_selection.node()).fontFamily;\n\tvar size = remToPx(size_in_rem);\n\tvar size_string = size + \"px \";\n\tvar weight_string = weight ? weight + \" \" : \"\";\n\treturn weight_string + size_string + family_string;\n}\n\n\nfunction xyToTranslate(x, y) {\n\treturn \"translate(\" + x + \",\" + y +\")\";\n}\n\n\nfunction angleToRotate(angle, x, y) {\n\tx = x || 0;\n\ty = y || 0;\n\treturn \"rotate(\" + angle + \",\" + x + \",\" + y + \")\";\n}\n\n\nvar log10 = Math.log10 || function(x) { return Math.log(x) * Math.LOG10E; };\n\n\nfunction getExponent(value) {\n\treturn Math.floor(log10(Math.abs(value)));\n}\n\n\n// Based on https://stackoverflow.com/a/22885197\nfunction getSignificantDigitCount(v) {\n\tif (v === 0) return 0;\n\tvar value = Math.abs(String(v).replace(\".\", \"\")); // remove decimal and make positive\n\twhile (value !== 0 && value % 10 === 0) value /= 10; // kill the 0s at the end of n\n\treturn getExponent(value) + 1; // get number of digits\n}\n\n\n// Based on https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection#Given_two_points_on_each_line\nfunction linesIntersect(p, q) {\n\tvar x1 = p[0][0], x2 = p[1][0], x3 = q[0][0], x4 = q[1][0];\n\tvar y1 = p[0][1], y2 = p[1][1], y3 = q[0][1], y4 = q[1][1];\n\tvar denominator = (x1-x2) * (y3-y4) - (x3-x4) * (y1-y2);\n\n\t// Parallel lines\n\tif (!denominator) {\n\t\tif (\n\t\t\t(x1 < x3 && x1 < x4 && x2 < x3 && x2 < x4) // p is left of q\n\t\t\t|| (x1 > x3 && x1 > x4 && x2 > x3 && x2 > x4) // p is right of q\n\t\t\t|| (y1 < y3 && y1 < y4 && y2 < y3 && y2 < y4) // p is above q\n\t\t\t|| (y1 > y3 && y1 > y4 && y2 > y3 && y2 > y4) // p is below q\n\t\t) return false;\n\t\treturn true;\n\t}\n\n\tvar t = ((x1-x3)*(y3-y4) - (y1-y3)*(x3-x4)) / denominator;\n\tif (t < 0 || t > 1) return false; // point of intersection does not fall within the p line segment\n\tvar u = -((x1-x2)*(y1-y3) - (y1-y2)*(x1-x3)) / denominator;\n\tif (u < 0 || u > 1) return false; // point of intersection does not fall within the q line segment\n\n\treturn true;\n}\n\n\nfunction sign(val) {\n\tif (!val || typeof val !== \"number\") return 0;\n\treturn val > 0 ? 1 : -1;\n}\n\n\n// The safeScale function wraps a standard d3-scale, preventing it from returning a NaN value or +-Infinity\n// which can lead to errors when being used for translations during transitions - eg from a linear scale to\n// a log scale or vice versa\nfunction safeScale(scale) {\n\tvar type = scale.type; // Store the type since scale.copy won't copy that custom property across\n\tscale = scale.copy(); // Use a copy of the scale so it can't be tampered with from outside\n\tscale.type = type; // Add the type information to the new scale\n\tvar SAFE_POSITION = -1e6; // The +-1e6th pixel should not be on screen\n\tvar COPIED_METHODS = [\"domain\", \"range\"];\n\n\tvar scaleWrapper = function(unscaled_value) {\n\t\tvar val = scale(unscaled_value);\n\t\t// Catch values that will break SVG transforms\n\t\tif (isNaN(val) || Math.abs(val) === Infinity) {\n\t\t\t// Work out whether should be off top/left (flipped === false) or bottom/right (flipped)\n\t\t\tvar flipped;\n\t\t\tvar range = scale.range();\n\t\t\tif (type !== \"numeric\") flipped = range[0] > range[1] ? true : false;\n\t\t\telse {\n\t\t\t\tvar domain = scale.domain();\n\t\t\t\t// flipped true for ordinary y axis or x axis is set so go largest -> smallest\n\t\t\t\tflipped = sign(domain[1] - domain[0]) !== sign(range[1] - range[0]);\n\t\t\t}\n\t\t\tval = SAFE_POSITION * (flipped ? -1 : 1);\n\t\t}\n\t\treturn val;\n\t};\n\n\t// Having the range and domain easily accessible is useful, so apply these functions\n\tCOPIED_METHODS.forEach(function(name) {\n\t\tscaleWrapper[name] = function() {\n\t\t\tvar result = scale[name].apply(scale, arguments);\n\t\t\t// Return the wrapper rather than the wrapped scale object\n\t\t\treturn result === scale ? scaleWrapper : result;\n\t\t};\n\t});\n\n\t// Add a custom copy method and the type and step properties to the wrapper\n\tscaleWrapper.copy = function() { return safeScale(scale); };\n\tscaleWrapper.type = scale.type;\n\tscaleWrapper.step = scale.step;\n\n\treturn scaleWrapper;\n}\n\n\nfunction isDate(entity) {\n\treturn Object.prototype.toString.call(entity) === \"[object Date]\";\n}\n\n\nfunction isValidDate(entity) {\n\treturn isDate(entity) && !isNaN(entity.getTime());\n}\n\n\nfunction textareaToArray(text_string) {\n\treturn text_string.split(\"\\n\")\n\t\t.filter(function(d) { return d; })\n\t\t.map(function(d) { return d.trim(); });\n}\n\nexport {\n\tupdateRemToPx,\n\tremToPx,\n\tgetFont,\n\txyToTranslate,\n\tangleToRotate,\n\tlinesIntersect,\n\tlog10,\n\tgetExponent,\n\tgetSignificantDigitCount,\n\tsafeScale,\n\tisDate,\n\tisValidDate,\n\ttextareaToArray\n};\n","import { createAdder } from \"../../common\";\nimport addSorting from \"./lib/sorting\";\nimport addSampling from \"./lib/sampling\";\nimport addRanking from \"./lib/ranking\";\nimport addUncleaning from \"./lib/uncleaning\";\n\nfunction init() {\n\tvar proto = {};\n\tvar add = createAdder(proto);\n\taddSorting(add);\n\taddSampling(add);\n\taddRanking(add);\n\taddUncleaning(add);\n\treturn proto;\n}\n\nexport default init;\n","import { getUniqueValues } from \"../../../common\";\n\nfunction addSorting(add) {\n\tadd.method(\"unsorted\", function() { return this.values.slice(); });\n\tadd.method(\"ascending\", function() { return this.sorted_values.slice(); });\n\tadd.method(\"descending\", function() { return this.sorted_values.slice().reverse(); });\n\tadd.method(\"unique\", function() { return getUniqueValues(this.values); });\n\tadd.method(\"uniqueAscending\", function() { return getUniqueValues(this.sorted_values); });\n\tadd.method(\"uniqueDescending\", function() { return getUniqueValues(this.sorted_values).reverse(); });\n}\n\nexport default addSorting;\n","import { randomFromArray, sampleArray } from \"../../../common\";\n\n\nfunction addSampling(add) {\n\tadd.method(\"random\", function(nextRandom) {\n\t\treturn randomFromArray(this.values, nextRandom);\n\t});\n\n\tadd.method(\"sample\", function(n_samples, replace, nextRandom) {\n\t\treturn sampleArray(this.values, n_samples, replace, nextRandom);\n\t});\n}\n\n\nexport default addSampling;\n","import { rank } from \"../../../common\";\n\nfunction addRanks(add) {\n\tadd.method(\"rank\", function(lowest_first, ties_method) {\n\t\treturn rank(this.values, this.sorted_values, lowest_first, ties_method);\n\t});\n}\n\nexport default addRanks;\n","import { uncleanArray } from \"../../../common\";\n\nfunction addUncleaning(add) {\n\tadd.method(\"unclean\", function(dataset) {\n\t\tif (dataset && dataset.length < this.values.length) throw new RangeError(\"dataset is too short\");\n\t\tif (dataset && dataset.length > this.values.length) throw new RangeError(\"dataset is too long\");\n\t\tdataset = dataset || this.values;\n\t\treturn uncleanArray(dataset, this.dropped_indexes);\n\t});\n}\n\nexport default addUncleaning;\n","import { createAdder, identity } from \"../../common\";\nimport { isAscending, isDescending } from \"../utils\";\n\n\nfunction init(obj, input_data, accessor) {\n\taccessor = accessor || identity;\n\n\tvar sorted_values = null;\n\tvar dropped_indexes = [];\n\tvar n_empty = 0;\n\n\tvar min = null;\n\tvar i = 0;\n\twhile (min === null && i < input_data.length) {\n\t\tvar val = accessor(input_data[i++]);\n\t\tif (typeof val === \"string\") min = val;\n\t}\n\tvar max = min;\n\n\tvar values = Object.freeze(input_data.reduce(function(arr, d, i) {\n\t\tvar value = accessor(d);\n\t\tif (typeof value === \"string\") {\n\t\t\tarr.push(value);\n\t\t\tmin = value < min ? value : min;\n\t\t\tmax = value > max ? value : max;\n\t\t\tif (!value) n_empty++;\n\t\t}\n\t\telse dropped_indexes.push(i);\n\t\treturn arr;\n\t}, []));\n\n\tvar add = createAdder(obj);\n\n\tadd.prop(\"enhanced_array\", true);\n\tadd.prop(\"string_array\", true);\n\tadd.prop(\"values\", values);\n\tadd.prop(\"min\", min);\n\tadd.prop(\"max\", max);\n\tadd.prop(\"length\", values.length);\n\tadd.prop(\"dropped_indexes\", Object.freeze(dropped_indexes));\n\tadd.prop(\"n_empty\", n_empty);\n\tadd.method(\"extent\", function() { return [this.min, this.max]; });\n\n\tadd.getter(\"sorted_values\", function() {\n\t\tif (!sorted_values) {\n\t\t\tif (isAscending(values)) sorted_values = values;\n\t\t\tif (isDescending(values)) sorted_values = Object.freeze(values.slice().reverse());\n\t\t\telse sorted_values = Object.freeze(values.slice().sort());\n\t\t}\n\t\treturn sorted_values;\n\t});\n\n\treturn obj;\n}\n\n\nexport default init;\n","function isAscending(arr) {\n\tif (arr.length < 2) return true;\n\tvar prev = arr[0];\n\treturn arr.every(function(d) {\n\t\tif (d >= prev) {\n\t\t\tprev = d;\n\t\t\treturn true;\n\t\t}\n\t});\n}\n\nfunction isDescending(arr) {\n\tif (arr.length < 2) return true;\n\tvar prev = arr[0];\n\treturn arr.every(function(d) {\n\t\tif (d <= prev) {\n\t\t\tprev = d;\n\t\t\treturn true;\n\t\t}\n\t});\n}\n\nexport { isAscending, isDescending };\n","import { createNumericArray, createStringArray, createDatetimeArray } from \"@flourish/enhanced-arrays\";\nimport { isDate } from \"../common\";\n\nvar ERROR_MESSAGE = \"Input data must be an array or Flourish array\";\n\n\nfunction getFrozenData(input_data, accessor) {\n\tif (!input_data) throw new TypeError(ERROR_MESSAGE);\n\tif (input_data.enhanced_array) return input_data;\n\tif (!Array.isArray(input_data)) throw new TypeError(ERROR_MESSAGE);\n\n\tvar acc = accessor || function(x) { return x; };\n\n\tfor (var i = 0; i < input_data.length; i++) {\n\t\tvar value = acc(input_data[i]);\n\t\tvar type = typeof value;\n\t\tif (type === \"number\") return createNumericArray(input_data, accessor);\n\t\tif (type === \"string\") return createStringArray(input_data, accessor);\n\t\tif (isDate(value)) return createDatetimeArray(input_data, accessor);\n\t}\n\n\treturn createNumericArray(input_data, accessor);\n}\n\n\nfunction initData(instance) {\n\tvar current_data = getFrozenData([]);\n\n\treturn function(data, accessor) {\n\t\tif (data === undefined) return current_data;\n\t\tcurrent_data = getFrozenData(data, accessor);\n\t\treturn instance;\n\t};\n}\n\n\nexport { initData };\n","import { select } from \"d3-selection\";\nimport { remToPx, getFont, getSignificantDigitCount, getExponent } from \"../common\";\n\nvar DUMMY_TEXT = \"Testing\";\n\n\nfunction degToRad(deg) {\n\treturn deg * (Math.PI / 180);\n}\n\n\nfunction dropRepeatedLabels(tick_array, format) {\n\tvar last_value;\n\treturn tick_array.filter(function(value) {\n\t\tvar fv = format(value);\n\t\tif (fv === last_value) return;\n\t\tlast_value = fv;\n\t\treturn true;\n\t});\n}\n\nfunction getFitTextFunction(params) {\n\tvar max_space = params.max_space !== undefined ? params.max_space : 100;\n\tvar text_height = params.text_height !== undefined ? params.text_height : remToPx(1);\n\tvar max_lines = params.max_lines;\n\tvar angle = params.angle || 0;\n\tvar canvas = document.createElement(\"canvas\");\n\tvar ctx = canvas.getContext(\"2d\");\n\tctx.font = params.font;\n\n\tvar max_width = max_space;\n\tvar theta = degToRad(angle);\n\tmax_width = (max_space - text_height * Math.sin(theta)) / Math.cos(theta);\n\n\treturn function(text) {\n\t\tvar lines = [];\n\t\tvar max_line_width = 0;\n\n\t\t// Everything fits in one line, so leave as a single string\n\t\tvar text_width = ctx.measureText(text).width;\n\t\tif (text_width <= max_width) {\n\t\t\tlines.push(text);\n\t\t\tmax_line_width = text_width;\n\t\t}\n\n\t\t// Otherwise…\n\t\telse {\n\t\t\t// Create array of words\n\t\t\tvar words = text.trim().split(/\\s+/g);\n\t\t\t// Loop through the words, adding them until they won't fit\n\t\t\tvar current_line = \"\";\n\t\t\tfor (var i = 0; i < words.length; i++) {\n\t\t\t\tvar word = words[i];\n\t\t\t\tvar string = current_line + (current_line ? \" \" : \"\") + word;\n\t\t\t\tvar string_width = ctx.measureText(string).width;\n\t\t\t\t// If the string including the next word fits, update the\n\t\t\t\t// current_line and the max_width\n\t\t\t\tif (string_width <= max_width) {\n\t\t\t\t\tcurrent_line = string;\n\t\t\t\t\tmax_line_width = Math.max(max_line_width, string_width);\n\t\t\t\t}\n\t\t\t\t// If we reach this point, the text has overflowed,\n\t\t\t\t// so should always result in a truncation or a new line\n\t\t\t\telse {\n\t\t\t\t\tvar last_line = lines.length + 1 == max_lines;\n\t\t\t\t\tif (!last_line && current_line) {\n\t\t\t\t\t\tlines.push(current_line);\n\t\t\t\t\t\tvar word_width = ctx.measureText(word).width;\n\t\t\t\t\t\tif (word_width <= max_width) {\n\t\t\t\t\t\t\tcurrent_line = word;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Truncate\n\t\t\t\t\tvar remove_counter = 1;\n\t\t\t\t\tvar truncated_string = string;\n\t\t\t\t\tdo {\n\t\t\t\t\t\ttruncated_string = string.substring(0, string.length - remove_counter) + \"…\";\n\t\t\t\t\t\tstring_width = ctx.measureText(truncated_string).width;\n\t\t\t\t\t}\n\t\t\t\t\twhile ((string_width > max_width) && (++remove_counter < string.length));\n\t\t\t\t\tmax_line_width = Math.max(max_line_width, string_width);\n\t\t\t\t\tcurrent_line = truncated_string;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlines.push(current_line);\n\t\t}\n\t\treturn { lines: lines, text_width: max_line_width };\n\t};\n}\n\n\nfunction getAutoLabelSpaceFunction(instance, dimension) {\n\tvar UNITS = [ \"px\", \"rem\", \"fraction\" ];\n\tdimension = dimension || \"width\";\n\tvar value = 0.3;\n\tvar unit = \"fraction\";\n\n\tvar getValues = function() {\n\t\tvar dim = instance[dimension]();\n\t\tvar px = unit === \"px\" ? value : (unit === \"rem\" ? remToPx(value) : (value * dim));\n\t\treturn {\n\t\t\tpx: px,\n\t\t\trem: unit === \"rem\" ? value : px / remToPx(1),\n\t\t\tfraction: unit === \"fraction\" ? value : px / dim,\n\t\t\tunit: unit\n\t\t};\n\t};\n\n\treturn function(v, u) {\n\t\tif (v === undefined) return getValues();\n\t\tvalue = Math.max(v, 0);\n\t\tunit = UNITS.indexOf(u) !== -1 ? u : \"px\";\n\t\treturn instance;\n\t};\n}\n\n\nfunction initXTicks(instance, state) {\n\tvar x = state.x;\n\tvar ticks = Object.freeze([]);\n\tvar group = instance.chart.select(\".fl-x-axes\");\n\n\tvar setTicks = function(tick_array) {\n\t\tvar type = instance.xData().string_array ? \"string\" : \"numeric\";\n\t\tvar font = getFont(select(\".fl-x-axes\"), x.tick_label_size, x.tick_label_weight);\n\t\tvar angle = x.tick_label_position === \"default\" ? +x.tick_label_angle : 90;\n\t\tvar max_box_height = 0;\n\t\tvar format = instance.xFormat();\n\t\tvar text_height;\n\t\tvar font_size = remToPx(x.tick_label_size);\n\t\t// Used in conjunction with line height for estimating the height of each line\n\t\t// in a multiline label\n\n\t\tgroup.append(\"text\")\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.style(\"font\", font)\n\t\t\t.each(function() {\n\t\t\t\tvar bounds = select(this).text(DUMMY_TEXT).node().getBoundingClientRect();\n\t\t\t\ttext_height = bounds.height;\n\t\t\t})\n\t\t\t.remove();\n\n\t\t// filter out dates that will give repeated tick labels\n\t\tif (typeof tick_array[0] === \"object\") tick_array = dropRepeatedLabels(tick_array, format);\n\n\t\tvar max_space = remToPx(x.tick_label_space);\n\t\tif (x.tick_label_space_mode === \"auto\") max_space = instance.xTicks.autoLabelSpace().px;\n\t\tvar params =  { text_height: text_height, max_space: max_space, font: font, angle: 90 - angle, max_lines: x.tick_label_max_lines };\n\t\tvar fitText = getFitTextFunction(params);\n\n\t\tticks = tick_array.map(function(value, index) {\n\t\t\tvar result = fitText(format(value));\n\t\t\tvar lines = result.lines;\n\t\t\tvar text_width = result.text_width;\n\t\t\tvar box_width, box_height, box_width_left, box_width_right, box_height_left, box_height_right;\n\t\t\tvar multiline_offset = 0;\n\n\t\t\tvar total_text_height = (text_height * lines.length) + ((lines.length - 1) * x.tick_label_line_height);\n\t\t\tif (angle === 0 || angle === 90) {\n\t\t\t\t// Add extra padding for non-rotated text\n\t\t\t\tbox_width = angle === 0 ? text_width + remToPx(0.5) : total_text_height;\n\t\t\t\tbox_height = angle === 0 ? total_text_height : text_width;\n\t\t\t\tbox_width_left = box_width_right = box_width / 2;\n\t\t\t\tbox_height_left = box_height;\n\t\t\t\tbox_height_right = box_height;\n\t\t\t\tif (angle === 90) multiline_offset = lines.length < 2 ? 0 : ((lines.length - 1)/2 * (font_size * x.tick_label_line_height));\n\t\t\t}\n\t\t\telse {\n\t\t\t\t/*\n\t\t\t   tl------tr <- rotate about tr\n\t\t\t\t |        |\n\t\t\t\t bl------br\n\t\t\t*/\n\t\t\t\tvar theta = degToRad(angle);\n\t\t\t\tvar sinTheta = Math.sin(theta);\n\t\t\t\tvar cosTheta = Math.cos(theta);\n\t\t\t\tbox_width_left = text_width * cosTheta; // horizontal distance between tl and tr after rotation\n\t\t\t\tbox_width_right = total_text_height * sinTheta; // horizontal distance between br and tr after rotation\n\t\t\t\tbox_height_left = text_width * sinTheta; // vertical distance between tl and tr after rotation\n\t\t\t\tbox_height_right = total_text_height * cosTheta; // vertical distance between br and tr after rotation\n\t\t\t\tbox_width = box_width_left + box_width_right; // total bounding box width after rotation\n\t\t\t\tbox_height = box_height_left + box_height_right; // total bounding box height after rotation\n\t\t\t}\n\n\t\t\t// Reverse left and right when axis is at top\n\t\t\t// This can probably be simplified with some basic trigonometry\n\t\t\tif (x.axis_position === \"top\" || x.axis_position === \"float-above\") {\n\t\t\t\tvar temp = box_width_left;\n\t\t\t\tbox_width_left = box_width_right;\n\t\t\t\tbox_width_right = temp;\n\t\t\t\ttemp = box_height_left;\n\t\t\t\tbox_height_left = box_height_right;\n\t\t\t\tbox_height_right = temp;\n\n\t\t\t\t// Also adjust multiline offsets for angled top/above ticks, since we want\n\t\t\t\t// the lines to flow upwards not downwards\n\t\t\t\tif (angle !== 0 && angle !== 90) multiline_offset = lines.length < 2 ? 0 : (lines.length - 1) * (font_size * x.tick_label_line_height);\n\t\t\t}\n\n\t\t\tmax_box_height = Math.max(max_box_height, box_height);\n\t\t\tvar significant_digits = type === \"numeric\" ? getSignificantDigitCount(value) : null;\n\t\t\tvar exponent = type === \"numeric\" ? getExponent(value) : null;\n\n\t\t\treturn Object.freeze({\n\t\t\t\tindex: index,\n\t\t\t\tvalue: value,\n\t\t\t\tlines: lines,\n\t\t\t\tsignificant_digits: significant_digits,\n\t\t\t\texponent: exponent,\n\t\t\t\ttext_width: text_width,\n\t\t\t\ttext_height: text_height,\n\t\t\t\tbox_width: box_width,\n\t\t\t\tbox_height: box_height,\n\t\t\t\tbox_width_left: box_width_left,\n\t\t\t\tbox_width_right: box_width_right,\n\t\t\t\tbox_height_left: box_height_left,\n\t\t\t\tbox_height_right: box_height_right,\n\t\t\t\tmultiline_offset: multiline_offset\n\t\t\t});\n\t\t});\n\n\t\tticks.type = type;\n\t\tticks.max_box_height = x.tick_label_space_mode === \"fixed\" ? remToPx(x.tick_label_space) : max_box_height;\n\t\tObject.freeze(ticks);\n\n\t\treturn instance;\n\t};\n\n\tvar getTicks = function() { return ticks; };\n\tgetTicks._update = setTicks;\n\tgetTicks.autoLabelSpace = getAutoLabelSpaceFunction(instance, \"height\");\n\n\treturn getTicks;\n}\n\n\nfunction initVerticalTicks(instance, state, y_name) {\n\tvar y = state[y_name];\n\tvar data_name = y_name + \"Data\";\n\tvar format_name = y_name + \"Format\";\n\tvar ticks_name = y_name + \"Ticks\";\n\tvar ticks = Object.freeze([]);\n\tvar group = instance.chart.select(\".fl-y-axes\");\n\n\tvar setTicks = function(tick_array) {\n\t\tvar type = instance[data_name]().string_array ? \"string\" : \"numeric\";\n\t\tvar font = getFont(select(\".fl-y-axes\"), y.tick_label_size, y.tick_label_weight);\n\t\tvar angle = y.tick_label_position === \"default\" ? +y.tick_label_angle : 0;\n\t\tvar max_box_width = 0;\n\t\tvar format = instance[format_name]();\n\t\tvar text_height;\n\n\t\tgroup.append(\"text\")\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.style(\"font\", font)\n\t\t\t.each(function() {\n\t\t\t\tvar bounds = select(this).text(DUMMY_TEXT).node().getBoundingClientRect();\n\t\t\t\ttext_height = bounds.height;\n\t\t\t})\n\t\t\t.remove();\n\n\t\t// filter out dates that will give repeated tick labels\n\t\tif (typeof tick_array[0] === \"object\") tick_array = dropRepeatedLabels(tick_array, format);\n\n\t\tvar max_space = remToPx(y.tick_label_space);\n\t\tif (y.tick_label_space_mode === \"auto\") max_space = instance[ticks_name].autoLabelSpace().px;\n\t\tvar params =  { text_height: text_height, max_space: max_space, font: font, angle: angle, max_lines: angle ? 1 : y.tick_label_max_lines };\n\t\tvar fitText = getFitTextFunction(params);\n\n\t\tticks = tick_array.map(function(value, index) {\n\t\t\tvar result = fitText(format(value));\n\t\t\tvar lines = result.lines;\n\t\t\tvar text_width = result.text_width;\n\t\t\tvar box_width, box_height, box_width_above, box_width_below, box_height_above, box_height_below;\n\t\t\tvar multiline_offset = 0;\n\n\t\t\tvar total_text_height = (text_height * lines.length) + ((lines.length - 1) * y.tick_label_line_height);\n\t\t\tif (angle === 0 || angle === 90) {\n\t\t\t\tbox_width = !angle ? text_width : total_text_height;\n\t\t\t\t// Add extra padding for text rotated by 90 degrees\n\t\t\t\tbox_height = !angle ? total_text_height : text_width + remToPx(0.5);\n\t\t\t\tbox_width_above = box_width;\n\t\t\t\tbox_width_below = box_width;\n\t\t\t\tbox_height_above = box_height_below = box_height / 2;\n\t\t\t\tif (angle === 0) multiline_offset = lines.length < 2 ? 0 : ((lines.length - 1)/2 * (text_height * y.tick_label_line_height));\n\t\t\t}\n\t\t\telse {\n\t\t\t\t/*\n\t\t\t   tl------tr\n\t\t\t\t |        |\n\t\t\t\t bl------br <- rotate about br\n\t\t\t\t*/\n\t\t\t\tvar theta = degToRad(angle);\n\t\t\t\tvar sinTheta = Math.sin(theta);\n\t\t\t\tvar cosTheta = Math.cos(theta);\n\t\t\t\tbox_width_above = total_text_height * sinTheta; // horizontal distance between tr and br after rotation\n\t\t\t\tbox_width_below = text_width * cosTheta; // horizontal distance between bl and br after rotation\n\t\t\t\tbox_height_above = total_text_height * cosTheta; // vertical distance between tr and br after rotation\n\t\t\t\tbox_height_below = text_width * sinTheta; // vertical distance between bl and br after rotation\n\t\t\t\tbox_width = box_width_above + box_width_below; // total bounding box width after rotation\n\t\t\t\tbox_height = box_height_above + box_height_below; // total bounding box height after rotation\n\t\t\t}\n\n\t\t\tmax_box_width = Math.max(max_box_width, box_width);\n\t\t\tvar significant_digits = type === \"numeric\" ? getSignificantDigitCount(value) : null;\n\t\t\tvar exponent = type === \"numeric\" ? getExponent(value) : null;\n\n\t\t\treturn Object.freeze({\n\t\t\t\tindex: index,\n\t\t\t\tvalue: value,\n\t\t\t\tlines: lines,\n\t\t\t\ttype: type,\n\t\t\t\tsignificant_digits: significant_digits,\n\t\t\t\texponent: exponent,\n\t\t\t\ttext_width: text_width,\n\t\t\t\ttext_height: text_height,\n\t\t\t\tbox_width: box_width,\n\t\t\t\tbox_height: box_height,\n\t\t\t\tbox_width_above: box_width_above,\n\t\t\t\tbox_width_below: box_width_below,\n\t\t\t\tbox_height_above: box_height_above,\n\t\t\t\tbox_height_below: box_height_below,\n\t\t\t\tmultiline_offset: multiline_offset\n\t\t\t});\n\t\t});\n\n\t\tticks.type = type;\n\t\tticks.max_box_width = y.tick_label_space_mode === \"fixed\" ? remToPx(y.tick_label_space) : max_box_width;\n\t\tObject.freeze(ticks);\n\n\t\treturn instance;\n\t};\n\n\tvar getTicks = function() { return ticks; };\n\tgetTicks._update = setTicks;\n\tgetTicks.autoLabelSpace = getAutoLabelSpaceFunction(instance);\n\n\treturn getTicks;\n}\n\n// TODO: Maybe this should take an object?\nfunction initYTicks(instance, state) {\n\treturn initVerticalTicks(instance, state, \"y\");\n}\n\nfunction initY2Ticks(instance, state) {\n\treturn initVerticalTicks(instance, state, \"y2\");\n}\n\n\nfunction initAutoTicks(instance, axis = \"x\") {\n\tconst DEFAULT = () => instance[axis + \"Scale\"]({ \"domain_only\": true }).ticks();\n\tlet value = DEFAULT;\n\n\treturn function(v) {\n\t\tif (v === undefined) return value;\n\t\tif (v === null) value = DEFAULT;\n\t\telse value = v;\n\t\treturn instance;\n\t};\n}\n\n\nfunction initXAutoTicks(instance) {\n\tconst func = initAutoTicks(instance, \"x\");\n\treturn v => func(v);\n}\n\n\nfunction initYAutoTicks(instance) {\n\tconst func = initAutoTicks(instance, \"y\");\n\treturn v => func(v);\n}\n\n\nfunction initY2AutoTicks(instance) {\n\tconst func = initAutoTicks(instance, \"y2\");\n\treturn v => func(v);\n}\n\n\nexport { initXTicks, initYTicks, initY2Ticks, initXAutoTicks, initYAutoTicks, initY2AutoTicks };\n","function initAutoTitle(instance) {\n\tvar auto_title = \"\";\n\n\treturn function(value) {\n\t\tif (value === undefined) return auto_title;\n\t\tauto_title = value;\n\t\treturn instance;\n\t};\n}\n\n\nfunction initXTitle(instance, state) {\n\tinstance.xAutoTitle = initAutoTitle(instance);\n\tinstance.xAutoTitle(\"X\");\n\n\treturn function() {\n\t\tvar text = (state.x.title_mode === \"auto\" ? instance.xAutoTitle() : state.x.title);\n\t\treturn text.trim();\n\t};\n}\n\n\nfunction initYTitle(instance, state) {\n\tinstance.yAutoTitle = initAutoTitle(instance);\n\tinstance.yAutoTitle(\"Y\");\n\n\treturn function() {\n\t\tvar text = state.y.title_mode === \"auto\" ? instance.yAutoTitle() : state.y.title;\n\t\treturn text.trim();\n\t};\n}\n\n\nfunction initY2Title(instance, state) {\n\tinstance.y2AutoTitle = initAutoTitle(instance);\n\tinstance.y2AutoTitle(\"Y2\");\n\n\treturn function() {\n\t\tvar text = (state.y2.title_mode === \"auto\" ? instance.y2AutoTitle() : state.y2.title);\n\t\treturn text.trim();\n\t};\n}\n\n\nexport { initXTitle, initYTitle, initY2Title };\n","import { remToPx, getFont } from \"../common\";\n\n\nfunction getXTitleHeight(instance, state) {\n\tvar x = state.x;\n\tvar title_text = instance.xTitle();\n\tif (x.axis_visible === \"off\" || !title_text) return 0;\n\n\tvar title_container = instance.chart.select(\".fl-x-axis .fl-axis-title\");\n\tvar font = getFont(title_container, x.title_size, x.title_weight);\n\n\tvar title_selection = title_container.append(\"text\")\n\t\t.text(title_text)\n\t\t.style(\"opacity\", 0)\n\t\t.style(\"font\", font);\n\n\tvar title_height = title_selection.node().getBoundingClientRect().height;\n\ttitle_selection.remove();\n\treturn title_height + 2 * remToPx(x.title_padding);\n}\n\n\nfunction getYTitleHeight(instance, state) {\n\tvar y = state.y;\n\tvar title_text = instance.yTitle();\n\tif (!y.axis_visible || !title_text) return 0;\n\n\tvar title_container = instance.chart.select(\".fl-left-axis .fl-axis-title\");\n\tvar font = getFont(title_container, y.title_size, y.title_weight);\n\n\tvar title_selection = title_container.append(\"text\")\n\t\t.text(title_text)\n\t\t.style(\"opacity\", 0)\n\t\t.style(\"font\", font);\n\n\tvar title_height = title_selection.node().getBoundingClientRect().height;\n\ttitle_selection.remove();\n\treturn title_height + 2 * remToPx(y.title_padding);\n}\n\n// TODO. This function is almost identical to the above so should maybe be combined\n// and take arguments for the state property (y/y2) and the container.\nfunction getY2TitleHeight(instance, state) {\n\tvar y = state.y2;\n\tvar title_text = instance.y2Title();\n\tif (!y.axis_visible || !title_text) return 0;\n\n\tvar title_container = instance.chart.select(\".fl-right-axis .fl-axis-title\");\n\tvar font = getFont(title_container, y.title_size, y.title_weight);\n\n\tvar title_selection = title_container.append(\"text\")\n\t\t.text(title_text)\n\t\t.style(\"opacity\", 0)\n\t\t.style(\"font\", font);\n\n\tvar title_height = title_selection.node().getBoundingClientRect().height;\n\ttitle_selection.remove();\n\treturn title_height + 2 * remToPx(y.title_padding);\n}\n\n\nfunction getXAxisSpace(instance, state) {\n\t// Space for x axis\n\tvar x = state.x;\n\tvar pos = x.axis_position;\n\tif (pos === \"off\") return 0;\n\tvar tick_space = 0;\n\tvar tick_padding = 0;\n\tvar tick_label_space = 0;\n\tif (pos === \"top\" || pos == \"bottom\") {\n\t\tvar ticks = instance.xTicks();\n\t\ttick_space = ticks.length && x.tick_side === \"out\" && x.tick_label_position === \"default\" ? remToPx(x.tick_length) : 0;\n\t\ttick_label_space = ticks.max_box_height || 0;\n\t\ttick_padding = ticks.length ? remToPx(x.tick_padding) : 0;\n\t}\n\tvar title_space = getXTitleHeight(instance, state);\n\treturn tick_space + tick_padding + tick_label_space + title_space;\n}\n\n\nfunction getTopMargin(instance, state) {\n\tvar x = state.x;\n\tvar x_axis_space = 0;\n\tif (!instance.xHide() && [\"top\", \"float-above\"].indexOf(x.axis_position) !== -1) {\n\t\tx_axis_space = getXAxisSpace(instance, state);\n\t}\n\n\tvar y_offset = 0, y2_offset = 0;\n\tvar y_ticks = !instance.yHide() ? instance.yTicks() : [];\n\tif (y_ticks.length) {\n\t\tvar last_y_tick = y_ticks[y_ticks.length - 1]; // Assume last tick is placed at the top of the axis\n\t\tif (state.y.tick_label_position == \"default\") y_offset = 0.9 * last_y_tick.box_height_above;\n\t\telse if (state.y.tick_label_position == \"above\") y_offset += last_y_tick.box_height;\n\t}\n\tvar y2_ticks = !instance.y2Hide() ? instance.y2Ticks() : [];\n\tif (y2_ticks.length) {\n\t\tvar last_y2_tick = y2_ticks[y2_ticks.length - 1]; // Assume last tick is placed at the top of the axis\n\t\tif (state.y2.tick_label_position == \"default\") y2_offset = 0.9 * last_y2_tick.box_height_above;\n\t\telse if (state.y2.tick_label_position == \"above\") y2_offset += last_y2_tick.box_height;\n\t}\n\tvar y_overflow = Math.max(remToPx(0.25), y_offset, y2_offset);\n\treturn Math.max(x_axis_space, y_overflow);\n}\n\n\nfunction getBottomMargin(instance, state) {\n\tvar x = state.x;\n\tvar x_axis_space = 0;\n\tif (!instance.xHide() && [\"bottom\", \"float-below\"].indexOf(x.axis_position) !== -1) {\n\t\tx_axis_space = getXAxisSpace(instance, state);\n\t}\n\tvar y_offset = 0, y2_offset = 0;\n\tvar y_ticks = !instance.yHide() ? instance.yTicks() : [];\n\tif (y_ticks.length) {\n\t\tvar first_y_tick = y_ticks[0]; // Assume first tick is placed at the bottom of the axis\n\t\tif (state.y.tick_label_position == \"default\") y_offset = 0.9 * first_y_tick.box_height_below;\n\t\telse if (state.y.tick_label_position == \"below\") y_offset += first_y_tick.box_height;\n\t}\n\tvar y2_ticks = !instance.y2Hide() ? instance.y2Ticks() : [];\n\tif (y2_ticks.length) {\n\t\tvar first_y2_tick = y2_ticks[0]; // Assume first tick is placed at the bottom of the axis\n\t\tif (state.y2.tick_label_position == \"default\") y2_offset = 0.9 * first_y2_tick.box_height_below;\n\t\telse if (state.y2.tick_label_position == \"below\") y2_offset += first_y2_tick.box_height;\n\t}\n\tvar y_overflow = Math.max(remToPx(0.25), y_offset, y2_offset);\n\treturn Math.max(x_axis_space, y_overflow);\n}\n\n\nfunction getLeftMargin(instance, state) {\n\t// Space for y axis\n\tvar y = state.y;\n\tvar axis_width = 0;\n\tif (y.axis_visible) {\n\t\tvar ticks = !instance.yHide() ? instance.yTicks() : [];\n\t\tvar tick_space = ticks.length && y.tick_side === \"out\" && y.tick_label_position === \"default\" ? remToPx(y.tick_length) : 0;\n\t\tvar tick_padding = ticks.length ? remToPx(y.tick_padding) : 0;\n\t\tvar tick_label_space = ticks.max_box_width || 0;\n\t\tvar title_space = !instance.yHide() ? getYTitleHeight(instance, state) : 0;\n\t\taxis_width = tick_space + tick_padding + tick_label_space + title_space;\n\t}\n\n\t// Space for overflowing x tick\n\tvar x_overflow = remToPx(0.25), offset = 0;\n\tvar x_ticks = !instance.xHide() ? instance.xTicks() : [];\n\tif (x_ticks.length) {\n\t\tvar first_x_tick = x_ticks[0]; // Assume first tick is placed at the left edge of the axis\n\t\tif (state.x.tick_label_position == \"default\") offset = 0.9 * first_x_tick.box_width_left;\n\t\telse if (state.x.tick_label_position == \"left\") offset = first_x_tick.box_width;\n\t\tx_overflow = Math.max(x_overflow, offset);\n\t}\n\n\treturn Math.max(axis_width, x_overflow);\n}\n\n\nfunction getRightMargin(instance, state) {\n\t// Space for y axis\n\tvar y2 = state.y2;\n\tvar axis_width = 0;\n\tif (y2.axis_visible) {\n\t\tvar y2_ticks = !instance.y2Hide() ? instance.y2Ticks() : [];\n\t\tvar tick_space = y2_ticks.length && (y2.tick_side === \"out\" && y2.tick_label_position === \"default\") ? remToPx(y2.tick_length) : 0;\n\t\tvar tick_padding = y2_ticks.length ? remToPx(y2.tick_padding) : 0;\n\t\tvar tick_label_space = y2_ticks.max_box_width || 0;\n\t\tvar title_space = !instance.y2Hide() ? getY2TitleHeight(instance, state) : 0;\n\t\taxis_width = tick_space + tick_padding + tick_label_space + title_space;\n\t}\n\n\t// Space for overflowing x tick\n\tvar x_overflow = remToPx(0.25), offset = 0;\n\tvar x_ticks = !instance.xHide() ? instance.xTicks() : [];\n\tif (x_ticks.length) {\n\t\tvar last_x_tick = x_ticks[x_ticks.length - 1]; // Assume last tick is placed at the right edge of the axis\n\t\tif (state.x.tick_label_position == \"default\") offset = 0.9 * last_x_tick.box_width_right;\n\t\telse if (state.x.tick_label_position == \"right\") offset = last_x_tick.box_width;\n\t\tx_overflow = Math.max(x_overflow, offset);\n\t}\n\n\treturn Math.max(axis_width, x_overflow);\n}\n\n\nfunction initMargins(instance, state) {\n\tvar top, right, bottom, left;\n\n\tvar updateMargins = function(overrides) {\n\t\toverrides = overrides || {};\n\t\ttop = overrides.top !== undefined ? overrides.top : getTopMargin(instance, state);\n\t\tright = overrides.right !== undefined ? overrides.right : getRightMargin(instance, state);\n\t\tbottom = overrides.bottom !== undefined ? overrides.bottom : getBottomMargin(instance, state);\n\t\tleft = overrides.left !== undefined ? overrides.left : getLeftMargin(instance, state);\n\t};\n\n\tvar margins = function() {\n\t\treturn { top: top, right: right, bottom: bottom, left: left };\n\t};\n\n\tmargins._update = updateMargins;\n\n\tObject.defineProperty(margins, \"top\", { get: function() { return top; } });\n\tObject.defineProperty(margins, \"right\", { get: function() { return right; } });\n\tObject.defineProperty(margins, \"bottom\", { get: function() { return bottom; } });\n\tObject.defineProperty(margins, \"left\", { get: function() { return left; } });\n\n\treturn margins;\n}\n\n\nexport { initMargins };\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: {\n      if (typeof domain === \"function\") this.interpolator(domain);\n      else this.range(domain);\n      break;\n    }\n    default: {\n      this.domain(domain);\n      if (typeof interpolator === \"function\") this.interpolator(interpolator);\n      else this.range(interpolator);\n      break;\n    }\n  }\n  return this;\n}\n","import {initRange} from \"./init.js\";\n\nexport const implicit = Symbol(\"implicit\");\n\nexport default function ordinal() {\n  var index = new Map(),\n      domain = [],\n      range = [],\n      unknown = implicit;\n\n  function scale(d) {\n    var key = d + \"\", i = index.get(key);\n    if (!i) {\n      if (unknown !== implicit) return unknown;\n      index.set(key, i = domain.push(d));\n    }\n    return range[(i - 1) % range.length];\n  }\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [], index = new Map();\n    for (const value of _) {\n      const key = value + \"\";\n      if (index.has(key)) continue;\n      index.set(key, domain.push(value));\n    }\n    return scale;\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), scale) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return ordinal(domain, range).unknown(unknown);\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {range as sequence} from \"d3-array\";\nimport {initRange} from \"./init.js\";\nimport ordinal from \"./ordinal.js\";\n\nexport default function band() {\n  var scale = ordinal().unknown(undefined),\n      domain = scale.domain,\n      ordinalRange = scale.range,\n      r0 = 0,\n      r1 = 1,\n      step,\n      bandwidth,\n      round = false,\n      paddingInner = 0,\n      paddingOuter = 0,\n      align = 0.5;\n\n  delete scale.unknown;\n\n  function rescale() {\n    var n = domain().length,\n        reverse = r1 < r0,\n        start = reverse ? r1 : r0,\n        stop = reverse ? r0 : r1;\n    step = (stop - start) / Math.max(1, n - paddingInner + paddingOuter * 2);\n    if (round) step = Math.floor(step);\n    start += (stop - start - step * (n - paddingInner)) * align;\n    bandwidth = step * (1 - paddingInner);\n    if (round) start = Math.round(start), bandwidth = Math.round(bandwidth);\n    var values = sequence(n).map(function(i) { return start + step * i; });\n    return ordinalRange(reverse ? values.reverse() : values);\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];\n  };\n\n  scale.rangeRound = function(_) {\n    return [r0, r1] = _, r0 = +r0, r1 = +r1, round = true, rescale();\n  };\n\n  scale.bandwidth = function() {\n    return bandwidth;\n  };\n\n  scale.step = function() {\n    return step;\n  };\n\n  scale.round = function(_) {\n    return arguments.length ? (round = !!_, rescale()) : round;\n  };\n\n  scale.padding = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, paddingOuter = +_), rescale()) : paddingInner;\n  };\n\n  scale.paddingInner = function(_) {\n    return arguments.length ? (paddingInner = Math.min(1, _), rescale()) : paddingInner;\n  };\n\n  scale.paddingOuter = function(_) {\n    return arguments.length ? (paddingOuter = +_, rescale()) : paddingOuter;\n  };\n\n  scale.align = function(_) {\n    return arguments.length ? (align = Math.max(0, Math.min(1, _)), rescale()) : align;\n  };\n\n  scale.copy = function() {\n    return band(domain(), [r0, r1])\n        .round(round)\n        .paddingInner(paddingInner)\n        .paddingOuter(paddingOuter)\n        .align(align);\n  };\n\n  return initRange.apply(rescale(), arguments);\n}\n\nfunction pointish(scale) {\n  var copy = scale.copy;\n\n  scale.padding = scale.paddingOuter;\n  delete scale.paddingInner;\n  delete scale.paddingOuter;\n\n  scale.copy = function() {\n    return pointish(copy());\n  };\n\n  return scale;\n}\n\nexport function point() {\n  return pointish(band.apply(null, arguments).paddingInner(1));\n}\n","export default function number(x) {\n  return +x;\n}\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport constant from \"./constant.js\";\nimport number from \"./number.js\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(a, b) {\n  var t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    var n = Math.min(domain.length, range.length);\n    if (clamp !== identity) clamp = clamper(domain[0], domain[n - 1]);\n    piecewise = n > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = Array.from(_, number), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = Array.from(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = Array.from(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? true : identity, rescale()) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous() {\n  return transformer()(identity, identity);\n}\n","export default function constants(x) {\n  return function() {\n    return x;\n  };\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": (x, p) => (x * 100).toFixed(p),\n  \"b\": (x) => Math.round(x).toString(2),\n  \"c\": (x) => x + \"\",\n  \"d\": formatDecimal,\n  \"e\": (x, p) => x.toExponential(p),\n  \"f\": (x, p) => x.toFixed(p),\n  \"g\": (x, p) => x.toPrecision(p),\n  \"o\": (x) => Math.round(x).toString(8),\n  \"p\": (x, p) => formatRounded(x * 100, p),\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": (x) => Math.round(x).toString(16).toUpperCase(),\n  \"x\": (x) => Math.round(x).toString(16)\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"−\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"]\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function tickFormat(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport tickFormat from \"./tickFormat.js\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain();\n    var i0 = 0;\n    var i1 = d.length - 1;\n    var start = d[i0];\n    var stop = d[i1];\n    var prestep;\n    var step;\n    var maxIter = 10;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n    \n    while (maxIter-- > 0) {\n      step = tickIncrement(start, stop, count);\n      if (step === prestep) {\n        d[i0] = start\n        d[i1] = stop\n        return domain(d);\n      } else if (step > 0) {\n        start = Math.floor(start / step) * step;\n        stop = Math.ceil(stop / step) * step;\n      } else if (step < 0) {\n        start = Math.ceil(start * step) / step;\n        stop = Math.floor(stop * step) / step;\n      } else {\n        break;\n      }\n      prestep = step;\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous();\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","export default function nice(domain, interval) {\n  domain = domain.slice();\n\n  var i0 = 0,\n      i1 = domain.length - 1,\n      x0 = domain[i0],\n      x1 = domain[i1],\n      t;\n\n  if (x1 < x0) {\n    t = i0, i0 = i1, i1 = t;\n    t = x0, x0 = x1, x1 = t;\n  }\n\n  domain[i0] = interval.floor(x0);\n  domain[i1] = interval.ceil(x1);\n  return domain;\n}\n","import {ticks} from \"d3-array\";\nimport {format} from \"d3-format\";\nimport nice from \"./nice.js\";\nimport {copy, transformer} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\n\nfunction transformLog(x) {\n  return Math.log(x);\n}\n\nfunction transformExp(x) {\n  return Math.exp(x);\n}\n\nfunction transformLogn(x) {\n  return -Math.log(-x);\n}\n\nfunction transformExpn(x) {\n  return -Math.exp(-x);\n}\n\nfunction pow10(x) {\n  return isFinite(x) ? +(\"1e\" + x) : x < 0 ? 0 : x;\n}\n\nfunction powp(base) {\n  return base === 10 ? pow10\n      : base === Math.E ? Math.exp\n      : function(x) { return Math.pow(base, x); };\n}\n\nfunction logp(base) {\n  return base === Math.E ? Math.log\n      : base === 10 && Math.log10\n      || base === 2 && Math.log2\n      || (base = Math.log(base), function(x) { return Math.log(x) / base; });\n}\n\nfunction reflect(f) {\n  return function(x) {\n    return -f(-x);\n  };\n}\n\nexport function loggish(transform) {\n  var scale = transform(transformLog, transformExp),\n      domain = scale.domain,\n      base = 10,\n      logs,\n      pows;\n\n  function rescale() {\n    logs = logp(base), pows = powp(base);\n    if (domain()[0] < 0) {\n      logs = reflect(logs), pows = reflect(pows);\n      transform(transformLogn, transformExpn);\n    } else {\n      transform(transformLog, transformExp);\n    }\n    return scale;\n  }\n\n  scale.base = function(_) {\n    return arguments.length ? (base = +_, rescale()) : base;\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain(_), rescale()) : domain();\n  };\n\n  scale.ticks = function(count) {\n    var d = domain(),\n        u = d[0],\n        v = d[d.length - 1],\n        r;\n\n    if (r = v < u) i = u, u = v, v = i;\n\n    var i = logs(u),\n        j = logs(v),\n        p,\n        k,\n        t,\n        n = count == null ? 10 : +count,\n        z = [];\n\n    if (!(base % 1) && j - i < n) {\n      i = Math.floor(i), j = Math.ceil(j);\n      if (u > 0) for (; i <= j; ++i) {\n        for (k = 1, p = pows(i); k < base; ++k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      } else for (; i <= j; ++i) {\n        for (k = base - 1, p = pows(i); k >= 1; --k) {\n          t = p * k;\n          if (t < u) continue;\n          if (t > v) break;\n          z.push(t);\n        }\n      }\n      if (z.length * 2 < n) z = ticks(u, v, n);\n    } else {\n      z = ticks(i, j, Math.min(j - i, n)).map(pows);\n    }\n\n    return r ? z.reverse() : z;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    if (specifier == null) specifier = base === 10 ? \".0e\" : \",\";\n    if (typeof specifier !== \"function\") specifier = format(specifier);\n    if (count === Infinity) return specifier;\n    if (count == null) count = 10;\n    var k = Math.max(1, base * count / scale.ticks().length); // TODO fast estimate?\n    return function(d) {\n      var i = d / pows(Math.round(logs(d)));\n      if (i * base < base - 0.5) i *= base;\n      return i <= k ? specifier(d) : \"\";\n    };\n  };\n\n  scale.nice = function() {\n    return domain(nice(domain(), {\n      floor: function(x) { return pows(Math.floor(logs(x))); },\n      ceil: function(x) { return pows(Math.ceil(logs(x))); }\n    }));\n  };\n\n  return scale;\n}\n\nexport default function log() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, log()).base(scale.base());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return scale;\n}\n","import {bisector, tickStep} from \"d3-array\";\nimport {timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond} from \"d3-time\";\nimport {timeFormat} from \"d3-time-format\";\nimport continuous, {copy} from \"./continuous.js\";\nimport {initRange} from \"./init.js\";\nimport nice from \"./nice.js\";\n\nvar durationSecond = 1000,\n    durationMinute = durationSecond * 60,\n    durationHour = durationMinute * 60,\n    durationDay = durationHour * 24,\n    durationWeek = durationDay * 7,\n    durationMonth = durationDay * 30,\n    durationYear = durationDay * 365;\n\nfunction date(t) {\n  return new Date(t);\n}\n\nfunction number(t) {\n  return t instanceof Date ? +t : +new Date(+t);\n}\n\nexport function calendar(year, month, week, day, hour, minute, second, millisecond, format) {\n  var scale = continuous(),\n      invert = scale.invert,\n      domain = scale.domain;\n\n  var formatMillisecond = format(\".%L\"),\n      formatSecond = format(\":%S\"),\n      formatMinute = format(\"%I:%M\"),\n      formatHour = format(\"%I %p\"),\n      formatDay = format(\"%a %d\"),\n      formatWeek = format(\"%b %d\"),\n      formatMonth = format(\"%B\"),\n      formatYear = format(\"%Y\");\n\n  var tickIntervals = [\n    [second,  1,      durationSecond],\n    [second,  5,  5 * durationSecond],\n    [second, 15, 15 * durationSecond],\n    [second, 30, 30 * durationSecond],\n    [minute,  1,      durationMinute],\n    [minute,  5,  5 * durationMinute],\n    [minute, 15, 15 * durationMinute],\n    [minute, 30, 30 * durationMinute],\n    [  hour,  1,      durationHour  ],\n    [  hour,  3,  3 * durationHour  ],\n    [  hour,  6,  6 * durationHour  ],\n    [  hour, 12, 12 * durationHour  ],\n    [   day,  1,      durationDay   ],\n    [   day,  2,  2 * durationDay   ],\n    [  week,  1,      durationWeek  ],\n    [ month,  1,      durationMonth ],\n    [ month,  3,  3 * durationMonth ],\n    [  year,  1,      durationYear  ]\n  ];\n\n  function tickFormat(date) {\n    return (second(date) < date ? formatMillisecond\n        : minute(date) < date ? formatSecond\n        : hour(date) < date ? formatMinute\n        : day(date) < date ? formatHour\n        : month(date) < date ? (week(date) < date ? formatDay : formatWeek)\n        : year(date) < date ? formatMonth\n        : formatYear)(date);\n  }\n\n  function tickInterval(interval, start, stop) {\n    if (interval == null) interval = 10;\n\n    // If a desired tick count is specified, pick a reasonable tick interval\n    // based on the extent of the domain and a rough estimate of tick size.\n    // Otherwise, assume interval is already a time interval and use it.\n    if (typeof interval === \"number\") {\n      var target = Math.abs(stop - start) / interval,\n          i = bisector(function(i) { return i[2]; }).right(tickIntervals, target),\n          step;\n      if (i === tickIntervals.length) {\n        step = tickStep(start / durationYear, stop / durationYear, interval);\n        interval = year;\n      } else if (i) {\n        i = tickIntervals[target / tickIntervals[i - 1][2] < tickIntervals[i][2] / target ? i - 1 : i];\n        step = i[1];\n        interval = i[0];\n      } else {\n        step = Math.max(tickStep(start, stop, interval), 1);\n        interval = millisecond;\n      }\n      return interval.every(step);\n    }\n\n    return interval;\n  }\n\n  scale.invert = function(y) {\n    return new Date(invert(y));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? domain(Array.from(_, number)) : domain().map(date);\n  };\n\n  scale.ticks = function(interval) {\n    var d = domain(),\n        t0 = d[0],\n        t1 = d[d.length - 1],\n        r = t1 < t0,\n        t;\n    if (r) t = t0, t0 = t1, t1 = t;\n    t = tickInterval(interval, t0, t1);\n    t = t ? t.range(t0, t1 + 1) : []; // inclusive stop\n    return r ? t.reverse() : t;\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    return specifier == null ? tickFormat : format(specifier);\n  };\n\n  scale.nice = function(interval) {\n    var d = domain();\n    return (interval = tickInterval(interval, d[0], d[d.length - 1]))\n        ? domain(nice(d, interval))\n        : scale;\n  };\n\n  scale.copy = function() {\n    return copy(scale, calendar(year, month, week, day, hour, minute, second, millisecond, format));\n  };\n\n  return scale;\n}\n\nexport default function time() {\n  return initRange.apply(calendar(timeYear, timeMonth, timeWeek, timeDay, timeHour, timeMinute, timeSecond, timeMillisecond, timeFormat).domain([new Date(2000, 0, 1), new Date(2000, 0, 2)]), arguments);\n}\n","import { scaleLinear, scaleLog, scalePoint, scaleTime } from \"d3-scale\";\n\nvar LOG_SCALE_FACTOR = 1000;\n\n\nfunction getPointScale(data, {edge_padding, flip}) {\n\tvar domain = flip ? data.unique().reverse() : data.unique();\n\tvar scale = scalePoint().domain(domain).padding(edge_padding/100);\n\tscale.type = \"ordinal\";\n\treturn scale;\n}\n\n\nfunction getLinearDomain(data, {min, max, include_zero, nice, flip}) {\n\tconst FALLBACK_DOMAIN_RANGE = 100; // If we can't construct a sensible default domain, make an arbitrary one this wide\n\tif (min === max) min = max = null; // If min and max are equal then ignore them both\n\t// If we have min and max then it's easy\n\tif (min !== null && max !== null) return flip ? [max, min] : [min, max];\n\n\tlet domain;\n\tif (data.range) { // Standard case: multiple different values\n\t\tdomain = data.extent();\n\t\tif (nice) domain = scaleLinear().domain(domain).nice().domain();\n\t\tif (include_zero) {\n\t\t\tif (domain[0] >= 0) domain[0] = 0;\n\t\t\telse if (domain[1] < 0) domain[1] = 0;\n\t\t}\n\t}\n\telse if (data.length) { // Only one unique value\n\t\tvar value = data.min;\n\t\tif (value > 0) domain = [0, 2 * value]; // Place value in middle of domain starting at 0\n\t\telse if (value < 0) domain = [2 * value, 0]; // Place value in middle of domain ending at 0\n\t\telse domain = [-FALLBACK_DOMAIN_RANGE/2, FALLBACK_DOMAIN_RANGE/2]; // Domain centred on 0 with arbitrary min and max\n\t}\n\telse domain = [0, FALLBACK_DOMAIN_RANGE]; // No values at all: pick arbitrary domain values\n\n\tif (min !== null) {\n\t\tdomain[0] = min;\n\t\t// If domain values now match we need to do something, so change the non-specified max value\n\t\tif (domain[0] === domain[1]) domain[1] = min + (data.range || FALLBACK_DOMAIN_RANGE);\n\t}\n\telse if (max !== null) {\n\t\tdomain[1] = max;\n\t\t// If domain values now match we need to do something, so change the non-specified min value\n\t\tif (domain[0] === domain[1]) domain[0] = max - (data.range || FALLBACK_DOMAIN_RANGE);\n\t}\n\n\treturn flip ? domain.reverse() : domain;\n}\n\n\nfunction getLinearScale(data, settings) {\n\tvar domain = getLinearDomain(data, settings);\n\tvar scale = scaleLinear().domain(domain);\n\tscale.type = \"numeric\";\n\treturn scale;\n}\n\n\nfunction getLogScale(data, {min, max, nice, flip}) {\n\t// Get suitable values for the domain based on data\n\tconst extent = data.extent();\n\tif (extent[0] <= 0) {\n\t\tif (extent[1] > 0) extent[0] = Math.min(1, extent[1]/LOG_SCALE_FACTOR);\n\t\telse extent[0] = 1;\n\t}\n\tif (extent[1] <= extent[0]) extent[1] = LOG_SCALE_FACTOR * extent[0];\n\tconst scale = scaleLog().domain(extent);\n\tif (nice) scale.nice();\n\tconst domain = scale.domain();\n\n\t// Override domain values if min and/or max appropriate\n\tif (min === max) min = max = null;\n\tif (min > 0) domain[0] = min;\n\tif (max > 0) domain[1] = max;\n\tscale.domain(flip ? domain.reverse() : domain);\n\tscale.type = \"numeric\";\n\n\treturn scale;\n}\n\n\nfunction getDatetimeScale(data, {min, max, format, nice, flip}) {\n\tconst extent = data.extent();\n\tconst scale = scaleTime().domain(extent);\n\tif (nice) scale.nice();\n\tif (format) scale.tickFormat(null, format);\n\tconst domain = scale.domain();\n\n\tif (min === max) min = max = null;\n\tif (min) domain[0] = format(min);\n\tif (max) domain[1] = format(max);\n\tscale.domain(flip ? domain.reverse() : domain);\n\tscale.type = \"datetime\";\n\n\treturn scale;\n}\n\n\nexport {\n\tgetPointScale,\n\tgetLinearScale,\n\tgetLogScale,\n\tgetDatetimeScale\n};\n","function minStep(data, scale) {\n\tif (scale.step) return scale.step();\n\n\tconst scaled_data = data.uniqueAscending().map(d => scale(d));\n\tconst n = scaled_data.length;\n\tif (n < 2) return 0;\n\n\tlet min_step = Infinity;\n\tfor (let i = 1; i < n; i++) {\n\t\tconst step = Math.abs(scaled_data[i] - scaled_data[i-1]);\n\t\tmin_step = Math.min(min_step, step);\n\t}\n\n\treturn min_step;\n}\n\n\nexport { minStep };\n","import { getPointScale, getLinearScale, getLogScale, getDatetimeScale } from \"./scales\";\nimport { minStep } from \"./utils\";\n\n\nfunction initXPadding(instance) {\n\tconst UNITS = [ \"px\", \"steps\" ];\n\tlet left = 0;\n\tlet right = 0;\n\tlet unit = \"px\";\n\n\treturn function(values) {\n\t\tif (values === undefined) return { left, right, unit };\n\t\tconst u = values.unit;\n\t\tif (u && !UNITS.includes(u)) throw new Error(`Unit \"${u}\" not recognised`);\n\t\t({ left = left, right = right, unit = unit } = values);\n\t\treturn instance;\n\t};\n}\n\n\nfunction getXPadding(instance, x_state, domain) {\n\tconst no_padding = { left: 0, right: 0 };\n\tconst x_data = instance.xData();\n\t// Ignore developer-set padding on categorical axes because of user-set padding\n\tif (x_data.string_array) return no_padding;\n\n\tconst { left, right, unit } = instance.xPadding();\n\n\t// Ignore developer-set padding on logarithmic axes if not in px\n\tif (x_data.numeric_array && x_state.numeric_scale_type !== \"linear\" && unit !== \"px\") return no_padding;\n\n\tif (unit === \"px\" || (!left && !right)) return { left, right };\n\n\tconst unique_values = x_data.uniqueAscending();\n\tconst n = unique_values.length;\n\tif (n < 2) return no_padding;\n\n\tlet min_data_step = Infinity;\n\tfor (let i = 1; i < n; i++) {\n\t\tconst step = Math.abs(unique_values[i] - unique_values[i-1]);\n\t\tmin_data_step = Math.min(min_data_step, step);\n\t}\n\n\tconst domain_width = Math.max(...domain) - Math.min(...domain); // in domain units\n\tconst full_width = domain_width + ((left + right) * min_data_step); // in domain units\n\tconst n_min_steps = full_width / min_data_step;\n\tconst step_width = instance.plot_width / n_min_steps; // in pixels\n\n\treturn { left: left * step_width, right: right * step_width };\n}\n\n\nfunction initXScale(instance, state) {\n\tconst x = state.x;\n\n\treturn function(opts = {}) {\n\t\tconst x_data = instance.xData();\n\t\tconst settings = { nice: x.nice, flip: instance.xFlipAxis() !== x.flip };\n\t\tlet getScale;\n\t\tif (x_data.string_array) {\n\t\t\tgetScale = getPointScale;\n\t\t\tsettings.edge_padding = x.edge_padding;\n\t\t}\n\t\telse if (x_data.datetime_array) {\n\t\t\tgetScale = getDatetimeScale;\n\t\t\tsettings.min = x.datetime_min;\n\t\t\tsettings.max = x.datetime_max;\n\t\t\tsettings.format = instance.xDatetimeParse();\n\t\t}\n\t\telse if (x.numeric_scale_type === \"log\") {\n\t\t\tgetScale = getLogScale;\n\t\t\tsettings.min = x.log_min;\n\t\t\tsettings.max = x.log_max;\n\t\t}\n\t\telse {\n\t\t\tgetScale = getLinearScale;\n\t\t\tsettings.min = x.linear_min;\n\t\t\tsettings.max = x.linear_max;\n\t\t\tsettings.include_zero = x.zero_axis === \"off\" ? false : (x.zero_axis === \"on\" ? true : instance.xZeroAxis());\n\t\t}\n\n\t\tconst xScale = getScale(x_data, settings);\n\t\tif (opts.domain_only) return xScale;\n\n\t\tconst x_width = instance.plot_width;\n\t\tconst left_margin = instance.margins.left;\n\t\tconst { left, right } = getXPadding(instance, x, xScale.domain());\n\t\tconst effective_width = x_width - (left + right);\n\t\tconst range_start = left_margin + left;\n\t\tlet range = [ range_start, range_start + effective_width ];\n\t\tconst offset = opts.global && instance.offsetLeft();\n\t\tif (offset) range = range.map(function(x) { return x + offset; });\n\n\t\treturn xScale.range(range);\n\t};\n}\n\n\nfunction initXMinStep(instance) {\n\treturn function() {\n\t\treturn minStep(instance.xData(), instance.xScale());\n\t};\n}\n\n\nexport { initXScale, initXMinStep, initXPadding };\n","import { getPointScale, getLinearScale, getLogScale, getDatetimeScale } from \"./scales\";\nimport { minStep } from \"./utils\";\n\n\nfunction initYPadding(instance) {\n\tconst UNITS = [ \"px\", \"steps\" ];\n\tlet bottom = 0;\n\tlet top = 0;\n\tlet unit = \"px\";\n\n\treturn function(values) {\n\t\tif (values === undefined) return { bottom, top, unit };\n\t\tconst u = values.unit;\n\t\tif (u && !UNITS.includes(u)) throw new Error(`Unit \"${u}\" not recognised`);\n\t\t({ bottom = bottom, top = top, unit = unit } = values);\n\t\treturn instance;\n\t};\n}\n\n\nfunction getYPadding(instance, y_state, domain) {\n\tconst no_padding = { bottom: 0, top: 0 };\n\tconst y_data = instance.yData();\n\t// Ignore developer-set padding on categorical axes because of user-set padding\n\tif (y_data.string_array) return no_padding;\n\n\tconst { bottom, top, unit } = instance.yPadding();\n\n\t// Ignore developer-set padding on logarithmic axes if not in px\n\tif (y_data.numeric_array && y_state.numeric_scale_type !== \"linear\" && unit !== \"px\") return no_padding;\n\n\tif (unit === \"px\" || (!bottom && !top)) return { bottom, top };\n\n\tconst unique_values = y_data.uniqueAscending();\n\tconst n = unique_values.length;\n\tif (n < 2) return no_padding;\n\n\tlet min_data_step = Infinity;\n\tfor (let i = 1; i < n; i++) {\n\t\tconst step = Math.abs(unique_values[i] - unique_values[i-1]);\n\t\tmin_data_step = Math.min(min_data_step, step);\n\t}\n\n\tconst domain_width = Math.max(...domain) - Math.min(...domain); // in domain units\n\tconst full_width = domain_width + ((bottom + top) * min_data_step); // in domain units\n\tconst n_min_steps = full_width / min_data_step;\n\tconst step_width = instance.plot_height / n_min_steps; // in pixels\n\n\treturn { bottom: bottom * step_width, top: top * step_width };\n}\n\n\nfunction initYScale(instance, state) {\n\tconst y = state.y;\n\n\treturn function(opts = {}) {\n\t\tvar y_data = instance.yData();\n\n\t\tconst settings = { nice: y.nice, flip: instance.yFlipAxis() !== y.flip };\n\t\tlet getScale;\n\t\tif (y_data.string_array) {\n\t\t\tgetScale = getPointScale;\n\t\t\tsettings.edge_padding = y.edge_padding;\n\t\t}\n\t\telse if (y_data.datetime_array) {\n\t\t\tgetScale = getDatetimeScale;\n\t\t\tsettings.min = y.datetime_min;\n\t\t\tsettings.max = y.datetime_max;\n\t\t\tsettings.format = instance.yDatetimeParse();\n\t\t}\n\t\telse if (y.numeric_scale_type === \"log\") {\n\t\t\tgetScale = getLogScale;\n\t\t\tsettings.min = y.log_min;\n\t\t\tsettings.max = y.log_max;\n\t\t}\n\t\telse {\n\t\t\tgetScale = getLinearScale;\n\t\t\tsettings.min = y.linear_min;\n\t\t\tsettings.max = y.linear_max;\n\t\t\tsettings.include_zero = y.zero_axis === \"off\" ? false : (y.zero_axis === \"on\" ? true : instance.yZeroAxis());\n\t\t}\n\n\t\tconst yScale = getScale(y_data, settings);\n\t\tif (opts.domain_only) return yScale;\n\n\t\tconst y_height = instance.plot_height;\n\t\tconst top_margin = instance.margins.top;\n\t\tconst { bottom, top } = getYPadding(instance, y, yScale.domain());\n\t\tconst effective_height = y_height - (bottom + top);\n\t\tconst offset = opts.global && instance.offsetTop();\n\t\tconst range_start = top_margin + top;\n\t\tlet range = [ range_start + effective_height, range_start ];\n\t\tif (offset) range = range.map(function(y) { return y + offset; });\n\n\t\treturn yScale.range(range);\n\t};\n}\n\n\nfunction initYMinStep(instance) {\n\treturn function() {\n\t\treturn minStep(instance.yData(), instance.yScale());\n\t};\n}\n\n\nexport { initYScale, initYMinStep, initYPadding };\n","import { getPointScale, getLinearScale, getLogScale, getDatetimeScale } from \"./scales\";\nimport { minStep } from \"./utils\";\n\n\nfunction initY2Padding(instance) {\n\tconst UNITS = [ \"px\", \"steps\" ];\n\tlet bottom = 0;\n\tlet top = 0;\n\tlet unit = \"px\";\n\n\treturn function(values) {\n\t\tif (values === undefined) return { bottom, top, unit };\n\t\tconst u = values.unit;\n\t\tif (u && !UNITS.includes(u)) throw new Error(`Unit \"${u}\" not recognised`);\n\t\t({ bottom = bottom, top = top, unit = unit } = values);\n\t\treturn instance;\n\t};\n}\n\n\nfunction getY2Padding(instance, y2_state, domain) {\n\tconst no_padding = { bottom: 0, top: 0 };\n\tconst y2_data = instance.y2Data();\n\t// Ignore developer-set padding on categorical axes because of user-set padding\n\tif (y2_data.string_array) return no_padding;\n\n\tconst { bottom, top, unit } = instance.y2Padding();\n\n\t// Ignore developer-set padding on logarithmic axes if not in px\n\tif (y2_data.numeric_array && y2_state.numeric_scale_type !== \"linear\" && unit !== \"px\") return no_padding;\n\n\tif (unit === \"px\" || (!bottom && !top)) return { bottom, top };\n\n\tconst unique_values = y2_data.uniqueAscending();\n\tconst n = unique_values.length;\n\tif (n < 2) return no_padding;\n\n\tlet min_data_step = Infinity;\n\tfor (let i = 1; i < n; i++) {\n\t\tconst step = Math.abs(unique_values[i] - unique_values[i-1]);\n\t\tmin_data_step = Math.min(min_data_step, step);\n\t}\n\n\tconst domain_width = Math.max(...domain) - Math.min(...domain); // in domain units\n\tconst full_width = domain_width + ((bottom + top) * min_data_step); // in domain units\n\tconst n_min_steps = full_width / min_data_step;\n\tconst step_width = instance.plot_width / n_min_steps; // in pixels\n\n\treturn { bottom: bottom * step_width, top: top * step_width };\n}\n\n\nfunction initY2Scale(instance, state) {\n\tconst y2 = state.y2;\n\n\treturn function(opts = {}) {\n\t\tvar y2_data = instance.y2Data();\n\n\t\tconst settings = { nice: y2.nice, flip: instance.y2FlipAxis() !== y2.flip };\n\t\tlet getScale;\n\t\tif (y2_data.string_array) {\n\t\t\tgetScale = getPointScale;\n\t\t\tsettings.edge_padding = y2.edge_padding;\n\t\t}\n\t\telse if (y2_data.datetime_array) {\n\t\t\tgetScale = getDatetimeScale;\n\t\t\tsettings.min = y2.datetime_min;\n\t\t\tsettings.max = y2.datetime_max;\n\t\t\tsettings.format = instance.y2DatetimeParse();\n\t\t}\n\t\telse if (y2.numeric_scale_type === \"log\") {\n\t\t\tgetScale = getLogScale;\n\t\t\tsettings.min = y2.log_min;\n\t\t\tsettings.max = y2.log_max;\n\t\t}\n\t\telse {\n\t\t\tgetScale = getLinearScale;\n\t\t\tsettings.min = y2.linear_min;\n\t\t\tsettings.max = y2.linear_max;\n\t\t\tsettings.include_zero = y2.zero_axis === \"off\" ? false : (y2.zero_axis === \"on\" ? true : instance.y2ZeroAxis());\n\t\t}\n\n\t\tconst yScale = getScale(y2_data, settings);\n\t\tif (opts.domain_only) return yScale;\n\n\t\tconst y2_height = instance.plot_height;\n\t\tconst top_margin = instance.margins.top;\n\t\tconst { bottom, top } = getY2Padding(instance, y2, yScale.domain());\n\t\tconst effective_height = y2_height - (bottom + top);\n\t\tconst offset = opts.global && instance.offsetTop();\n\t\tconst range_start = top_margin + top;\n\t\tlet range = [ range_start + effective_height, range_start ];\n\t\tif (offset) range = range.map(function(y) { return y + offset; });\n\n\t\treturn yScale.range(range);\n\t};\n}\n\n\nfunction initY2MinStep(instance) {\n\treturn function() {\n\t\treturn minStep(instance.y2Data(), instance.y2Scale());\n\t};\n}\n\n\nexport { initY2Scale, initY2MinStep, initY2Padding };\n","function initZeroAxis(instance) {\n\tvar zero_axis = false;\n\treturn function(value) {\n\t\tif (value === undefined) return zero_axis;\n\t\tzero_axis = !!value;\n\t\treturn instance;\n\t};\n}\n\n\nfunction initFlipAxis(instance) {\n\tlet flip = false;\n\n\treturn function(value) {\n\t\tif (value === undefined) return flip;\n\t\tflip = !!value;\n\t\treturn instance;\n\t};\n}\n\n\nexport { initFlipAxis, initZeroAxis };\n","function initHide(instance) {\n\tvar hide = false;\n\tvar keep_gridlines = false;\n\n\treturn function(value) {\n\t\tif (value === undefined) return hide ? {keep_gridlines: keep_gridlines} : false;\n\t\thide = !!value;\n\t\tkeep_gridlines = (value && typeof value === \"object\" && value.keep_gridlines) ? true : false;\n\t\treturn instance;\n\t};\n}\n\n\nexport { initHide };\n","import { isDate, isValidDate, textareaToArray } from \"../../common\";\n\n\nfunction removeDuplicates(arr) {\n\tif (!arr.length) return arr.slice();\n\n\t// For datetimes we must convert datetime objects to timestamps before removing duplicates\n\t// Then we must convert timestamps back to date objects\n\tif (isDate(arr[0])) {\n\t\treturn Array.from(new Set(arr.map(d => d.getTime()))).map(d => new Date(d));\n\t}\n\n\treturn Array.from(new Set(arr));\n}\n\n\nfunction getTickValues(instance, state, axis = \"x\") {\n\tconst axis_state = state[axis];\n\tconst scale = instance[axis + \"Scale\"]({ \"domain_only\": true });\n\tconst data = instance[axis + \"Data\"]();\n\tlet ticks;\n\tconst ticks_hidden = axis === \"x\" ? axis_state.axis_position === \"off\" : !axis_state.axis_visible;\n\n\tif (ticks_hidden) ticks = [];\n\telse if (data.string_array) ticks = scale.domain();\n\telse if (axis_state.tick_mode === \"number\") ticks = scale.ticks(axis_state.tick_number);\n\telse {\n\t\tlet tick_list;\n\t\tconst is_datetime = data.datetime_array;\n\t\tif (axis_state.tick_mode === \"custom\") {\n\t\t\tconst parser_name = axis + (is_datetime ? \"Datetime\" : \"Number\") + \"Parse\";\n\t\t\tconst parser = instance[parser_name]();\n\t\t\ttick_list = textareaToArray(axis_state.tick_custom).map(d => parser(d));\n\t\t}\n\t\telse {\n\t\t\tconst auto = instance[axis + \"AutoTicks\"]();\n\t\t\ttick_list = Array.isArray(auto) ? auto : auto();\n\t\t}\n\t\ttick_list = removeDuplicates(tick_list);\n\t\tconst domain = scale.domain();\n\t\tconst min = Math.min(...domain);\n\t\tconst max = Math.max(...domain);\n\t\tif (is_datetime) ticks = tick_list.filter(d => isValidDate(d) && d >= min && d <= max);\n\t\telse ticks = tick_list.filter(d => !isNaN(d) && d >= min && d <= max);\n\t}\n\n\treturn ticks;\n}\n\n\nfunction initTickUpdating(instance, state) {\n\tvar updateXTicks = function() {\n\t\tinstance.xTicks._update(getTickValues(instance, state, \"x\"));\n\t};\n\n\tvar updateYTicks = function() {\n\t\tinstance.yTicks._update(getTickValues(instance, state, \"y\"));\n\t};\n\n\tvar updateY2Ticks = function() {\n\t\tinstance.y2Ticks._update(getTickValues(instance, state, \"y2\"));\n\t};\n\n\treturn function() {\n\t\tupdateXTicks();\n\t\tupdateYTicks();\n\t\tupdateY2Ticks();\n\t};\n}\n\n\nexport { initTickUpdating };\n","function tickSorter(a, b) {\n\t// Make the numbers with the fewest significant digits come first\n\tvar diff = a.significant_digits - b.significant_digits;\n\tif (diff) return diff;\n\t// Then the numbers with the greatest exponent\n\tdiff = b.exponent - a.exponent;\n\tif (diff) return diff;\n\t// Then the number with the largest absolute value\n\tdiff = Math.abs(b.value) - Math.abs(a.value);\n\tif (diff) return diff;\n\t// Then, finally, favour the largest number\n\tdiff = b.value - a.value;\n\treturn diff;\n}\n\nfunction userSelectNone(selection) {\n\tselection\n\t\t.style(\"user-select\", \"none\")\n\t\t.style(\"-moz-user-select\", \"none\")\n\t\t.style(\"-webkit-user-select\", \"none\")\n\t\t.style(\"-ms-user-select\", \"none\")\n\t\t.style(\"cursor\", \"default\");\n}\n\nfunction getDirectionAttribute() {\n\treturn document.body.getAttribute(\"dir\");\n}\n\nexport { tickSorter, userSelectNone, getDirectionAttribute };\n","import { select } from \"d3-selection\";\nimport { remToPx, xyToTranslate, angleToRotate, linesIntersect, safeScale } from \"../../common\";\nimport { tickSorter, userSelectNone, getDirectionAttribute } from \"./common\";\n\n\nfunction initXAxisUpdating(instance, state) {\n\tvar x = state.x;\n\tvar xScale, yScale, animation_duration;\n\tvar line_color, line_width, tick_label_color;\n\tvar tick_length, tick_label_size, tick_label_distance;\n\tvar title_size, title_text;\n\tvar x_left, x_mid, x_right, x_left_old, x_right_old;\n\tvar oldXScale, enteringXScale, exitingXScale, oldYScale;\n\n\tfunction setValues() {\n\t\txScale = safeScale(instance.xScale());\n\t\tyScale = safeScale(instance.yScale());\n\t\tanimation_duration = oldXScale ? instance.animationDuration() : 0;\n\t\tx_left = instance.x_left;\n\t\tx_right = instance.x_right;\n\t\tx_mid = (x_left + x_right) / 2;\n\t\tif (x_left_old === undefined) x_left_old = x_left;\n\t\tif (!oldXScale) oldXScale = xScale;\n\t\tenteringXScale = oldXScale.type === xScale.type && xScale.type !== \"ordinal\" ? oldXScale : xScale;\n\t\texitingXScale = oldXScale.type === xScale.type && oldXScale.type !== \"ordinal\" ? xScale : oldXScale;\n\t\tline_color = x.line_and_tick_color;\n\t\tline_width = remToPx(x.line_and_tick_width, true);\n\t\ttick_label_color = x.tick_label_color;\n\n\t\tvar ticks_labels_below = x.tick_label_position === \"default\";\n\t\tvar x_ticks = instance.xTicks();\n\t\tvar axis_height = x_ticks.max_box_height;\n\t\tvar tick_padding = x_ticks.length ? remToPx(x.tick_padding) : 0;\n\t\tif (x.axis_position == \"top\" || x.axis_position == \"bottom\") axis_height += tick_padding;\n\t\tvar ticks_out = x.tick_side === \"out\";\n\t\ttick_length = ticks_labels_below ? (remToPx(x.tick_length) * (ticks_out ? 1 : -1)) : axis_height;\n\t\ttick_label_size = remToPx(x.tick_label_size);\n\t\ttick_label_distance = (ticks_out && ticks_labels_below ? tick_length : 0) + tick_padding;\n\t\ttitle_size = remToPx(x.title_size);\n\t\ttitle_text = instance.xTitle();\n\t}\n\n\tvar updateBottomAxis = (function() {\n\t\tvar bottom = instance.chart.select(\"g.fl-bottom-axis\");\n\t\tvar line_container = bottom.select(\"g.fl-axis-line\");\n\t\tvar tick_container = bottom.select(\"g.fl-axis-ticks\");\n\t\tvar title_container = bottom.select(\"g.fl-axis-title\");\n\t\tvar y_bottom_old;\n\n\t\treturn function() {\n\t\t\tvar pos = x.axis_position;\n\t\t\tvar measurements = { pos: pos };\n\t\t\tvar show_this_axis = (!instance.xHide() && [\"bottom\", \"float-below\"].indexOf(pos) !== -1);\n\t\t\tvar ticks = show_this_axis ? instance.xTicks() : [];\n\t\t\tvar y_bottom = instance.y_bottom;\n\t\t\tif (y_bottom_old === undefined) y_bottom_old = y_bottom;\n\t\t\tvar title_distance = y_bottom + remToPx(x.title_padding);\n\t\t\tif (pos === \"bottom\") {\n\t\t\t\ttitle_distance += tick_label_distance + ticks.max_box_height;\n\t\t\t\tmeasurements.extended_gridline = y_bottom + tick_label_distance + ticks.max_box_height;\n\t\t\t}\n\n\t\t\tfunction getAxisPosition(value, fallback) {\n\t\t\t\tif (value === undefined || isNaN(value)) return fallback;\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tvar axis_y_position_old = y_bottom_old;\n\t\t\tvar axis_y_position = y_bottom;\n\t\t\tif (pos === \"float-below\") {\n\t\t\t\taxis_y_position_old = getAxisPosition((oldYScale || yScale)(x.y_axis_position), y_bottom_old);\n\t\t\t\taxis_y_position = getAxisPosition(yScale(x.y_axis_position), y_bottom);\n\t\t\t}\n\n\t\t\tvar line = line_container.selectAll(\"line\")\n\t\t\t\t.data(show_this_axis && x.line_visible ? [xScale.domain()] : []);\n\n\t\t\tline.exit()\n\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x1\", x_left)\n\t\t\t\t.attr(\"x2\", x_right)\n\t\t\t\t.attr(\"y1\", axis_y_position)\n\t\t\t\t.attr(\"y2\", axis_y_position)\n\t\t\t\t.style(\"opacity\", 0)\n\t\t\t\t.remove();\n\n\t\t\tvar line_enter = line.enter()\n\t\t\t\t.append(\"line\")\n\t\t\t\t.style(\"shape-rendering\", \"crispEdges\")\n\t\t\t\t.style(\"stroke-linecap\", \"square\")\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.attr(\"x1\", x_left_old)\n\t\t\t\t.attr(\"x2\", x_right_old)\n\t\t\t\t.attr(\"y1\", axis_y_position_old)\n\t\t\t\t.attr(\"y2\", axis_y_position_old)\n\t\t\t\t.style(\"opacity\", 0);\n\n\t\t\tline.merge(line_enter)\n\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x1\", x_left)\n\t\t\t\t.attr(\"x2\", x_right)\n\t\t\t\t.attr(\"y1\", axis_y_position)\n\t\t\t\t.attr(\"y2\", axis_y_position)\n\t\t\t\t.style(\"opacity\", 1);\n\n\t\t\tvar sorted_ticks = show_this_axis ? ticks : [];\n\t\t\tif (ticks.type === \"numeric\" && x.tick_mode !== \"custom\") {\n\t\t\t\tsorted_ticks = ticks.slice().sort(tickSorter);\n\t\t\t}\n\n\t\t\tvar tickLabelTransform = function(d) {\n\t\t\t\tvar angle = x.tick_label_position == \"default\" ? -x.tick_label_angle : -90;\n\t\t\t\tvar rotate = angleToRotate(angle, 0, 0);\n\t\t\t\tif (x.tick_label_position !== \"default\") {\n\t\t\t\t\tvar y_offset = x.tick_label_position === \"left\" ? -0.3 : 1;\n\t\t\t\t\treturn xyToTranslate(0, tick_label_distance) + \" \" + rotate + \" \" + xyToTranslate(0, tick_label_size * y_offset);\n\t\t\t\t}\n\t\t\t\tif (angle === 0) {\n\t\t\t\t\treturn xyToTranslate(d.text_width/2, tick_label_distance + tick_label_size*0.66);\n\t\t\t\t}\n\t\t\t\telse if (angle === -90) {\n\t\t\t\t\treturn xyToTranslate(0, tick_label_distance) + \" \" + rotate + \" \" + xyToTranslate(0, tick_label_size*0.33 - d.multiline_offset);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn xyToTranslate(0, tick_label_distance) + \" \" + rotate + \" \" + xyToTranslate(0, tick_label_size*0.66);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar tick_g = tick_container.selectAll(\"g\")\n\t\t\t\t.data(sorted_ticks, function(d) { return d.type + \"-\" + d.value; });\n\n\t\t\tvar tick_g_exit = tick_g.exit();\n\n\t\t\ttick_g_exit.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(exitingXScale(d.value), axis_y_position); })\n\t\t\t\t.style(\"opacity\", 0)\n\t\t\t\t.remove();\n\n\t\t\ttick_g_exit.each(function() {\n\t\t\t\tvar sel = select(this);\n\t\t\t\t// Tick lines\n\t\t\t\tsel.select(\"line\")\n\t\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(animation_duration)\n\t\t\t\t\t.attr(\"y2\", tick_length);\n\t\t\t\t// Tick labels\n\t\t\t\tsel.select(\"text\")\n\t\t\t\t\t.style(\"fill\", tick_label_color)\n\t\t\t\t\t.style(\"font-size\", tick_label_size + \"px\")\n\t\t\t\t\t.style(\"font-weight\", x.tick_label_weight)\n\t\t\t\t\t.attr(\"transform\", tickLabelTransform)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(animation_duration);\n\t\t\t});\n\n\t\t\tvar tick_g_enter = tick_g.enter().append(\"g\")\n\t\t\t\t.style(\"opacity\", 0);\n\n\t\t\ttick_g_enter\n\t\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(enteringXScale(d.value), axis_y_position_old); });\n\n\t\t\ttick_g_enter.each(function() {\n\t\t\t\tvar sel = select(this);\n\t\t\t\t// Tick lines\n\t\t\t\tsel.append(\"line\")\n\t\t\t\t\t.attr(\"y2\", tick_length);\n\t\t\t\t// Tick labels\n\t\t\t\tsel.append(\"text\").attr(\"text-anchor\", \"middle\")\n\t\t\t\t\t.attr(\"transform\", tickLabelTransform)\n\t\t\t\t\t.call(userSelectNone);\n\t\t\t});\n\n\t\t\tvar tick_g_update = tick_g.merge(tick_g_enter);\n\n\t\t\ttick_g_update.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.style(\"opacity\", 1)\n\t\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(xScale(d.value), axis_y_position); });\n\n\t\t\tvar setTickOpacity = (function() {\n\t\t\t\tvar placed_ticks = [];\n\t\t\t\tvar y_anchor = axis_y_position + tick_label_distance;\n\t\t\t\treturn function(d) {\n\t\t\t\t\tvar x_anchor = xScale(d.value);\n\t\t\t\t\tif (pos === \"float-below\") {\n\t\t\t\t\t\tvar range = xScale.range();\n\t\t\t\t\t\tif (state.y.axis_visible) {\n\t\t\t\t\t\t\tvar left = x_anchor - d.box_width_left;\n\t\t\t\t\t\t\tif (left < range[0]) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (state.y2.axis_visible) {\n\t\t\t\t\t\t\tvar right = x_anchor + d.box_width_right;\n\t\t\t\t\t\t\tif (right > range[1]) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar p1q1 = [ x_anchor, y_anchor ];\n\t\t\t\t\tvar p2 = [ x_anchor + d.box_width_right, y_anchor + d.box_height_right];\n\t\t\t\t\tvar q2 = [ x_anchor - d.box_width_left, y_anchor + d.box_height_left];\n\t\t\t\t\tvar p = [ p1q1, p2 ];\n\t\t\t\t\tvar q = [ p1q1, q2 ];\n\t\t\t\t\tfor (var i = 0; i < placed_ticks.length; i++) {\n\t\t\t\t\t\tvar placed_tick = placed_ticks[i];\n\t\t\t\t\t\tif (x_anchor <= placed_tick.x_anchor) {\n\t\t\t\t\t\t\tif (linesIntersect(p, placed_tick.q)) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (linesIntersect(placed_tick.p, q)) return 0; // eslint-disable-line no-lonely-if\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplaced_ticks.push({ x_anchor: x_anchor, p: p, q: q });\n\t\t\t\t\treturn 1;\n\t\t\t\t};\n\t\t\t})();\n\t\t\tconst read_direction = getDirectionAttribute();\n\n\t\t\ttick_g_update.each(function() {\n\t\t\t\tvar sel = select(this);\n\t\t\t\t// Tick lines\n\t\t\t\tsel.select(\"line\")\n\t\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(animation_duration)\n\t\t\t\t\t.attr(\"y2\", tick_length);\n\t\t\t\t// Tick labels\n\t\t\t\tsel.select(\"text\")\n\t\t\t\t\t.each(function() {\n\t\t\t\t\t\tvar tspans = select(this).selectAll(\"tspan\").data(function(d) { return d.lines; });\n\t\t\t\t\t\ttspans.merge(tspans.enter().append(\"tspan\"))\n\t\t\t\t\t\t\t.attr(\"x\", 0)\n\t\t\t\t\t\t\t.attr(\"dy\", function(d, i) { return i ? x.tick_label_line_height + \"em\" : 0; })\n\t\t\t\t\t\t\t.text(function(d) { return d; });\n\t\t\t\t\t\ttspans.exit().remove();\n\t\t\t\t\t})\n\t\t\t\t\t.attr(\"text-anchor\", read_direction === \"rtl\" ? \"start\" : \"end\")\n\t\t\t\t\t.style(\"fill\", tick_label_color)\n\t\t\t\t\t.style(\"font-size\", tick_label_size + \"px\")\n\t\t\t\t\t.style(\"font-weight\", x.tick_label_weight)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(animation_duration)\n\t\t\t\t\t.style(\"opacity\", setTickOpacity)\n\t\t\t\t\t.attr(\"transform\", tickLabelTransform);\n\t\t\t});\n\n\t\t\tvar title = title_container.selectAll(\"text\")\n\t\t\t\t.data(show_this_axis && title_text ? [title_text] : []);\n\n\t\t\ttitle.exit().remove();\n\n\t\t\ttitle.enter().append(\"text\")\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t.style(\"font-size\", title_size + \"px\")\n\t\t\t\t.style(\"fill\", x.title_color)\n\t\t\t\t.style(\"font-weight\", x.title_weight)\n\t\t\t\t.call(userSelectNone)\n\t\t\t\t.transition()\n\t\t\t\t.duration(0)\n\t\t\t\t.delay(animation_duration)\n\t\t\t\t.text(function(d) { return d; })\n\t\t\t\t.attr(\"x\", x_mid)\n\t\t\t\t.attr(\"y\", title_distance)\n\t\t\t\t.attr(\"dy\", title_size);\n\n\t\t\ttitle.text(function(d) { return d; })\n\t\t\t\t.style(\"fill\", x.title_color)\n\t\t\t\t.style(\"font-size\", title_size + \"px\")\n\t\t\t\t.style(\"font-weight\", x.title_weight)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x\", x_mid)\n\t\t\t\t.attr(\"y\", title_distance)\n\t\t\t\t.attr(\"dy\", title_size);\n\n\t\t\ty_bottom_old = y_bottom;\n\n\t\t\treturn pos == \"bottom\" ? measurements : null;\n\t\t};\n\t})();\n\n\tvar updateTopAxis = (function() {\n\t\tvar top = instance.chart.select(\"g.fl-top-axis\");\n\t\tvar line_container = top.select(\"g.fl-axis-line\");\n\t\tvar tick_container = top.select(\"g.fl-axis-ticks\");\n\t\tvar title_container = top.select(\"g.fl-axis-title\");\n\t\tvar y_top_old;\n\n\t\treturn function() {\n\t\t\tvar pos = x.axis_position;\n\t\t\tvar measurements = { pos: pos };\n\t\t\tvar show_this_axis = (!instance.xHide() && [\"top\", \"float-above\"].indexOf(pos) !== -1);\n\t\t\tvar ticks = show_this_axis ? instance.xTicks() : [];\n\t\t\tvar y_top = instance.y_top;\n\t\t\tif (y_top_old === undefined) y_top_old = y_top;\n\t\t\tvar title_distance = y_top - remToPx(x.title_padding);\n\t\t\tif (pos === \"top\") {\n\t\t\t\ttitle_distance -= tick_label_distance + ticks.max_box_height;\n\t\t\t\tmeasurements.extended_gridline = y_top - (tick_label_distance + ticks.max_box_height);\n\t\t\t}\n\n\t\t\tvar axis_y_position_old = pos === \"float-above\" ? (oldYScale || yScale)(x.y_axis_position) : y_top_old;\n\t\t\tvar axis_y_position = pos === \"float-above\" ? yScale(x.y_axis_position) : y_top;\n\n\t\t\tvar line = line_container.selectAll(\"line\")\n\t\t\t\t.data(show_this_axis && x.line_visible ? [xScale.domain()] : []);\n\n\t\t\tline.exit()\n\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x1\", x_left)\n\t\t\t\t.attr(\"x2\", x_right)\n\t\t\t\t.attr(\"y1\", axis_y_position)\n\t\t\t\t.attr(\"y2\", axis_y_position)\n\t\t\t\t.style(\"opacity\", 0)\n\t\t\t\t.remove();\n\n\t\t\tvar line_enter = line.enter()\n\t\t\t\t.append(\"line\")\n\t\t\t\t.style(\"shape-rendering\", \"crispEdges\")\n\t\t\t\t.style(\"stroke-linecap\", \"square\")\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.attr(\"x1\", x_left_old)\n\t\t\t\t.attr(\"x2\", x_left_old)\n\t\t\t\t.attr(\"y1\", axis_y_position_old)\n\t\t\t\t.attr(\"y2\", axis_y_position_old)\n\t\t\t\t.style(\"opacity\", 0);\n\n\t\t\tline.merge(line_enter)\n\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x1\", x_left)\n\t\t\t\t.attr(\"x2\", x_right)\n\t\t\t\t.attr(\"y1\", axis_y_position)\n\t\t\t\t.attr(\"y2\", axis_y_position)\n\t\t\t\t.style(\"opacity\", 1);\n\n\t\t\tvar sorted_ticks = [];\n\t\t\tif (show_this_axis) {\n\t\t\t\tsorted_ticks = ticks.type === \"numeric\" ? ticks.slice().sort(tickSorter) : ticks;\n\t\t\t}\n\n\t\t\tvar tickLabelTransform = function(d) {\n\t\t\t\tvar angle = x.tick_label_position == \"default\" ? -x.tick_label_angle : -90;\n\t\t\t\tvar rotate = angleToRotate(angle, 0, 0);\n\t\t\t\tif (x.tick_label_position !== \"default\") {\n\t\t\t\t\tvar y_offset = x.tick_label_position === \"left\" ? -0.3 : 1;\n\t\t\t\t\treturn xyToTranslate(0, -tick_label_distance) + \" \" + rotate + \" \" + xyToTranslate(0, tick_label_size * y_offset);\n\t\t\t\t}\n\t\t\t\tif (angle === 0) {\n\t\t\t\t\treturn xyToTranslate(-d.text_width/2, -(tick_label_distance + tick_label_size*0.33));\n\t\t\t\t}\n\t\t\t\telse if (angle === -90) {\n\t\t\t\t\treturn xyToTranslate(0, -tick_label_distance) + \" \" + rotate + \" \" + xyToTranslate(0, tick_label_size*0.33 - d.multiline_offset);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn xyToTranslate(0, -tick_label_distance) + \" \" + rotate + xyToTranslate(0, -d.multiline_offset); // + \" \" + xyToTranslate(0, tick_label_size*0.66);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar tick_g = tick_container.selectAll(\"g\")\n\t\t\t\t.data(sorted_ticks, function(d) { return d.type + \"-\" + d.value; });\n\n\t\t\tvar tick_g_exit = tick_g.exit();\n\n\t\t\ttick_g_exit.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(exitingXScale(d.value), axis_y_position); })\n\t\t\t\t.style(\"opacity\", 0)\n\t\t\t\t.remove();\n\n\t\t\ttick_g_exit.each(function() {\n\t\t\t\tvar sel = select(this);\n\t\t\t\t// Tick lines\n\t\t\t\tsel.select(\"line\")\n\t\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(animation_duration)\n\t\t\t\t\t.attr(\"y2\", -tick_length);\n\t\t\t\t// Tick labels\n\t\t\t\tsel.select(\"text\")\n\t\t\t\t\t.style(\"fill\", tick_label_color)\n\t\t\t\t\t.style(\"font-size\", tick_label_size + \"px\")\n\t\t\t\t\t.style(\"font-weight\", x.tick_label_weight)\n\t\t\t\t\t.attr(\"transform\", tickLabelTransform)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(animation_duration);\n\t\t\t});\n\n\t\t\tvar tick_g_enter = tick_g.enter().append(\"g\")\n\t\t\t\t.style(\"opacity\", 0);\n\n\t\t\ttick_g_enter\n\t\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(enteringXScale(d.value), axis_y_position_old); });\n\n\t\t\ttick_g_enter.each(function() {\n\t\t\t\tvar sel = select(this);\n\t\t\t\t// Tick lines\n\t\t\t\tsel.append(\"line\")\n\t\t\t\t\t.attr(\"y2\", -tick_length);\n\t\t\t\t// Tick labels\n\t\t\t\tsel.append(\"text\").attr(\"text-anchor\", \"middle\")\n\t\t\t\t\t.attr(\"transform\", tickLabelTransform)\n\t\t\t\t\t.call(userSelectNone);\n\t\t\t});\n\n\t\t\tvar tick_g_update = tick_g.merge(tick_g_enter);\n\n\t\t\ttick_g_update.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.style(\"opacity\", 1)\n\t\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(xScale(d.value), axis_y_position); });\n\n\t\t\tvar setTickOpacity = (function() {\n\t\t\t\tvar placed_ticks = [];\n\t\t\t\tvar y_anchor = axis_y_position + tick_label_distance;\n\t\t\t\treturn function(d) {\n\t\t\t\t\tvar x_anchor = xScale(d.value);\n\t\t\t\t\tif (pos === \"float-above\") {\n\t\t\t\t\t\tvar range = xScale.range();\n\t\t\t\t\t\tif (state.y.axis_visible) {\n\t\t\t\t\t\t\tvar left = x_anchor - d.box_width_left;\n\t\t\t\t\t\t\tif (left < range[0]) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (state.y2.axis_visible) {\n\t\t\t\t\t\t\tvar right = x_anchor + d.box_width_right;\n\t\t\t\t\t\t\tif (right > range[1]) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tvar p1q1 = [ x_anchor, y_anchor ];\n\t\t\t\t\tvar p2 = [ x_anchor - d.box_width_left, y_anchor - d.box_height_left];\n\t\t\t\t\tvar q2 = [ x_anchor + d.box_width_right, y_anchor - d.box_height_right];\n\t\t\t\t\tvar p = [ p1q1, p2 ];\n\t\t\t\t\tvar q = [ p1q1, q2 ];\n\t\t\t\t\tfor (var i = 0; i < placed_ticks.length; i++) {\n\t\t\t\t\t\tvar placed_tick = placed_ticks[i];\n\t\t\t\t\t\tif (x_anchor <= placed_tick.x_anchor) {\n\t\t\t\t\t\t\tif (linesIntersect(q, placed_tick.p)) return 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tif (linesIntersect(p, placed_tick.q)) return 0; // eslint-disable-line no-lonely-if\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tplaced_ticks.push({ x_anchor: x_anchor, p: p, q: q });\n\t\t\t\t\treturn 1;\n\t\t\t\t};\n\t\t\t})();\n\t\t\tconst read_direction = getDirectionAttribute();\n\n\t\t\ttick_g_update.each(function() {\n\t\t\t\tvar sel = select(this);\n\t\t\t\t// Tick lines\n\t\t\t\tsel.select(\"line\")\n\t\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(animation_duration)\n\t\t\t\t\t.attr(\"y2\", -tick_length);\n\t\t\t\t// Tick labels\n\t\t\t\tsel.select(\"text\")\n\t\t\t\t\t.each(function() {\n\t\t\t\t\t\tvar tspans = select(this).selectAll(\"tspan\").data(function(d) { return d.lines; });\n\t\t\t\t\t\ttspans.merge(tspans.enter().append(\"tspan\"))\n\t\t\t\t\t\t\t.attr(\"x\", 0)\n\t\t\t\t\t\t\t.attr(\"dy\", function(d, i) { return i ? x.tick_label_line_height + \"em\" : 0; })\n\t\t\t\t\t\t\t.text(function(d) { return d; });\n\t\t\t\t\t\ttspans.exit().remove();\n\t\t\t\t\t})\n\t\t\t\t\t.attr(\"text-anchor\", read_direction === \"rtl\" ? \"end\" : \"start\")\n\t\t\t\t\t.style(\"fill\", tick_label_color)\n\t\t\t\t\t.style(\"font-size\", tick_label_size + \"px\")\n\t\t\t\t\t.style(\"font-weight\", x.tick_label_weight)\n\t\t\t\t\t.transition()\n\t\t\t\t\t.duration(animation_duration)\n\t\t\t\t\t.style(\"opacity\", setTickOpacity)\n\t\t\t\t\t.attr(\"transform\", tickLabelTransform);\n\t\t\t});\n\n\t\t\tvar title = title_container.selectAll(\"text\")\n\t\t\t\t.data(show_this_axis && title_text ? [title_text] : []);\n\n\t\t\ttitle.exit().remove();\n\n\t\t\ttitle.enter().append(\"text\")\n\t\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t\t.style(\"font-size\", title_size + \"px\")\n\t\t\t\t.style(\"fill\", x.title_color)\n\t\t\t\t.style(\"font-weight\", x.title_weight)\n\t\t\t\t.call(userSelectNone)\n\t\t\t\t.transition()\n\t\t\t\t.duration(0)\n\t\t\t\t.delay(animation_duration)\n\t\t\t\t.text(function(d) { return d; })\n\t\t\t\t.attr(\"x\", x_mid)\n\t\t\t\t.attr(\"y\", title_distance)\n\t\t\t\t.attr(\"dy\", -0.33 * title_size);\n\n\t\t\ttitle.text(function(d) { return d; })\n\t\t\t\t.style(\"fill\", x.title_color)\n\t\t\t\t.style(\"font-size\", title_size + \"px\")\n\t\t\t\t.style(\"font-weight\", x.title_weight)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x\", x_mid)\n\t\t\t\t.attr(\"y\", title_distance)\n\t\t\t\t.attr(\"dy\", -0.33 * title_size);\n\n\t\t\ty_top_old = y_top;\n\n\t\t\treturn pos == \"top\" ? measurements : null;\n\t\t};\n\t})();\n\n\treturn function() {\n\t\tsetValues();\n\t\tvar bottom = updateBottomAxis();\n\t\tvar top = updateTopAxis();\n\t\toldXScale = xScale;\n\t\toldYScale = yScale;\n\t\tx_left_old = x_left;\n\t\tx_right_old = x_right;\n\t\treturn bottom || top;\n\t};\n}\n\n\nexport { initXAxisUpdating };\n","import { initXAxisUpdating } from \"./x-axis\";\nimport { initYAxisUpdating } from \"./y-axis\";\nimport { initY2AxisUpdating } from \"./y2-axis\";\n\n\nfunction initAxisUpdating(instance, state) {\n\tvar updateXAxes = initXAxisUpdating(instance, state);\n\tvar updateYAxes = initYAxisUpdating(instance, state);\n\tvar updateY2Axes = initY2AxisUpdating(instance, state);\n\n\treturn function() {\n\t\tvar x = updateXAxes();\n\t\tvar y = updateYAxes();\n\t\tvar y2 = updateY2Axes();\n\t\treturn {\n\t\t\tx: x,\n\t\t\ty: y,\n\t\t\ty2: y2\n\t\t};\n\t};\n}\n\n\nexport { initAxisUpdating };\n","import { select } from \"d3-selection\";\nimport { remToPx, xyToTranslate, angleToRotate, linesIntersect, safeScale } from \"../../common\";\nimport { tickSorter, userSelectNone, getDirectionAttribute } from \"./common\";\n\n\nfunction initYAxisUpdating(instance, state) {\n\tvar left = instance.chart.select(\"g.fl-left-axis\");\n\tvar line_container = left.select(\"g.fl-axis-line\");\n\tvar tick_container = left.select(\"g.fl-axis-ticks\");\n\tvar title_container = left.select(\"g.fl-axis-title\");\n\tvar y = state.y;\n\tvar oldXScale;\n\tvar oldYScale;\n\tvar y_bottom_old, y_top_old;\n\tvar x_left_old;\n\n\treturn function() {\n\t\tvar measurements = {};\n\t\tvar show_this_axis = y.axis_visible && !instance.yHide();\n\t\tvar xScale = safeScale(instance.xScale());\n\t\tvar yScale = safeScale(instance.yScale());\n\t\tvar ticks = show_this_axis ? instance.yTicks() : [];\n\t\tvar animation_duration = oldXScale ? instance.animationDuration() : 0;\n\t\tif (!oldXScale) oldXScale = xScale;\n\t\tif (!oldYScale) oldYScale = yScale;\n\t\tvar enteringYScale = oldYScale.type === yScale.type && yScale.type !== \"ordinal\" ? oldYScale : yScale;\n\t\tvar exitingYScale = oldYScale.type === yScale.type && oldYScale.type !== \"ordinal\" ? yScale : oldYScale;\n\t\tvar y_bottom = instance.y_bottom;\n\t\tvar y_top = instance.y_top;\n\t\tif (y_bottom_old === undefined) y_bottom_old = y_bottom;\n\t\tif (y_top_old === undefined) y_top_old = y_top;\n\t\tvar x_left = instance.x_left;\n\t\tif (x_left_old === undefined) x_left_old = x_left;\n\n\t\tvar line_color = y.line_and_tick_color;\n\t\tvar line_width = remToPx(y.line_and_tick_width, true);\n\t\tvar tick_label_color = y.tick_label_color;\n\n\t\tvar ticks_labels_side = y.tick_label_position === \"default\";\n\t\tvar ticks_out = y.tick_side === \"out\";\n\n\t\tvar tick_padding = remToPx(y.tick_padding);\n\t\tvar axis_width = instance.yTicks().max_box_width + tick_padding;\n\t\tvar tick_length = ticks_labels_side ? (remToPx(y.tick_length) * (ticks_out ? 1 : -1)) : axis_width;\n\t\tvar tick_label_size = remToPx(y.tick_label_size);\n\t\tvar tick_label_distance = (ticks_out && ticks_labels_side ? tick_length : 0) + tick_padding;\n\n\t\tvar title_text = instance.yTitle();\n\t\tvar title_size = remToPx(y.title_size);\n\t\tvar title_distance = tick_label_distance + ticks.max_box_width + remToPx(y.title_padding) + 0.33 * title_size;\n\t\tmeasurements.extended_gridline = x_left - (tick_label_distance + ticks.max_box_width);\n\n\t\tvar y_mid = (y_top + y_bottom) / 2;\n\n\t\tvar line = line_container.selectAll(\"line\")\n\t\t\t.data(show_this_axis && y.line_visible ? [yScale.domain()] : []);\n\n\t\tline.exit()\n\t\t\t.style(\"stroke\", line_color)\n\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x1\", x_left)\n\t\t\t.attr(\"x2\", x_left)\n\t\t\t.attr(\"y1\", y_bottom)\n\t\t\t.attr(\"y2\", y_top)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove();\n\n\t\tvar line_enter = line.enter()\n\t\t\t.append(\"line\")\n\t\t\t.style(\"shape-rendering\", \"crispEdges\")\n\t\t\t.style(\"stroke-linecap\", \"square\")\n\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t.attr(\"x1\", x_left_old)\n\t\t\t.attr(\"x2\", x_left_old)\n\t\t\t.attr(\"y1\", y_bottom_old)\n\t\t\t.attr(\"y2\", y_top_old)\n\t\t\t.style(\"opacity\", 0);\n\n\t\tline.merge(line_enter)\n\t\t\t.style(\"stroke\", line_color)\n\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x1\", x_left)\n\t\t\t.attr(\"x2\", x_left)\n\t\t\t.attr(\"y1\", y_bottom)\n\t\t\t.attr(\"y2\", y_top)\n\t\t\t.style(\"opacity\", 1);\n\n\t\tvar sorted_ticks = show_this_axis ? ticks : [];\n\t\tif (ticks.type === \"numeric\" && y.tick_mode !== \"custom\") {\n\t\t\tsorted_ticks = ticks.slice().sort(tickSorter);\n\t\t}\n\n\t\tfunction tickLabelTransform(d) {\n\t\t\tif (y.tick_label_position !== \"default\") {\n\t\t\t\tvar x_offset = -tick_label_distance - (ticks.max_box_width - d.box_width);\n\t\t\t\tvar y_offset = y.tick_label_position === \"above\" ? -0.3 : 1;\n\t\t\t\treturn xyToTranslate(x_offset, y_offset*tick_label_size);\n\t\t\t}\n\t\t\tvar angle = -y.tick_label_angle;\n\t\t\tif (angle === 0) {\n\t\t\t\treturn xyToTranslate(-tick_label_distance, 0.33*tick_label_size - d.multiline_offset);\n\t\t\t}\n\t\t\tvar transform = xyToTranslate(-tick_label_distance, 0) + \" \" + angleToRotate(angle);\n\t\t\tif (angle === -90) transform += \" \" + xyToTranslate(d.text_width/2, 0);\n\t\t\treturn transform;\n\t\t}\n\n\t\tvar tick_g = tick_container.selectAll(\"g\")\n\t\t\t.data(sorted_ticks, function(d) { return d.type + \"-\" + d.value; });\n\n\t\tvar tick_g_exit = tick_g.exit();\n\n\t\ttick_g_exit.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(x_left, exitingYScale(d.value)); })\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove();\n\n\t\ttick_g_exit.each(function() {\n\t\t\tvar sel = select(this);\n\t\t\t// Tick lines\n\t\t\tsel.select(\"line\")\n\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x2\", -tick_length);\n\t\t\t// Tick labels\n\t\t\tsel.select(\"text\")\n\t\t\t\t.style(\"fill\", tick_label_color)\n\t\t\t\t.style(\"font-size\", tick_label_size + \"px\")\n\t\t\t\t.style(\"font-weight\", y.tick_label_weight)\n\t\t\t\t.attr(\"transform\", tickLabelTransform)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration);\n\t\t});\n\n\t\tvar tick_g_enter = tick_g.enter().append(\"g\")\n\t\t\t.style(\"opacity\", 0);\n\n\t\ttick_g_enter\n\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(x_left_old, enteringYScale(d.value)); });\n\n\t\tconst read_direction = getDirectionAttribute();\n\t\tconst text_anchor = read_direction === \"rtl\" ? \"start\" : \"end\";\n\n\t\ttick_g_enter.each(function() {\n\t\t\tvar sel = select(this);\n\t\t\t// Tick lines\n\t\t\tsel.append(\"line\")\n\t\t\t\t.attr(\"x2\", -tick_length);\n\t\t\t// Tick labels\n\t\t\tsel.append(\"text\")\n\t\t\t\t.attr(\"text-anchor\", text_anchor)\n\t\t\t\t.attr(\"transform\", tickLabelTransform)\n\t\t\t\t.call(userSelectNone);\n\t\t});\n\n\t\tvar tick_g_update = tick_g.merge(tick_g_enter);\n\n\t\ttick_g_update.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.style(\"opacity\", 1)\n\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(x_left, yScale(d.value)); });\n\n\t\tvar setTickOpacity = (function() {\n\t\t\tvar placed_ticks = [];\n\t\t\tvar x_anchor = x_left - tick_label_distance;\n\t\t\treturn function(d) {\n\t\t\t\tvar y_anchor = yScale(d.value);\n\t\t\t\tvar p1q1 = [ x_anchor, y_anchor ];\n\t\t\t\tvar p2 = [ x_anchor - d.box_width_above, y_anchor - d.box_height_above];\n\t\t\t\tvar q2 = [ x_anchor - d.box_width_below, y_anchor + d.box_height_below];\n\t\t\t\tvar p = [ p1q1, p2 ];\n\t\t\t\tvar q = [ p1q1, q2 ];\n\t\t\t\tfor (var i = 0; i < placed_ticks.length; i++) {\n\t\t\t\t\tvar placed_tick = placed_ticks[i];\n\t\t\t\t\tif (y_anchor >= placed_tick.y_anchor) {\n\t\t\t\t\t\tif (linesIntersect(p, placed_tick.q)) return 0;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (linesIntersect(placed_tick.p, q)) return 0; // eslint-disable-line no-lonely-if\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tplaced_ticks.push({ y_anchor: y_anchor, p: p, q: q });\n\t\t\t\treturn 1;\n\t\t\t};\n\t\t})();\n\n\t\ttick_g_update.each(function() {\n\t\t\tvar sel = select(this);\n\t\t\t// Tick lines\n\t\t\tsel.select(\"line\")\n\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x2\", -tick_length);\n\t\t\t// Tick labels\n\t\t\tsel.select(\"text\")\n\t\t\t\t.each(function() {\n\t\t\t\t\tvar tspans = select(this).selectAll(\"tspan\").data(function(d) { return d.lines; });\n\t\t\t\t\ttspans.merge(tspans.enter().append(\"tspan\"))\n\t\t\t\t\t\t.attr(\"x\", 0)\n\t\t\t\t\t\t.attr(\"dy\", function(d, i) { return i ? y.tick_label_line_height + \"em\" : 0; })\n\t\t\t\t\t\t.text(function(d) { return d; });\n\t\t\t\t\ttspans.exit().remove();\n\t\t\t\t})\n\t\t\t\t.style(\"fill\", tick_label_color)\n\t\t\t\t.style(\"font-size\", tick_label_size + \"px\")\n\t\t\t\t.style(\"font-weight\", y.tick_label_weight)\n\t\t\t\t.attr(\"text-anchor\", text_anchor)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.style(\"opacity\", setTickOpacity)\n\t\t\t\t.attr(\"transform\", tickLabelTransform);\n\t\t});\n\n\t\tvar title = title_container.selectAll(\"text\")\n\t\t\t.data(show_this_axis && title_text ? [title_text] : []);\n\n\t\ttitle.exit().remove();\n\n\t\tvar getTitleTransform = function() {\n\t\t\treturn xyToTranslate(x_left, y_mid) + \" \" + angleToRotate(-90) + \" \" + xyToTranslate(0, -title_distance);\n\t\t};\n\n\t\ttitle.enter().append(\"text\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.style(\"font-size\", title_size + \"px\")\n\t\t\t.style(\"fill\", y.title_color)\n\t\t\t.style(\"font-weight\", y.title_weight)\n\t\t\t.call(userSelectNone)\n\t\t\t.transition()\n\t\t\t.duration(0)\n\t\t\t.delay(animation_duration)\n\t\t\t.text(function(d) { return d; })\n\t\t\t.attr(\"x\", 0)\n\t\t\t.attr(\"y\", 0)\n\t\t\t.attr(\"transform\", getTitleTransform);\n\n\t\ttitle.text(function(d) { return d; })\n\t\t\t.style(\"fill\", y.title_color)\n\t\t\t.style(\"font-size\", title_size + \"px\")\n\t\t\t.style(\"font-weight\", y.title_weight)\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x\", 0)\n\t\t\t.attr(\"y\", 0)\n\t\t\t.attr(\"transform\", getTitleTransform);\n\n\t\toldXScale = xScale;\n\t\toldYScale = yScale;\n\t\ty_bottom_old = y_bottom;\n\t\ty_top_old = y_top;\n\t\tx_left_old = x_left;\n\n\t\treturn measurements;\n\t};\n}\n\n\nexport { initYAxisUpdating };\n","import { select } from \"d3-selection\";\nimport { remToPx, xyToTranslate, angleToRotate, linesIntersect, safeScale } from \"../../common\";\nimport { tickSorter, userSelectNone, getDirectionAttribute } from \"./common\";\n\n\nfunction initY2AxisUpdating(instance, state) {\n\tvar right = instance.chart.select(\"g.fl-right-axis\");\n\tvar line_container = right.select(\"g.fl-axis-line\");\n\tvar tick_container = right.select(\"g.fl-axis-ticks\");\n\tvar title_container = right.select(\"g.fl-axis-title\");\n\tvar y = state.y2;\n\tvar oldXScale;\n\tvar oldYScale;\n\tvar y_bottom_old, y_top_old;\n\tvar x_right_old;\n\n\treturn function() {\n\t\tvar measurements = {};\n\t\tvar show_this_axis = y.axis_visible && !instance.y2Hide();\n\t\tvar xScale = safeScale(instance.xScale());\n\t\tvar yScale = safeScale(instance.y2Scale());\n\t\tvar ticks = show_this_axis ? instance.y2Ticks() : [];\n\t\tvar animation_duration = oldXScale ? instance.animationDuration() : 0;\n\t\tif (!oldXScale) oldXScale = xScale;\n\t\tif (!oldYScale) oldYScale = yScale;\n\t\tvar enteringYScale = oldYScale.type === yScale.type && yScale.type !== \"ordinal\" ? oldYScale : yScale;\n\t\tvar exitingYScale = oldYScale.type === yScale.type && oldYScale.type !== \"ordinal\" ? yScale : oldYScale;\n\t\tvar y_bottom = instance.y_bottom;\n\t\tvar y_top = instance.y_top;\n\t\tif (y_bottom_old === undefined) y_bottom_old = y_bottom;\n\t\tif (y_top_old === undefined) y_top_old = y_top;\n\t\tvar x_right = instance.x_right;\n\t\tif (x_right_old === undefined) x_right_old = x_right;\n\n\t\tvar line_color = y.line_and_tick_color;\n\t\tvar line_width = remToPx(y.line_and_tick_width, true);\n\t\tvar tick_label_color = y.tick_label_color;\n\n\t\tvar ticks_labels_side = y.tick_label_position === \"default\";\n\t\tvar ticks_out = y.tick_side === \"out\";\n\n\t\tvar tick_padding = remToPx(y.tick_padding);\n\t\tvar axis_width = instance.y2Ticks().max_box_width + tick_padding;\n\t\tvar tick_length = ticks_labels_side ? (remToPx(y.tick_length) * (ticks_out ? 1 : -1)) : axis_width;\n\t\tvar tick_label_size = remToPx(y.tick_label_size);\n\t\tvar tick_label_distance = (ticks_out && ticks_labels_side ? tick_length : 0) + tick_padding;\n\n\t\tvar title_text = instance.y2Title();\n\t\tvar title_size = remToPx(y.title_size);\n\t\tvar title_distance = tick_label_distance + ticks.max_box_width + remToPx(y.title_padding) + 0.85 * title_size;\n\t\t// 0.85 was arrived at by trial and error; we do not fully understand why it is correct\n\t\tmeasurements.extended_gridline = x_right + tick_label_distance + ticks.max_box_width;\n\n\t\tvar y_mid = (y_bottom + y_top) / 2;\n\n\t\tvar line = line_container.selectAll(\"line\")\n\t\t\t.data(show_this_axis && y.line_visible ? [yScale.domain()] : []);\n\n\t\tline.exit()\n\t\t\t.style(\"stroke\", line_color)\n\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x1\", x_right)\n\t\t\t.attr(\"x2\", x_right)\n\t\t\t.attr(\"y1\", y_bottom)\n\t\t\t.attr(\"y2\", y_top)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove();\n\n\t\tvar line_enter = line.enter()\n\t\t\t.append(\"line\")\n\t\t\t.style(\"shape-rendering\", \"crispEdges\")\n\t\t\t.style(\"stroke-linecap\", \"square\")\n\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t.attr(\"x1\", x_right_old)\n\t\t\t.attr(\"x2\", x_right_old)\n\t\t\t.attr(\"y1\", y_bottom_old)\n\t\t\t.attr(\"y2\", y_top_old)\n\t\t\t.style(\"opacity\", 0);\n\n\t\tline.merge(line_enter)\n\t\t\t.style(\"stroke\", line_color)\n\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x1\", x_right)\n\t\t\t.attr(\"x2\", x_right)\n\t\t\t.attr(\"y1\", y_bottom)\n\t\t\t.attr(\"y2\", y_top)\n\t\t\t.style(\"opacity\", 1);\n\n\t\tvar sorted_ticks = ticks.type === \"numeric\" ? ticks.slice().sort(tickSorter) : ticks;\n\n\t\tfunction tickLabelTransform(d) {\n\t\t\tif (y.tick_label_position !== \"default\") {\n\t\t\t\tvar x_offset = tick_label_distance + (ticks.max_box_width - d.box_width);\n\t\t\t\tvar y_offset = y.tick_label_position === \"above\" ? -0.3 : 1;\n\t\t\t\treturn xyToTranslate(x_offset, y_offset*tick_label_size);\n\t\t\t}\n\t\t\tvar angle = -y.tick_label_angle;\n\t\t\tif (angle === 0) {\n\t\t\t\treturn xyToTranslate(tick_label_distance, 0.33*tick_label_size - d.multiline_offset);\n\t\t\t}\n\t\t\tvar transform = xyToTranslate(tick_label_distance, 0) + \" \" + angleToRotate(angle);\n\t\t\tif (angle === -90) transform += \" \" + xyToTranslate(d.text_width/2, 0);\n\t\t\treturn transform;\n\t\t}\n\n\t\tvar tick_g = tick_container.selectAll(\"g\")\n\t\t\t.data(sorted_ticks, function(d) { return d.type + \"-\" + d.value; });\n\n\t\tvar tick_g_exit = tick_g.exit();\n\n\t\ttick_g_exit.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(x_right, exitingYScale(d.value)); })\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove();\n\n\t\ttick_g_exit.each(function() {\n\t\t\tvar sel = select(this);\n\t\t\t// Tick lines\n\t\t\tsel.select(\"line\")\n\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x2\", -tick_length);\n\t\t\t// Tick labels\n\t\t\tsel.select(\"text\")\n\t\t\t\t.style(\"fill\", tick_label_color)\n\t\t\t\t.style(\"font-size\", tick_label_size + \"px\")\n\t\t\t\t.style(\"font-weight\", y.tick_label_weight)\n\t\t\t\t.attr(\"transform\", tickLabelTransform)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration);\n\t\t});\n\n\t\tvar tick_g_enter = tick_g.enter().append(\"g\")\n\t\t\t.style(\"opacity\", 0);\n\n\t\ttick_g_enter\n\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(x_right_old, enteringYScale(d.value)); });\n\n\t\tconst read_direction = getDirectionAttribute();\n\n\n\t\ttick_g_enter.each(function() {\n\t\t\tvar sel = select(this);\n\t\t\t// Tick lines\n\t\t\tsel.append(\"line\")\n\t\t\t\t.attr(\"x2\", tick_length);\n\t\t\t// Tick labels\n\t\t\tsel.append(\"text\")\n\t\t\t\t.attr(\"transform\", tickLabelTransform)\n\t\t\t\t.call(userSelectNone);\n\t\t});\n\n\t\tvar tick_g_update = tick_g.merge(tick_g_enter);\n\n\t\ttick_g_update.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.style(\"opacity\", 1)\n\t\t\t.attr(\"transform\", function(d) { return xyToTranslate(x_right, yScale(d.value)); })\n\t\t\t.attr(\"text-anchor\", read_direction === \"rtl\" ? \"end\" : \"start\");\n\n\t\tvar setTickOpacity = (function() {\n\t\t\tvar placed_ticks = [];\n\t\t\tvar x_anchor = x_right + tick_label_distance;\n\t\t\treturn function(d) {\n\t\t\t\tvar y_anchor = yScale(d.value);\n\t\t\t\tvar p1q1 = [ x_anchor, y_anchor ];\n\t\t\t\tvar p2 = [ x_anchor - d.box_width_above, y_anchor - d.box_height_above];\n\t\t\t\tvar q2 = [ x_anchor - d.box_width_below, y_anchor + d.box_height_below];\n\t\t\t\tvar p = [ p1q1, p2 ];\n\t\t\t\tvar q = [ p1q1, q2 ];\n\t\t\t\tfor (var i = 0; i < placed_ticks.length; i++) {\n\t\t\t\t\tvar placed_tick = placed_ticks[i];\n\t\t\t\t\tif (y_anchor >= placed_tick.y_anchor) {\n\t\t\t\t\t\tif (linesIntersect(p, placed_tick.q)) return 0;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (linesIntersect(placed_tick.p, q)) return 0; // eslint-disable-line no-lonely-if\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tplaced_ticks.push({ y_anchor: y_anchor, p: p, q: q });\n\t\t\t\treturn 1;\n\t\t\t};\n\t\t})();\n\n\t\ttick_g_update.each(function() {\n\t\t\tvar sel = select(this);\n\t\t\t// Tick lines\n\t\t\tsel.select(\"line\")\n\t\t\t\t.style(\"stroke\", line_color)\n\t\t\t\t.style(\"stroke-width\", line_width)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.attr(\"x2\", tick_length);\n\t\t\t// Tick labels\n\t\t\tsel.select(\"text\")\n\t\t\t\t.each(function() {\n\t\t\t\t\tvar tspans = select(this).selectAll(\"tspan\").data(function(d) { return d.lines; });\n\t\t\t\t\ttspans.merge(tspans.enter().append(\"tspan\"))\n\t\t\t\t\t\t.attr(\"x\", 0)\n\t\t\t\t\t\t.attr(\"dy\", function(d, i) { return i ? y.tick_label_line_height + \"em\" : 0; })\n\t\t\t\t\t\t.text(function(d) { return d; });\n\t\t\t\t\ttspans.exit().remove();\n\t\t\t\t})\n\t\t\t\t.style(\"fill\", tick_label_color)\n\t\t\t\t.style(\"font-size\", tick_label_size + \"px\")\n\t\t\t\t.style(\"font-weight\", y.tick_label_weight)\n\t\t\t\t.transition()\n\t\t\t\t.duration(animation_duration)\n\t\t\t\t.style(\"opacity\", setTickOpacity)\n\t\t\t\t.attr(\"transform\", tickLabelTransform);\n\t\t});\n\n\t\tvar title = title_container.selectAll(\"text\")\n\t\t\t.data(show_this_axis && title_text ? [title_text] : []);\n\n\t\ttitle.exit().remove();\n\n\t\tvar getTitleTransform = function() {\n\t\t\treturn xyToTranslate(x_right, y_mid) + \" \" + angleToRotate(-90) + \" \" + xyToTranslate(0, title_distance);\n\t\t};\n\n\t\ttitle.enter().append(\"text\")\n\t\t\t.attr(\"text-anchor\", \"middle\")\n\t\t\t.style(\"font-size\", title_size + \"px\")\n\t\t\t.style(\"fill\", y.title_color)\n\t\t\t.style(\"font-weight\", y.title_weight)\n\t\t\t.call(userSelectNone)\n\t\t\t.transition()\n\t\t\t.duration(0)\n\t\t\t.delay(animation_duration)\n\t\t\t.text(function(d) { return d; })\n\t\t\t.attr(\"x\", 0)\n\t\t\t.attr(\"y\", 0)\n\t\t\t.attr(\"transform\", getTitleTransform);\n\n\t\ttitle.text(function(d) { return d; })\n\t\t\t.style(\"fill\", y.title_color)\n\t\t\t.style(\"font-size\", title_size + \"px\")\n\t\t\t.style(\"font-weight\", y.title_weight)\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x\", 0)\n\t\t\t.attr(\"y\", 0)\n\t\t\t.attr(\"transform\", getTitleTransform);\n\n\t\toldXScale = xScale;\n\t\toldYScale = yScale;\n\t\ty_bottom_old = y_bottom;\n\t\ty_top_old = y_top;\n\t\tx_right_old = x_right;\n\n\t\treturn measurements;\n\t};\n}\n\n\nexport { initY2AxisUpdating };\n","import { remToPx, safeScale } from \"../../common\";\n\nvar DASH_ARRAYS = {\n\tsolid: null,\n\tdash: [ 4, 1 ],\n\tdot: [ 1, 1 ],\n\tdot_dash: [4, 1, 1, 1]\n};\n\n\nfunction getDashArray(style) {\n\tif (style === \"solid\") return null;\n\tvar multiplier = remToPx(1) / 4;\n\treturn DASH_ARRAYS[style].map(function(d) { return d * multiplier; }).join(\" \");\n}\n\n\nfunction initGridlineUpdating(instance, state) {\n\tvar x = state.x;\n\tvar y = state.y;\n\tvar y2 = state.y2;\n\tvar vertical = instance.chart.select(\"g.fl-gridlines-vertical\");\n\tvar horizontal = instance.chart.select(\"g.fl-gridlines-horizontal\");\n\tvar oldXScale, oldYScale, oldY2Scale;\n\tvar x_left_old, x_right_old, y_bottom_old, y_top_old;\n\n\treturn function(measurements) {\n\t\tvar xScale = safeScale(instance.xScale());\n\t\tvar yScale = safeScale(instance.yScale());\n\t\tvar y2Scale = safeScale(instance.y2Scale());\n\t\tvar x_left = instance.x_left;\n\t\tvar x_right = instance.x_right;\n\t\tif (x_left_old === undefined) x_left_old = x_left;\n\t\tif (x_right_old === undefined) x_right_old = x_right;\n\t\tvar y_bottom = instance.y_bottom;\n\t\tvar y_top = instance.y_top;\n\t\tif (y_bottom_old === undefined) y_bottom_old = y_bottom;\n\t\tif (y_top_old === undefined) y_top_old = y_top;\n\t\toldXScale = oldXScale || xScale;\n\t\toldYScale = oldYScale || yScale;\n\t\toldY2Scale = oldY2Scale || y2Scale;\n\t\tvar enteringXScale = oldXScale.type === xScale.type && xScale.type !== \"ordinal\" ? oldXScale : xScale;\n\t\tvar exitingXScale = oldXScale.type === xScale.type && oldXScale.type !== \"ordinal\" ? xScale : oldXScale;\n\t\tvar enteringYScale = oldYScale.type === yScale.type && yScale.type !== \"ordinal\" ? oldYScale : yScale;\n\t\tvar exitingYScale = oldYScale.type === yScale.type && oldYScale.type !== \"ordinal\" ? yScale : oldYScale;\n\t\tvar enteringY2Scale = oldY2Scale.type === y2Scale.type && oldY2Scale.type !== \"ordinal\" ? oldY2Scale : y2Scale;\n\t\tvar exitingY2Scale = oldY2Scale.type === y2Scale.type && oldY2Scale.type !== \"ordinal\" ? y2Scale : oldY2Scale;\n\n\t\tvar animation_duration = oldXScale ? instance.animationDuration() : 0;\n\n\t\tvar getTicksForGridlines = function(axis) {\n\t\t\t// If the user has switched the whole axis off don't return any ticks\n\t\t\tif (axis === \"x\" && state.x.axis_position === \"off\") return [];\n\t\t\telse if (axis !== \"x\" && !state[axis].axis_visible) return [];\n\t\t\t// If the user has switched gridlines off don't return any ticks\n\t\t\tif (!state[axis].gridlines_visible) return [];\n\t\t\tvar hide = instance[axis + \"Hide\"]();\n\t\t\t// If the developer has switched gridlines off don't return any ticks\n\t\t\tif (hide && !hide.keep_gridlines) return [];\n\t\t\t// Else return array of tick objects\n\t\t\treturn instance[axis + \"Ticks\"]();\n\t\t};\n\n\t\tvar x_ticks = getTicksForGridlines(\"x\");\n\t\tvar y_ticks = getTicksForGridlines(\"y\");\n\t\tvar y2_ticks = getTicksForGridlines(\"y2\");\n\n\t\tvar v_data = x_ticks.map(function(d) {\n\t\t\treturn {\n\t\t\t\ttype: d.type,\n\t\t\t\tvalue: d.value,\n\t\t\t\tdasharray: getDashArray(x.gridline_style),\n\t\t\t\tstroke: x.gridline_color,\n\t\t\t\twidth: remToPx(x.gridline_width, true),\n\t\t\t\tx_enter: enteringXScale(d.value),\n\t\t\t\tx: xScale(d.value),\n\t\t\t};\n\t\t});\n\n\n\t\tif (x.gridline_category_dividers && xScale.step) {\n\t\t\tvar x_step = xScale.step();\n\t\t\tv_data.pop();\n\t\t\tv_data.forEach(function(gridline) {\n\t\t\t\tgridline.x_enter += x_step/2;\n\t\t\t\tgridline.x += x_step/2;\n\t\t\t\tif (x.gridline_category_dividers_extend) {\n\t\t\t\t\tvar extend_top = measurements.x && measurements.x.pos == \"top\",\n\t\t\t\t\t    extend_bottom = measurements.x && measurements.x.pos == \"bottom\";\n\t\t\t\t\tif (extend_top) gridline.y2 = measurements.x.extended_gridline;\n\t\t\t\t\telse if (extend_bottom) gridline.y1 = measurements.x.extended_gridline;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvar y_data = y_ticks.map(function(d) {\n\t\t\treturn {\n\t\t\t\taxis: \"y\",\n\t\t\t\ttype: d.type,\n\t\t\t\tvalue: d.value,\n\t\t\t\tdasharray: getDashArray(y.gridline_style),\n\t\t\t\tstroke: y.gridline_color,\n\t\t\t\twidth: remToPx(y.gridline_width, true),\n\t\t\t\ty_enter: enteringYScale(d.value),\n\t\t\t\ty: yScale(d.value),\n\t\t\t};\n\t\t});\n\n\t\tif (y.gridline_category_dividers && yScale.step) {\n\t\t\tvar y_step = yScale.step();\n\t\t\ty_data.pop();\n\t\t\ty_data.forEach(function(gridline) {\n\t\t\t\tgridline.y_enter -= y_step/2;\n\t\t\t\tgridline.y -= y_step/2;\n\t\t\t\tif (y.gridline_category_dividers_extend) {\n\t\t\t\t\tgridline.x1 = measurements.y.extended_gridline;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvar y2_data = y2_ticks.map(function(d) {\n\t\t\treturn {\n\t\t\t\taxis: \"y2\",\n\t\t\t\ttype: d.type,\n\t\t\t\tvalue: d.value,\n\t\t\t\tdasharray: getDashArray(y2.gridline_style),\n\t\t\t\tstroke: y2.gridline_color,\n\t\t\t\twidth: remToPx(y2.gridline_width),\n\t\t\t\ty_enter: enteringY2Scale(d.value),\n\t\t\t\ty: y2Scale(d.value),\n\t\t\t};\n\t\t});\n\n\t\tif (y2.gridline_category_dividers && y2Scale.step) {\n\t\t\tvar y2_step = y2Scale.step();\n\t\t\ty2_data.pop();\n\t\t\ty2_data.forEach(function(gridline) {\n\t\t\t\tgridline.y_enter -= y2_step/2;\n\t\t\t\tgridline.y -= y2_step/2;\n\t\t\t\tif (y2.gridline_category_dividers_extend) {\n\t\t\t\t\tgridline.x2 = measurements.y2.extended_gridline;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tvar h_data = y_data.concat(y2_data);\n\n\t\tvar vertical_lines = vertical.selectAll(\"line\")\n\t\t\t.data(v_data, function(d) { return d.type + \"-\" + d.value; });\n\n\t\tvertical_lines.exit()\n\t\t\t.attr(\"stroke-dasharray\", function(d) { return d.dasharray; })\n\t\t\t.style(\"stroke\", function(d) { return d.stroke; })\n\t\t\t.style(\"stroke-width\", function(d) { return d.width; })\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x1\", function(d) { return exitingXScale(d.value); })\n\t\t\t.attr(\"x2\", function(d) { return exitingXScale(d.value); })\n\t\t\t.attr(\"y1\", y_bottom)\n\t\t\t.attr(\"y2\", y_top)\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove();\n\n\t\tvar vertical_lines_enter = vertical_lines.enter().append(\"line\")\n\t\t\t.style(\"shape-rendering\", \"crispEdges\")\n\t\t\t.attr(\"x1\", function(d) { return d.x_enter; })\n\t\t\t.attr(\"x2\", function(d) { return d.x_enter; })\n\t\t\t.attr(\"y1\", y_bottom_old)\n\t\t\t.attr(\"y2\", y_top_old)\n\t\t\t.style(\"opacity\", 0);\n\n\t\tvertical_lines.merge(vertical_lines_enter)\n\t\t\t.attr(\"stroke-dasharray\", function(d) { return d.dasharray; })\n\t\t\t.style(\"stroke\", function(d) { return d.stroke; })\n\t\t\t.style(\"stroke-width\", function(d) { return d.width; })\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x1\", function(d) { return d.x; })\n\t\t\t.attr(\"x2\", function(d) { return d.x; })\n\t\t\t.attr(\"y1\", y_bottom)\n\t\t\t.attr(\"y2\", y_top)\n\t\t\t.style(\"opacity\", 1);\n\n\t\tvar horizontal_lines = horizontal.selectAll(\"line\")\n\t\t\t.data(h_data, function(d) { return d.axis + \"-\" + d.type + \"-\" + d.value; });\n\n\t\thorizontal_lines.exit()\n\t\t\t.attr(\"stroke-dasharray\", function(d) { return d.dasharray; })\n\t\t\t.style(\"stroke\", function(d) { return d.stroke; })\n\t\t\t.style(\"stroke-width\", function(d) { return d.width; })\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x1\", x_left)\n\t\t\t.attr(\"x2\", x_right)\n\t\t\t.attr(\"y1\", function(d) { return d.axis === \"y\" ? exitingYScale(d.value) : exitingY2Scale(d.value); })\n\t\t\t.attr(\"y2\", function(d) { return d.axis === \"y\" ? exitingYScale(d.value) : exitingY2Scale(d.value); })\n\t\t\t.style(\"opacity\", 0)\n\t\t\t.remove();\n\n\t\tvar horizontal_lines_enter = horizontal_lines.enter().append(\"line\")\n\t\t\t.style(\"shape-rendering\", \"crispEdges\")\n\t\t\t.attr(\"x1\", x_left_old)\n\t\t\t.attr(\"x2\", x_right_old)\n\t\t\t.attr(\"y1\", function(d) { return d.y_enter; })\n\t\t\t.attr(\"y2\", function(d) { return d.y_enter; })\n\t\t\t.style(\"opacity\", 0);\n\n\t\thorizontal_lines.merge(horizontal_lines_enter)\n\t\t\t.attr(\"stroke-dasharray\", function(d) { return d.dasharray; })\n\t\t\t.style(\"stroke\", function(d) { return d.stroke; })\n\t\t\t.style(\"stroke-width\", function(d) { return d.width; })\n\t\t\t.transition()\n\t\t\t.duration(animation_duration)\n\t\t\t.attr(\"x1\", x_left)\n\t\t\t.attr(\"x2\", x_right)\n\t\t\t.attr(\"y1\", function(d) { return d.y; })\n\t\t\t.attr(\"y2\", function(d) { return d.y; })\n\t\t\t.style(\"opacity\", 1);\n\n\t\toldXScale = xScale;\n\t\toldYScale = yScale;\n\t\toldY2Scale = y2Scale;\n\t\tx_left_old = x_left;\n\t\tx_right_old = x_right;\n\t};\n}\n\n\nexport { initGridlineUpdating };\n","import { updateRemToPx } from \"../common\";\nimport { initDebugUpdating } from \"./debug\";\nimport { initTickUpdating } from \"./ticks\";\nimport { initClipUpdating } from \"./clip\";\nimport { initBackgroundUpdating } from \"./background\";\nimport { initAxisUpdating } from \"./axes\";\nimport { initGridlineUpdating } from \"./gridlines\";\n\n\nfunction initUpdate(instance, state) {\n\tvar updateTransform = function() {\n\t\tvar transform = null;\n\t\tif (instance.offsetLeft() || instance.offsetTop()) {\n\t\t\ttransform = \"translate(\" + instance.offsetLeft() + \",\" + instance.offsetTop() + \")\";\n\t\t}\n\t\tinstance.chart.attr(\"transform\", transform);\n\t};\n\n\n\tvar updateDebug = initDebugUpdating(instance);\n\tvar updateTicks = initTickUpdating(instance, state);\n\tvar updateMargins = function(margins) { instance.margins._update(margins); };\n\tvar updateClip = initClipUpdating(instance, state);\n\tvar updateBackground = initBackgroundUpdating(instance, state);\n\tvar updateAxes = initAxisUpdating(instance, state);\n\tvar updateGridlines = initGridlineUpdating(instance, state);\n\n\treturn function(opts) {\n\t\topts = opts || {};\n\t\tupdateRemToPx();\n\t\tupdateTransform();\n\t\tupdateDebug();\n\t\tupdateTicks();\n\t\tupdateMargins(opts.margins);\n\t\tif (opts.skip_rendering) return instance;\n\t\tupdateClip();\n\t\tupdateBackground();\n\t\tvar measurements = updateAxes();\n\t\tupdateGridlines(measurements);\n\t\treturn instance;\n\t};\n}\n\n\nexport { initUpdate };\n","function initDebugUpdating(instance) {\n\tlet debug_rect = instance.chart.select(\"rect.fl-chart-debug-rectangle\");\n\n\treturn function() {\n\t\tdebug_rect.attr(\"width\", instance.width())\n\t\t\t.attr(\"height\", instance.height())\n\t\t\t.style(\"stroke\", instance.debugColor())\n\t\t\t.style(\"display\", instance.debug() ? null : \"none\");\n\t};\n}\n\n\nexport { initDebugUpdating };\n","import { remToPx } from \"../../common\";\n\nfunction initClipUpdating(instance, state) {\n\tvar clip_path = instance.chart.select(\"clipPath.fl-data-clip-path\");\n\tvar clip_rect = clip_path.select(\"rect\");\n\tvar clip_path_grid = instance.chart.select(\"clipPath.fl-grid-clip-path\");\n\tvar clip_rect_grid = clip_path_grid.select(\"rect\");\n\tvar data_background = instance.chart.select(\".fl-data-background\");\n\tvar data_foreground = instance.chart.select(\".fl-data-foreground\");\n\tvar gridlines = instance.chart.select(\".fl-gridlines\");\n\n\treturn function() {\n\t\tvar id = instance.identifier() + \"-clip-path\";\n\t\tvar clip_attr = \"url(#\" + id + \")\";\n\t\tclip_path.attr(\"id\", id);\n\t\tvar id_grid = instance.identifier() + \"-grid-clip-path\";\n\t\tvar clip_attr_grid = \"url(#\" + id_grid + \")\";\n\t\tclip_path_grid.attr(\"id\", id_grid);\n\n\t\tdata_background.attr(\"clip-path\", clip_attr);\n\t\tdata_foreground.attr(\"clip-path\", clip_attr);\n\t\tgridlines.attr(\"clip-path\", clip_attr_grid);\n\n\t\tvar x_left = instance.x_left;\n\t\tvar x_right = instance.x_right;\n\t\tvar y_top = instance.y_top;\n\t\tvar y_bottom = instance.y_bottom;\n\n\t\tvar clip = instance.clip();\n\t\tvar x = clip.left ? x_left : 0;\n\t\tvar y = clip.top ? y_top : 0;\n\t\tvar width = Math.max((clip.right ? x_right : instance.width()) - x, 1);\n\t\tvar height = Math.max((clip.bottom ? y_bottom : instance.height()) - y, 1);\n\n\t\tclip_rect\n\t\t\t.attr(\"x\", x)\n\t\t\t.attr(\"y\", y)\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", height);\n\n\t\tvar lr_padding = remToPx(state.x.gridline_width, true);\n\t\tvar tb_padding = remToPx(state.y.gridline_width, true);\n\n\t\tclip_rect_grid\n\t\t\t.transition()\n\t\t\t.duration(instance.animationDuration())\n\t\t\t.attr(\"x\", x_left - lr_padding)\n\t\t\t.attr(\"y\", y_top - tb_padding)\n\t\t\t.attr(\"width\", (x_right - x_left) + (2 * lr_padding))\n\t\t\t.attr(\"height\", (y_bottom - y_top) + (2 * tb_padding));\n\t};\n}\n\n\nexport { initClipUpdating };\n","function initBackgroundUpdating(instance, state) {\n\tvar bg = state.background;\n\tvar fill = instance.chart.select(\"rect.fl-chart-fill\");\n\tvar image = instance.chart.select(\"image.fl-chart-image\");\n\tvar rect = instance.chart.select(\"rect.fl-chart-interaction\");\n\n\treturn function() {\n\t\tvar x_range = instance.xScale().range();\n\t\tvar y_range = instance.yScale().range();\n\n\t\tvar x = x_range[0];\n\t\tvar y = y_range[1];\n\t\tvar width = Math.max(instance.plot_width, 1);\n\t\tvar height = Math.max(instance.plot_height, 1);\n\n\t\tfill\n\t\t\t.attr(\"x\", x)\n\t\t\t.attr(\"y\", y)\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", height)\n\t\t\t.attr(\"fill\", bg.background_color_enabled ? bg.background_color : \"none\");\n\t\timage\n\t\t\t.attr(\"x\", x)\n\t\t\t.attr(\"y\", y)\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", height)\n\t\t\t.attr(\"xlink:href\", bg.background_image_enabled ? bg.background_image_src : null)\n\t\t\t.attr(\"preserveAspectRatio\", function() {\n\t\t\t\tif (bg.background_image_size == \"stretch\") return \"none\";\n\t\t\t\treturn bg.background_image_position + \" \" + bg.background_image_size;\n\t\t\t});\n\t\trect\n\t\t\t.attr(\"x\", x)\n\t\t\t.attr(\"y\", y)\n\t\t\t.attr(\"width\", width)\n\t\t\t.attr(\"height\", height);\n\t};\n}\n\n\nexport { initBackgroundUpdating };\n","import { prepareState } from \"./state\";\nimport { getContainers } from \"./container\";\nimport { addChart } from \"./chart\";\nimport { initIdentifier } from \"./identifier\";\nimport { initDebug, initDebugColor } from \"./debug\";\nimport { initClip } from \"./clip\";\nimport { initAnimationDuration } from \"./animation\";\nimport { initFormat } from \"./format\";\nimport { initNumberParse, initDatetimeParse } from \"./parse\";\nimport { initDimensions, initOffsetLeft, initOffsetTop } from \"./dimensions\";\nimport { initData } from \"./data\";\nimport {\n\tinitXTicks,\n\tinitYTicks,\n\tinitY2Ticks,\n\tinitXAutoTicks,\n\tinitYAutoTicks,\n\tinitY2AutoTicks\n} from \"./ticks\";\nimport { initXTitle, initYTitle, initY2Title } from \"./axis-titles\";\nimport { initMargins } from \"./margins\";\nimport {\n\tinitXScale,\n\tinitYScale,\n\tinitY2Scale,\n\tinitFlipAxis,\n\tinitZeroAxis,\n\tinitXMinStep,\n\tinitYMinStep,\n\tinitY2MinStep,\n\tinitXPadding,\n\tinitYPadding,\n\tinitY2Padding\n} from \"./scales\";\nimport { initHide } from \"./hide\";\nimport { initUpdate } from \"./update\";\n\n\nfunction initChartLayout(target, state) {\n\tstate = prepareState(state);\n\n\tvar instance = {};\n\tvar containers = getContainers(target);\n\tObject.defineProperty(instance, \"svg\", { get: containers.getSvg });\n\tinstance.container = containers.container;\n\tinstance.chart = addChart(instance);\n\n\tinstance.data_background = instance.chart.select(\"g.fl-data-background\");\n\tinstance.data_foreground = instance.chart.select(\"g.fl-data-foreground\");\n\n\tinstance.identifier = initIdentifier(instance);\n\tinstance.debug = initDebug(instance);\n\tinstance.debugColor = initDebugColor(instance);\n\tinstance.clip = initClip(instance);\n\tinstance.animationDuration = initAnimationDuration(instance);\n\n\tvar dimensions = initDimensions(instance);\n\tinstance.width = dimensions.width;\n\tinstance.height = dimensions.height;\n\tinstance.plotAspect = dimensions.plotAspect;\n\n\tObject.defineProperty(instance, \"plot_width\", { get: dimensions.plotWidth });\n\tObject.defineProperty(instance, \"plot_height\", { get: dimensions.plotHeight });\n\tObject.defineProperty(instance, \"x_left\", { get: dimensions.xLeft });\n\tObject.defineProperty(instance, \"x_right\", { get: dimensions.xRight });\n\tObject.defineProperty(instance, \"y_bottom\", { get: dimensions.yBottom });\n\tObject.defineProperty(instance, \"y_top\", { get: dimensions.yTop });\n\n\tinstance.offsetLeft = initOffsetLeft(instance);\n\tinstance.offsetTop = initOffsetTop(instance);\n\n\tinstance.margins = initMargins(instance, state);\n\n\tinstance.xData = initData(instance);\n\tinstance.yData = initData(instance);\n\tinstance.y2Data = initData(instance);\n\tinstance.xFormat = initFormat(instance);\n\tinstance.yFormat = initFormat(instance);\n\tinstance.y2Format = initFormat(instance);\n\tinstance.xNumberParse = initNumberParse(instance);\n\tinstance.yNumberParse = initNumberParse(instance);\n\tinstance.y2NumberParse = initNumberParse(instance);\n\tinstance.xDatetimeParse = initDatetimeParse(instance);\n\tinstance.yDatetimeParse = initDatetimeParse(instance);\n\tinstance.y2DatetimeParse = initDatetimeParse(instance);\n\tinstance.xTitle = initXTitle(instance, state); // Implicitly adds instance.xAutoTitle\n\tinstance.yTitle = initYTitle(instance, state); // Implicitly adds instance.yAutoTitle\n\tinstance.y2Title = initY2Title(instance, state); // Implicitly adds instance.y2AutoTitle\n\tinstance.xTicks = initXTicks(instance, state);\n\tinstance.yTicks = initYTicks(instance, state);\n\tinstance.y2Ticks = initY2Ticks(instance, state);\n\tinstance.xAutoTicks = initXAutoTicks(instance);\n\tinstance.yAutoTicks = initYAutoTicks(instance);\n\tinstance.y2AutoTicks = initY2AutoTicks(instance);\n\tinstance.xScale = initXScale(instance, state);\n\tinstance.yScale = initYScale(instance, state);\n\tinstance.y2Scale = initY2Scale(instance, state);\n\tinstance.xPadding = initXPadding(instance);\n\tinstance.yPadding = initYPadding(instance);\n\tinstance.y2Padding = initY2Padding(instance);\n\tinstance.xMinStep = initXMinStep(instance);\n\tinstance.yMinStep = initYMinStep(instance);\n\tinstance.y2MinStep = initY2MinStep(instance);\n\tinstance.xFlipAxis = initFlipAxis(instance);\n\tinstance.yFlipAxis = initFlipAxis(instance);\n\tinstance.y2FlipAxis = initFlipAxis(instance);\n\tinstance.xZeroAxis = initZeroAxis(instance);\n\tinstance.yZeroAxis = initZeroAxis(instance);\n\tinstance.y2ZeroAxis = initZeroAxis(instance);\n\tinstance.xHide = initHide(instance);\n\tinstance.yHide = initHide(instance);\n\tinstance.y2Hide = initHide(instance);\n\n\tinstance.y2Hide(true);\n\n\tinstance.update = initUpdate(instance, state);\n\n\treturn instance;\n}\n\n\nexport default initChartLayout;\n","import { addDebugRectangle } from \"./debug\";\nimport { addBackground } from \"./background\";\nimport { addGridlines } from \"./gridlines\";\nimport { addAxes } from \"./axes\";\n\n\nfunction addChart(instance) {\n\tvar chart = instance.container.append(\"g\").attr(\"class\", \"fl-chart\");\n\taddDebugRectangle(chart);\n\n\tchart.append(\"clipPath\").attr(\"class\", \"fl-data-clip-path\").append(\"rect\");\n\tchart.append(\"clipPath\").attr(\"class\", \"fl-grid-clip-path\").append(\"rect\");\n\taddBackground(chart);\n\tchart.append(\"g\").attr(\"class\", \"fl-data-background\");\n\taddGridlines(chart);\n\taddAxes(chart);\n\tchart.append(\"g\").attr(\"class\", \"fl-data-foreground\");\n\n\treturn chart;\n}\n\n\nexport { addChart };\n","function addDebugRectangle(chart) {\n\tchart.append(\"rect\")\n\t\t.attr(\"class\", \"fl-chart-debug-rectangle\")\n\t\t.attr(\"x\", 0)\n\t\t.attr(\"y\", 0)\n\t\t.style(\"stroke-width\", \"1px\")\n\t\t.style(\"fill\", \"none\")\n\t\t.style(\"display\", \"none\");\n}\n\nexport { addDebugRectangle };\n","function addBackground(chart) {\n\tvar background = chart.append(\"g\").attr(\"class\", \"fl-chart-background\");\n\tbackground.append(\"rect\").attr(\"class\", \"fl-chart-fill\");\n\tbackground.append(\"image\").attr(\"class\", \"fl-chart-image\");\n\tbackground.append(\"rect\").attr(\"class\", \"fl-chart-interaction\")\n\t\t.style(\"opacity\", 0);\n}\n\nexport { addBackground };\n","function addGridlines(chart) {\n\tvar gridlines_container = chart.append(\"g\").attr(\"class\", \"fl-gridlines\").style(\"pointer-events\", \"none\");\n\tgridlines_container.append(\"g\").attr(\"class\", \"fl-gridlines-vertical\");\n\tgridlines_container.append(\"g\").attr(\"class\", \"fl-gridlines-horizontal\");\n}\n\nexport { addGridlines };\n","function addAxes(chart) {\n\tvar axes_container = chart.append(\"g\").attr(\"class\", \"fl-axes\");\n\tvar x_axes = axes_container.append(\"g\").attr(\"class\", \"fl-x-axes\");\n\tvar y_axes = axes_container.append(\"g\").attr(\"class\", \"fl-y-axes\");\n\n\tvar bottom = x_axes.append(\"g\").attr(\"class\", \"fl-axis fl-x-axis fl-bottom-axis\");\n\tbottom.append(\"g\").attr(\"class\", \"fl-axis-line\");\n\tbottom.append(\"g\").attr(\"class\", \"fl-axis-ticks\");\n\tbottom.append(\"g\").attr(\"class\", \"fl-axis-title\");\n\n\tvar top = x_axes.append(\"g\").attr(\"class\", \"fl-axis fl-x-axis fl-top-axis\");\n\ttop.append(\"g\").attr(\"class\", \"fl-axis-line\");\n\ttop.append(\"g\").attr(\"class\", \"fl-axis-ticks\");\n\ttop.append(\"g\").attr(\"class\", \"fl-axis-title\");\n\n\tvar left = y_axes.append(\"g\").attr(\"class\", \"fl-axis fl-y-axis fl-left-axis\");\n\tleft.append(\"g\").attr(\"class\", \"fl-axis-line\");\n\tleft.append(\"g\").attr(\"class\", \"fl-axis-ticks\");\n\tleft.append(\"g\").attr(\"class\", \"fl-axis-title\");\n\n\tvar right = y_axes.append(\"g\").attr(\"class\", \"fl-axis fl-y-axis fl-right-axis\");\n\tright.append(\"g\").attr(\"class\", \"fl-axis-line\");\n\tright.append(\"g\").attr(\"class\", \"fl-axis-ticks\");\n\tright.append(\"g\").attr(\"class\", \"fl-axis-title\");\n}\n\n\nexport { addAxes };\n","function initDebug(instance) {\n\tlet debug = false;\n\n\treturn function(value) {\n\t\tif (value === undefined) return debug;\n\t\tdebug = !!value;\n\t\treturn instance;\n\t};\n}\n\n\nfunction initDebugColor(instance) {\n\tlet color = \"red\";\n\n\treturn function(value) {\n\t\tif (value === undefined) return color;\n\t\tcolor = value;\n\t\treturn instance;\n\t};\n}\n\n\nexport { initDebug, initDebugColor };\n","import \"d3-transition\";\n\nfunction initAnimationDuration(instance) {\n\tvar animation_duration = 0;\n\n\treturn function(value) {\n\t\tif (value === undefined) return animation_duration;\n\t\tanimation_duration = value;\n\t\treturn instance;\n\t};\n}\n\n\nexport { initAnimationDuration };\n","function initDimensions(instance) {\n\tvar dimensions = {};\n\tvar width = null;\n\tvar height = null;\n\tvar plot_aspect = null;\n\n\tdimensions.width = function(value) {\n\t\tif (value === undefined) {\n\t\t\tif (width !== null) return width;\n\t\t\treturn instance.svg.node().getBoundingClientRect().width;\n\t\t}\n\t\twidth = value;\n\t\treturn instance;\n\t};\n\n\tdimensions.height = function(value) {\n\t\tif (value === undefined) {\n\t\t\tif (height !== null) return height;\n\t\t\telse if (plot_aspect !== null) {\n\t\t\t\treturn dimensions.plotHeight() + instance.margins.top + instance.margins.bottom;\n\t\t\t}\n\t\t\treturn instance.svg.node().getBoundingClientRect().height;\n\t\t}\n\t\theight = value;\n\t\tplot_aspect = null;\n\t\treturn instance;\n\t};\n\n\tdimensions.plotAspect = function(value) {\n\t\tif (value === undefined) {\n\t\t\tif (plot_aspect !== null) return plot_aspect;\n\t\t\treturn dimensions.plotWidth() / dimensions.plotHeight();\n\t\t}\n\t\theight = null;\n\t\tplot_aspect = value;\n\t\treturn instance;\n\t};\n\n\tdimensions.plotWidth = function() {\n\t\treturn instance.width() - (instance.margins.right + instance.margins.left);\n\t};\n\n\tdimensions.plotHeight = function() {\n\t\tif (plot_aspect === null) {\n\t\t\treturn dimensions.height() - (instance.margins.top + instance.margins.bottom);\n\t\t}\n\t\treturn dimensions.plotWidth() / plot_aspect;\n\t};\n\n\tdimensions.xLeft = function() {\n\t\treturn instance.margins.left;\n\t};\n\n\tdimensions.xRight = function() {\n\t\treturn instance.width() - instance.margins.right;\n\t};\n\n\tdimensions.yBottom = function() {\n\t\treturn instance.height() - instance.margins.bottom;\n\t};\n\n\tdimensions.yTop = function() {\n\t\treturn instance.margins.top;\n\t};\n\n\treturn dimensions;\n}\n\n\nfunction initOffsetLeft(instance) {\n\tvar left_offset = 0;\n\n\treturn function(value) {\n\t\tif (value === undefined) return left_offset;\n\t\telse left_offset = value;\n\t\treturn instance;\n\t};\n}\n\n\nfunction initOffsetTop(instance) {\n\tvar top_offset = 0;\n\n\treturn function(value) {\n\t\tif (value === undefined) return top_offset;\n\t\telse top_offset = value;\n\t\treturn instance;\n\t};\n}\n\n\nexport { initDimensions, initOffsetLeft, initOffsetTop };\n","var DEFAULTS = Object.freeze({\n\tscale_type: \"categorical\",\n\n\tcategorical_type: \"palette\",\n\tcategorical_palette: [\"#1D6996\", \"#EDAD08\", \"#73AF48\", \"#94346E\", \"#38A6A5\", \"#E17C05\", \"#5F4690\", \"#0F8554\", \"#6F4070\", \"#CC503E\", \"#994E95\", \"#666666\"],\n\tcategorical_extend: true,\n\tcategorical_custom_palette: \"\",\n\n\tnumeric_type: \"sequential\",\n\n\tsequential_palette: \"Blues\",\n\tsequential_custom_min: \"#FFFFFF\",\n\tsequential_custom_max: \"#000000\",\n\tsequential_color_space: \"rgb\",\n\tsequential_reverse: false,\n\tsequential_custom_domain: false,\n\tsequential_domain_min: 0,\n\tsequential_domain_max: 1,\n\n\tdiverging_palette: \"RdBu\",\n\tdiverging_custom_min: \"#67001f\",\n\tdiverging_custom_mid: \"#f7f7f7\",\n\tdiverging_custom_max: \"#053061\",\n\tdiverging_color_space: \"rgb\",\n\tdiverging_reverse: false,\n\tdiverging_custom_domain: false,\n\tdiverging_domain_min: 0,\n\tdiverging_domain_mid: 0.5,\n\tdiverging_domain_max: 1,\n\n\tbinning: false,\n\tbin_count: 4,\n\tbin_mode: \"fixed\",\n\tbin_thresholds: \"\"\n});\n\n\nvar DEFAULT_FALLBACK_VALUE = null;\n\n\nexport { DEFAULTS, DEFAULT_FALLBACK_VALUE };\n","import { color as d3_color } from \"d3-color\";\n\nvar GOLDEN_RATIO = (1 + Math.sqrt(5)) / 2;\nvar DEFAULT_ANGLE = 360 / GOLDEN_RATIO;\nvar DEFAULT_COLOR = \"#FF0000\";\n\n\nfunction hueRotationGenerator(colorSpace, second_channel_name, third_channel_name) {\n\treturn function (init_colors, angle) {\n\t\tif (!Array.isArray(init_colors)) init_colors = init_colors ? [ init_colors ] : [ DEFAULT_COLOR ];\n\t\tangle = angle !== undefined ? angle : DEFAULT_ANGLE;\n\n\t\t// Convert colors to colorspace of choice\n\t\tvar palette = init_colors.map(function(col) { return colorSpace(col); })\n\t\t\t.filter(function(col) { return !isNaN(col[second_channel_name]) && !isNaN(col[third_channel_name]); });\n\n\t\tif (!palette.length) palette = [colorSpace(DEFAULT_COLOR)];\n\t\tvar n = palette.length;\n\n\t\t// Get average values of second and third channels\n\t\tvar second_channel = palette.reduce(function(a, col) { return (a + col[second_channel_name]); }, 0) / n;\n\t\tvar third_channel = palette.reduce(function(a, col) { return a + col[third_channel_name]; }, 0) / n;\n\n\t\tvar counter = n;\n\t\tvar h_init;\n\t\tdo h_init = palette[--counter].h; // Try to base initial hue on last color that isn't grey\n\t\twhile (isNaN(h_init) && counter > 0); // Grey hue is NaN\n\n\t\tvar i = 0;\n\n\t\treturn function nextColor() {\n\t\t\tvar rotation = ++i * angle;\n\t\t\tvar h = (h_init + rotation) % 360;\n\t\t\treturn d3_color(colorSpace(h, second_channel, third_channel)).hex();\n\t\t};\n\t};\n}\n\n\nexport { hueRotationGenerator };\n","import { hcl } from \"d3-color\";\nimport { hueRotationGenerator } from \"./generate\";\n\nvar hclGenerator = hueRotationGenerator(hcl, \"c\", \"l\");\n\nexport { hclGenerator };\n","import { set as d3_set } from \"d3-collection\";\nimport { hclGenerator, hslGenerator } from \"@flourish/color-generator\";\nimport { DEFAULTS } from \"../defaults\";\n\nvar color_generators = {\n\thcl: hclGenerator,\n\thsl: hslGenerator\n};\n\n\nfunction getCategoricalFunction(state, domain) {\n\tvar lookup = {};\n\n\tvar unique_domain = d3_set(domain).values();\n\tvar palette = state.categorical_palette;\n\tvar n = palette.length;\n\n\tif (state.categorical_extend) {\n\t\tvar angle = DEFAULTS.rotation_angle;\n\t\tvar generator_name = \"hcl\";\n\t\tvar colorGenerator = color_generators[generator_name](palette, angle);\n\t\tunique_domain.forEach(function(label, i) {\n\t\t\tif (i < n) lookup[label] = palette[i];\n\t\t\telse lookup[label] = colorGenerator();\n\t\t});\n\t}\n\telse {\n\t\tunique_domain.forEach(function(label, i) {\n\t\t\tlookup[label] = palette[i % n];\n\t\t});\n\t}\n\n\tstate.categorical_custom_palette.split(\"\\n\")\n\t\t.filter(function(str) { return str; }) // remove empty lines\n\t\t.forEach(function(str) {\n\t\t\tvar index = str.lastIndexOf(\":\");\n\t\t\tif (index === -1) return;\n\t\t\tvar label = str.slice(0, index).trim();\n\t\t\tvar col = str.slice(index + 1).trim();\n\t\t\tif (label && col) lookup[label] = col;\n\t\t});\n\n\tvar colorScale =  function(value) {\n\t\treturn lookup[value];\n\t};\n\n\tcolorScale.domain = unique_domain.slice();\n\tcolorScale.colors = unique_domain.map(function(d) { return lookup[d]; });\n\tcolorScale.items = unique_domain.map(function(d) { return { label: d, color: lookup[d] }; });\n\n\treturn colorScale;\n}\n\n\nexport { getCategoricalFunction };\n","import { hsl } from \"d3-color\";\nimport { hueRotationGenerator } from \"./generate\";\n\nvar hslGenerator = hueRotationGenerator(hsl, \"s\", \"l\");\n\nexport { hslGenerator };\n","export default function(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","import ascending from \"./ascending\";\nimport bisector from \"./bisector\";\n\nvar ascendingBisect = bisector(ascending);\nexport var bisectRight = ascendingBisect.right;\nexport var bisectLeft = ascendingBisect.left;\nexport default bisectRight;\n","import ascending from \"./ascending\";\n\nexport default function(compare) {\n  if (compare.length === 1) compare = ascendingComparator(compare);\n  return {\n    left: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) < 0) lo = mid + 1;\n        else hi = mid;\n      }\n      return lo;\n    },\n    right: function(a, x, lo, hi) {\n      if (lo == null) lo = 0;\n      if (hi == null) hi = a.length;\n      while (lo < hi) {\n        var mid = lo + hi >>> 1;\n        if (compare(a[mid], x) > 0) hi = mid;\n        else lo = mid + 1;\n      }\n      return lo;\n    }\n  };\n}\n\nfunction ascendingComparator(f) {\n  return function(d, x) {\n    return ascending(f(d), x);\n  };\n}\n","export default function(x) {\n  return x === null ? NaN : +x;\n}\n","var e10 = Math.sqrt(50),\n    e5 = Math.sqrt(10),\n    e2 = Math.sqrt(2);\n\nexport default function(start, stop, count) {\n  var reverse,\n      i = -1,\n      n,\n      ticks,\n      step;\n\n  stop = +stop, start = +start, count = +count;\n  if (start === stop && count > 0) return [start];\n  if (reverse = stop < start) n = start, start = stop, stop = n;\n  if ((step = tickIncrement(start, stop, count)) === 0 || !isFinite(step)) return [];\n\n  if (step > 0) {\n    start = Math.ceil(start / step);\n    stop = Math.floor(stop / step);\n    ticks = new Array(n = Math.ceil(stop - start + 1));\n    while (++i < n) ticks[i] = (start + i) * step;\n  } else {\n    start = Math.floor(start * step);\n    stop = Math.ceil(stop * step);\n    ticks = new Array(n = Math.ceil(start - stop + 1));\n    while (++i < n) ticks[i] = (start - i) / step;\n  }\n\n  if (reverse) ticks.reverse();\n\n  return ticks;\n}\n\nexport function tickIncrement(start, stop, count) {\n  var step = (stop - start) / Math.max(0, count),\n      power = Math.floor(Math.log(step) / Math.LN10),\n      error = step / Math.pow(10, power);\n  return power >= 0\n      ? (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1) * Math.pow(10, power)\n      : -Math.pow(10, -power) / (error >= e10 ? 10 : error >= e5 ? 5 : error >= e2 ? 2 : 1);\n}\n\nexport function tickStep(start, stop, count) {\n  var step0 = Math.abs(stop - start) / Math.max(0, count),\n      step1 = Math.pow(10, Math.floor(Math.log(step0) / Math.LN10)),\n      error = step0 / step1;\n  if (error >= e10) step1 *= 10;\n  else if (error >= e5) step1 *= 5;\n  else if (error >= e2) step1 *= 2;\n  return stop < start ? -step1 : step1;\n}\n","import number from \"./number\";\n\nexport default function(values, p, valueof) {\n  if (valueof == null) valueof = number;\n  if (!(n = values.length)) return;\n  if ((p = +p) <= 0 || n < 2) return +valueof(values[0], 0, values);\n  if (p >= 1) return +valueof(values[n - 1], n - 1, values);\n  var n,\n      i = (n - 1) * p,\n      i0 = Math.floor(i),\n      value0 = +valueof(values[i0], i0, values),\n      value1 = +valueof(values[i0 + 1], i0 + 1, values);\n  return value0 + (value1 - value0) * (i - i0);\n}\n","export function initRange(domain, range) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.range(domain); break;\n    default: this.range(range).domain(domain); break;\n  }\n  return this;\n}\n\nexport function initInterpolator(domain, interpolator) {\n  switch (arguments.length) {\n    case 0: break;\n    case 1: this.interpolator(domain); break;\n    default: this.interpolator(interpolator).domain(domain); break;\n  }\n  return this;\n}\n","var array = Array.prototype;\n\nexport var map = array.map;\nexport var slice = array.slice;\n","import {bisect} from \"d3-array\";\nimport {interpolate as interpolateValue, interpolateNumber, interpolateRound} from \"d3-interpolate\";\nimport {map, slice} from \"./array\";\nimport constant from \"./constant\";\nimport number from \"./number\";\n\nvar unit = [0, 1];\n\nexport function identity(x) {\n  return x;\n}\n\nfunction normalize(a, b) {\n  return (b -= (a = +a))\n      ? function(x) { return (x - a) / b; }\n      : constant(isNaN(b) ? NaN : 0.5);\n}\n\nfunction clamper(domain) {\n  var a = domain[0], b = domain[domain.length - 1], t;\n  if (a > b) t = a, a = b, b = t;\n  return function(x) { return Math.max(a, Math.min(b, x)); };\n}\n\n// normalize(a, b)(x) takes a domain value x in [a,b] and returns the corresponding parameter t in [0,1].\n// interpolate(a, b)(t) takes a parameter t in [0,1] and returns the corresponding range value x in [a,b].\nfunction bimap(domain, range, interpolate) {\n  var d0 = domain[0], d1 = domain[1], r0 = range[0], r1 = range[1];\n  if (d1 < d0) d0 = normalize(d1, d0), r0 = interpolate(r1, r0);\n  else d0 = normalize(d0, d1), r0 = interpolate(r0, r1);\n  return function(x) { return r0(d0(x)); };\n}\n\nfunction polymap(domain, range, interpolate) {\n  var j = Math.min(domain.length, range.length) - 1,\n      d = new Array(j),\n      r = new Array(j),\n      i = -1;\n\n  // Reverse descending domains.\n  if (domain[j] < domain[0]) {\n    domain = domain.slice().reverse();\n    range = range.slice().reverse();\n  }\n\n  while (++i < j) {\n    d[i] = normalize(domain[i], domain[i + 1]);\n    r[i] = interpolate(range[i], range[i + 1]);\n  }\n\n  return function(x) {\n    var i = bisect(domain, x, 1, j) - 1;\n    return r[i](d[i](x));\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .range(source.range())\n      .interpolate(source.interpolate())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport function transformer() {\n  var domain = unit,\n      range = unit,\n      interpolate = interpolateValue,\n      transform,\n      untransform,\n      unknown,\n      clamp = identity,\n      piecewise,\n      output,\n      input;\n\n  function rescale() {\n    piecewise = Math.min(domain.length, range.length) > 2 ? polymap : bimap;\n    output = input = null;\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (output || (output = piecewise(domain.map(transform), range, interpolate)))(transform(clamp(x)));\n  }\n\n  scale.invert = function(y) {\n    return clamp(untransform((input || (input = piecewise(range, domain.map(transform), interpolateNumber)))(y)));\n  };\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = map.call(_, number), clamp === identity || (clamp = clamper(domain)), rescale()) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.rangeRound = function(_) {\n    return range = slice.call(_), interpolate = interpolateRound, rescale();\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = _ ? clamper(domain) : identity, scale) : clamp !== identity;\n  };\n\n  scale.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, rescale()) : interpolate;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t, u) {\n    transform = t, untransform = u;\n    return rescale();\n  };\n}\n\nexport default function continuous(transform, untransform) {\n  return transformer()(transform, untransform);\n}\n","export default function(x) {\n  return Math.abs(x = Math.round(x)) >= 1e21\n      ? x.toLocaleString(\"en\").replace(/,/g, \"\")\n      : x.toString(10);\n}\n\n// Computes the decimal coefficient and exponent of the specified number x with\n// significant digits p, where x is positive and p is in [1, 21] or undefined.\n// For example, formatDecimalParts(1.23) returns [\"123\", 0].\nexport function formatDecimalParts(x, p) {\n  if ((i = (x = p ? x.toExponential(p - 1) : x.toExponential()).indexOf(\"e\")) < 0) return null; // NaN, ±Infinity\n  var i, coefficient = x.slice(0, i);\n\n  // The string returned by toExponential either has the form \\d\\.\\d+e[-+]\\d+\n  // (e.g., 1.2e+3) or the form \\de[-+]\\d+ (e.g., 1e+3).\n  return [\n    coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,\n    +x.slice(i + 1)\n  ];\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x) {\n  return x = formatDecimalParts(Math.abs(x)), x ? x[1] : NaN;\n}\n","// [[fill]align][sign][symbol][0][width][,][.precision][~][type]\nvar re = /^(?:(.)?([<>=^]))?([+\\-( ])?([$#])?(0)?(\\d+)?(,)?(\\.\\d+)?(~)?([a-z%])?$/i;\n\nexport default function formatSpecifier(specifier) {\n  if (!(match = re.exec(specifier))) throw new Error(\"invalid format: \" + specifier);\n  var match;\n  return new FormatSpecifier({\n    fill: match[1],\n    align: match[2],\n    sign: match[3],\n    symbol: match[4],\n    zero: match[5],\n    width: match[6],\n    comma: match[7],\n    precision: match[8] && match[8].slice(1),\n    trim: match[9],\n    type: match[10]\n  });\n}\n\nformatSpecifier.prototype = FormatSpecifier.prototype; // instanceof\n\nexport function FormatSpecifier(specifier) {\n  this.fill = specifier.fill === undefined ? \" \" : specifier.fill + \"\";\n  this.align = specifier.align === undefined ? \">\" : specifier.align + \"\";\n  this.sign = specifier.sign === undefined ? \"-\" : specifier.sign + \"\";\n  this.symbol = specifier.symbol === undefined ? \"\" : specifier.symbol + \"\";\n  this.zero = !!specifier.zero;\n  this.width = specifier.width === undefined ? undefined : +specifier.width;\n  this.comma = !!specifier.comma;\n  this.precision = specifier.precision === undefined ? undefined : +specifier.precision;\n  this.trim = !!specifier.trim;\n  this.type = specifier.type === undefined ? \"\" : specifier.type + \"\";\n}\n\nFormatSpecifier.prototype.toString = function() {\n  return this.fill\n      + this.align\n      + this.sign\n      + this.symbol\n      + (this.zero ? \"0\" : \"\")\n      + (this.width === undefined ? \"\" : Math.max(1, this.width | 0))\n      + (this.comma ? \",\" : \"\")\n      + (this.precision === undefined ? \"\" : \".\" + Math.max(0, this.precision | 0))\n      + (this.trim ? \"~\" : \"\")\n      + this.type;\n};\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport var prefixExponent;\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1],\n      i = exponent - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent / 3))) * 3) + 1,\n      n = coefficient.length;\n  return i === n ? coefficient\n      : i > n ? coefficient + new Array(i - n + 1).join(\"0\")\n      : i > 0 ? coefficient.slice(0, i) + \".\" + coefficient.slice(i)\n      : \"0.\" + new Array(1 - i).join(\"0\") + formatDecimalParts(x, Math.max(0, p + i - 1))[0]; // less than 1y!\n}\n","import {formatDecimalParts} from \"./formatDecimal.js\";\n\nexport default function(x, p) {\n  var d = formatDecimalParts(x, p);\n  if (!d) return x + \"\";\n  var coefficient = d[0],\n      exponent = d[1];\n  return exponent < 0 ? \"0.\" + new Array(-exponent).join(\"0\") + coefficient\n      : coefficient.length > exponent + 1 ? coefficient.slice(0, exponent + 1) + \".\" + coefficient.slice(exponent + 1)\n      : coefficient + new Array(exponent - coefficient.length + 2).join(\"0\");\n}\n","import formatDecimal from \"./formatDecimal.js\";\nimport formatPrefixAuto from \"./formatPrefixAuto.js\";\nimport formatRounded from \"./formatRounded.js\";\n\nexport default {\n  \"%\": function(x, p) { return (x * 100).toFixed(p); },\n  \"b\": function(x) { return Math.round(x).toString(2); },\n  \"c\": function(x) { return x + \"\"; },\n  \"d\": formatDecimal,\n  \"e\": function(x, p) { return x.toExponential(p); },\n  \"f\": function(x, p) { return x.toFixed(p); },\n  \"g\": function(x, p) { return x.toPrecision(p); },\n  \"o\": function(x) { return Math.round(x).toString(8); },\n  \"p\": function(x, p) { return formatRounded(x * 100, p); },\n  \"r\": formatRounded,\n  \"s\": formatPrefixAuto,\n  \"X\": function(x) { return Math.round(x).toString(16).toUpperCase(); },\n  \"x\": function(x) { return Math.round(x).toString(16); }\n};\n","export default function(x) {\n  return x;\n}\n","import exponent from \"./exponent.js\";\nimport formatGroup from \"./formatGroup.js\";\nimport formatNumerals from \"./formatNumerals.js\";\nimport formatSpecifier from \"./formatSpecifier.js\";\nimport formatTrim from \"./formatTrim.js\";\nimport formatTypes from \"./formatTypes.js\";\nimport {prefixExponent} from \"./formatPrefixAuto.js\";\nimport identity from \"./identity.js\";\n\nvar map = Array.prototype.map,\n    prefixes = [\"y\",\"z\",\"a\",\"f\",\"p\",\"n\",\"µ\",\"m\",\"\",\"k\",\"M\",\"G\",\"T\",\"P\",\"E\",\"Z\",\"Y\"];\n\nexport default function(locale) {\n  var group = locale.grouping === undefined || locale.thousands === undefined ? identity : formatGroup(map.call(locale.grouping, Number), locale.thousands + \"\"),\n      currencyPrefix = locale.currency === undefined ? \"\" : locale.currency[0] + \"\",\n      currencySuffix = locale.currency === undefined ? \"\" : locale.currency[1] + \"\",\n      decimal = locale.decimal === undefined ? \".\" : locale.decimal + \"\",\n      numerals = locale.numerals === undefined ? identity : formatNumerals(map.call(locale.numerals, String)),\n      percent = locale.percent === undefined ? \"%\" : locale.percent + \"\",\n      minus = locale.minus === undefined ? \"-\" : locale.minus + \"\",\n      nan = locale.nan === undefined ? \"NaN\" : locale.nan + \"\";\n\n  function newFormat(specifier) {\n    specifier = formatSpecifier(specifier);\n\n    var fill = specifier.fill,\n        align = specifier.align,\n        sign = specifier.sign,\n        symbol = specifier.symbol,\n        zero = specifier.zero,\n        width = specifier.width,\n        comma = specifier.comma,\n        precision = specifier.precision,\n        trim = specifier.trim,\n        type = specifier.type;\n\n    // The \"n\" type is an alias for \",g\".\n    if (type === \"n\") comma = true, type = \"g\";\n\n    // The \"\" type, and any invalid type, is an alias for \".12~g\".\n    else if (!formatTypes[type]) precision === undefined && (precision = 12), trim = true, type = \"g\";\n\n    // If zero fill is specified, padding goes after sign and before digits.\n    if (zero || (fill === \"0\" && align === \"=\")) zero = true, fill = \"0\", align = \"=\";\n\n    // Compute the prefix and suffix.\n    // For SI-prefix, the suffix is lazily computed.\n    var prefix = symbol === \"$\" ? currencyPrefix : symbol === \"#\" && /[boxX]/.test(type) ? \"0\" + type.toLowerCase() : \"\",\n        suffix = symbol === \"$\" ? currencySuffix : /[%p]/.test(type) ? percent : \"\";\n\n    // What format function should we use?\n    // Is this an integer type?\n    // Can this type generate exponential notation?\n    var formatType = formatTypes[type],\n        maybeSuffix = /[defgprs%]/.test(type);\n\n    // Set the default precision if not specified,\n    // or clamp the specified precision to the supported range.\n    // For significant precision, it must be in [1, 21].\n    // For fixed precision, it must be in [0, 20].\n    precision = precision === undefined ? 6\n        : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision))\n        : Math.max(0, Math.min(20, precision));\n\n    function format(value) {\n      var valuePrefix = prefix,\n          valueSuffix = suffix,\n          i, n, c;\n\n      if (type === \"c\") {\n        valueSuffix = formatType(value) + valueSuffix;\n        value = \"\";\n      } else {\n        value = +value;\n\n        // Determine the sign. -0 is not less than 0, but 1 / -0 is!\n        var valueNegative = value < 0 || 1 / value < 0;\n\n        // Perform the initial formatting.\n        value = isNaN(value) ? nan : formatType(Math.abs(value), precision);\n\n        // Trim insignificant zeros.\n        if (trim) value = formatTrim(value);\n\n        // If a negative value rounds to zero after formatting, and no explicit positive sign is requested, hide the sign.\n        if (valueNegative && +value === 0 && sign !== \"+\") valueNegative = false;\n\n        // Compute the prefix and suffix.\n        valuePrefix = (valueNegative ? (sign === \"(\" ? sign : minus) : sign === \"-\" || sign === \"(\" ? \"\" : sign) + valuePrefix;\n        valueSuffix = (type === \"s\" ? prefixes[8 + prefixExponent / 3] : \"\") + valueSuffix + (valueNegative && sign === \"(\" ? \")\" : \"\");\n\n        // Break the formatted value into the integer “value” part that can be\n        // grouped, and fractional or exponential “suffix” part that is not.\n        if (maybeSuffix) {\n          i = -1, n = value.length;\n          while (++i < n) {\n            if (c = value.charCodeAt(i), 48 > c || c > 57) {\n              valueSuffix = (c === 46 ? decimal + value.slice(i + 1) : value.slice(i)) + valueSuffix;\n              value = value.slice(0, i);\n              break;\n            }\n          }\n        }\n      }\n\n      // If the fill character is not \"0\", grouping is applied before padding.\n      if (comma && !zero) value = group(value, Infinity);\n\n      // Compute the padding.\n      var length = valuePrefix.length + value.length + valueSuffix.length,\n          padding = length < width ? new Array(width - length + 1).join(fill) : \"\";\n\n      // If the fill character is \"0\", grouping is applied after padding.\n      if (comma && zero) value = group(padding + value, padding.length ? width - valueSuffix.length : Infinity), padding = \"\";\n\n      // Reconstruct the final output based on the desired alignment.\n      switch (align) {\n        case \"<\": value = valuePrefix + value + valueSuffix + padding; break;\n        case \"=\": value = valuePrefix + padding + value + valueSuffix; break;\n        case \"^\": value = padding.slice(0, length = padding.length >> 1) + valuePrefix + value + valueSuffix + padding.slice(length); break;\n        default: value = padding + valuePrefix + value + valueSuffix; break;\n      }\n\n      return numerals(value);\n    }\n\n    format.toString = function() {\n      return specifier + \"\";\n    };\n\n    return format;\n  }\n\n  function formatPrefix(specifier, value) {\n    var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = \"f\", specifier)),\n        e = Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3,\n        k = Math.pow(10, -e),\n        prefix = prefixes[8 + e / 3];\n    return function(value) {\n      return f(k * value) + prefix;\n    };\n  }\n\n  return {\n    format: newFormat,\n    formatPrefix: formatPrefix\n  };\n}\n","import formatLocale from \"./locale.js\";\n\nvar locale;\nexport var format;\nexport var formatPrefix;\n\ndefaultLocale({\n  decimal: \".\",\n  thousands: \",\",\n  grouping: [3],\n  currency: [\"$\", \"\"],\n  minus: \"-\"\n});\n\nexport default function defaultLocale(definition) {\n  locale = formatLocale(definition);\n  format = locale.format;\n  formatPrefix = locale.formatPrefix;\n  return locale;\n}\n","export default function(grouping, thousands) {\n  return function(value, width) {\n    var i = value.length,\n        t = [],\n        j = 0,\n        g = grouping[0],\n        length = 0;\n\n    while (i > 0 && g > 0) {\n      if (length + g + 1 > width) g = Math.max(1, width - length);\n      t.push(value.substring(i -= g, i + g));\n      if ((length += g + 1) > width) break;\n      g = grouping[j = (j + 1) % grouping.length];\n    }\n\n    return t.reverse().join(thousands);\n  };\n}\n","export default function(numerals) {\n  return function(value) {\n    return value.replace(/[0-9]/g, function(i) {\n      return numerals[+i];\n    });\n  };\n}\n","// Trims insignificant zeros, e.g., replaces 1.2000k with 1.2k.\nexport default function(s) {\n  out: for (var n = s.length, i = 1, i0 = -1, i1; i < n; ++i) {\n    switch (s[i]) {\n      case \".\": i0 = i1 = i; break;\n      case \"0\": if (i0 === 0) i0 = i; i1 = i; break;\n      default: if (!+s[i]) break out; if (i0 > 0) i0 = 0; break;\n    }\n  }\n  return i0 > 0 ? s.slice(0, i0) + s.slice(i1 + 1) : s;\n}\n","import {tickStep} from \"d3-array\";\nimport {format, formatPrefix, formatSpecifier, precisionFixed, precisionPrefix, precisionRound} from \"d3-format\";\n\nexport default function(start, stop, count, specifier) {\n  var step = tickStep(start, stop, count),\n      precision;\n  specifier = formatSpecifier(specifier == null ? \",f\" : specifier);\n  switch (specifier.type) {\n    case \"s\": {\n      var value = Math.max(Math.abs(start), Math.abs(stop));\n      if (specifier.precision == null && !isNaN(precision = precisionPrefix(step, value))) specifier.precision = precision;\n      return formatPrefix(specifier, value);\n    }\n    case \"\":\n    case \"e\":\n    case \"g\":\n    case \"p\":\n    case \"r\": {\n      if (specifier.precision == null && !isNaN(precision = precisionRound(step, Math.max(Math.abs(start), Math.abs(stop))))) specifier.precision = precision - (specifier.type === \"e\");\n      break;\n    }\n    case \"f\":\n    case \"%\": {\n      if (specifier.precision == null && !isNaN(precision = precisionFixed(step))) specifier.precision = precision - (specifier.type === \"%\") * 2;\n      break;\n    }\n  }\n  return format(specifier);\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, value) {\n  return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent(value) / 3))) * 3 - exponent(Math.abs(step)));\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step, max) {\n  step = Math.abs(step), max = Math.abs(max) - step;\n  return Math.max(0, exponent(max) - exponent(step)) + 1;\n}\n","import exponent from \"./exponent.js\";\n\nexport default function(step) {\n  return Math.max(0, -exponent(Math.abs(step)));\n}\n","import {ticks, tickIncrement} from \"d3-array\";\nimport continuous, {copy, identity} from \"./continuous\";\nimport {initRange} from \"./init\";\nimport tickFormat from \"./tickFormat\";\n\nexport function linearish(scale) {\n  var domain = scale.domain;\n\n  scale.ticks = function(count) {\n    var d = domain();\n    return ticks(d[0], d[d.length - 1], count == null ? 10 : count);\n  };\n\n  scale.tickFormat = function(count, specifier) {\n    var d = domain();\n    return tickFormat(d[0], d[d.length - 1], count == null ? 10 : count, specifier);\n  };\n\n  scale.nice = function(count) {\n    if (count == null) count = 10;\n\n    var d = domain(),\n        i0 = 0,\n        i1 = d.length - 1,\n        start = d[i0],\n        stop = d[i1],\n        step;\n\n    if (stop < start) {\n      step = start, start = stop, stop = step;\n      step = i0, i0 = i1, i1 = step;\n    }\n\n    step = tickIncrement(start, stop, count);\n\n    if (step > 0) {\n      start = Math.floor(start / step) * step;\n      stop = Math.ceil(stop / step) * step;\n      step = tickIncrement(start, stop, count);\n    } else if (step < 0) {\n      start = Math.ceil(start * step) / step;\n      stop = Math.floor(stop * step) / step;\n      step = tickIncrement(start, stop, count);\n    }\n\n    if (step > 0) {\n      d[i0] = Math.floor(start / step) * step;\n      d[i1] = Math.ceil(stop / step) * step;\n      domain(d);\n    } else if (step < 0) {\n      d[i0] = Math.ceil(start * step) / step;\n      d[i1] = Math.floor(stop * step) / step;\n      domain(d);\n    }\n\n    return scale;\n  };\n\n  return scale;\n}\n\nexport default function linear() {\n  var scale = continuous(identity, identity);\n\n  scale.copy = function() {\n    return copy(scale, linear());\n  };\n\n  initRange.apply(scale, arguments);\n\n  return linearish(scale);\n}\n","import {ascending, bisect, quantile as threshold} from \"d3-array\";\nimport {slice} from \"./array\";\nimport {initRange} from \"./init\";\n\nexport default function quantile() {\n  var domain = [],\n      range = [],\n      thresholds = [],\n      unknown;\n\n  function rescale() {\n    var i = 0, n = Math.max(1, range.length);\n    thresholds = new Array(n - 1);\n    while (++i < n) thresholds[i - 1] = threshold(domain, i / n);\n    return scale;\n  }\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : range[bisect(thresholds, x)];\n  }\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN] : [\n      i > 0 ? thresholds[i - 1] : domain[0],\n      i < thresholds.length ? thresholds[i] : domain[domain.length - 1]\n    ];\n  };\n\n  scale.domain = function(_) {\n    if (!arguments.length) return domain.slice();\n    domain = [];\n    for (var i = 0, n = _.length, d; i < n; ++i) if (d = _[i], d != null && !isNaN(d = +d)) domain.push(d);\n    domain.sort(ascending);\n    return rescale();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), rescale()) : range.slice();\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.quantiles = function() {\n    return thresholds.slice();\n  };\n\n  scale.copy = function() {\n    return quantile()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\nimport {linearish} from \"./linear\";\nimport {initRange} from \"./init\";\n\nexport default function quantize() {\n  var x0 = 0,\n      x1 = 1,\n      n = 1,\n      domain = [0.5],\n      range = [0, 1],\n      unknown;\n\n  function scale(x) {\n    return x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  function rescale() {\n    var i = -1;\n    domain = new Array(n);\n    while (++i < n) domain[i] = ((i + 1) * x1 - (i - n) * x0) / (n + 1);\n    return scale;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (x0 = +_[0], x1 = +_[1], rescale()) : [x0, x1];\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (n = (range = slice.call(_)).length - 1, rescale()) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return i < 0 ? [NaN, NaN]\n        : i < 1 ? [x0, domain[0]]\n        : i >= n ? [domain[n - 1], x1]\n        : [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : scale;\n  };\n\n  scale.thresholds = function() {\n    return domain.slice();\n  };\n\n  scale.copy = function() {\n    return quantize()\n        .domain([x0, x1])\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(linearish(scale), arguments);\n}\n","import {bisect} from \"d3-array\";\nimport {slice} from \"./array\";\nimport {initRange} from \"./init\";\n\nexport default function threshold() {\n  var domain = [0.5],\n      range = [0, 1],\n      unknown,\n      n = 1;\n\n  function scale(x) {\n    return x <= x ? range[bisect(domain, x, 0, n)] : unknown;\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (domain = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : domain.slice();\n  };\n\n  scale.range = function(_) {\n    return arguments.length ? (range = slice.call(_), n = Math.min(domain.length, range.length - 1), scale) : range.slice();\n  };\n\n  scale.invertExtent = function(y) {\n    var i = range.indexOf(y);\n    return [domain[i - 1], domain[i]];\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  scale.copy = function() {\n    return threshold()\n        .domain(domain)\n        .range(range)\n        .unknown(unknown);\n  };\n\n  return initRange.apply(scale, arguments);\n}\n","import {identity} from \"./continuous\";\nimport {initInterpolator} from \"./init\";\nimport {linearish} from \"./linear\";\nimport {loggish} from \"./log\";\nimport {symlogish} from \"./symlog\";\nimport {powish} from \"./pow\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 1,\n      t0,\n      t1,\n      k10,\n      transform,\n      interpolator = identity,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : interpolator(k10 === 0 ? 0.5 : (x = (transform(x) - t0) * k10, clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (t0 = transform(x0 = +_[0]), t1 = transform(x1 = +_[1]), k10 = t0 === t1 ? 0 : 1 / (t1 - t0), scale) : [x0, x1];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), k10 = t0 === t1 ? 0 : 1 / (t1 - t0);\n    return scale;\n  };\n}\n\nexport function copy(source, target) {\n  return target\n      .domain(source.domain())\n      .interpolator(source.interpolator())\n      .clamp(source.clamp())\n      .unknown(source.unknown());\n}\n\nexport default function sequential() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, sequential());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialLog() {\n  var scale = loggish(transformer()).domain([1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, sequentialLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, sequentialPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function sequentialSqrt() {\n  return sequentialPow.apply(null, arguments).exponent(0.5);\n}\n","import {identity} from \"./continuous\";\nimport {initInterpolator} from \"./init\";\nimport {linearish} from \"./linear\";\nimport {loggish} from \"./log\";\nimport {copy} from \"./sequential\";\nimport {symlogish} from \"./symlog\";\nimport {powish} from \"./pow\";\n\nfunction transformer() {\n  var x0 = 0,\n      x1 = 0.5,\n      x2 = 1,\n      t0,\n      t1,\n      t2,\n      k10,\n      k21,\n      interpolator = identity,\n      transform,\n      clamp = false,\n      unknown;\n\n  function scale(x) {\n    return isNaN(x = +x) ? unknown : (x = 0.5 + ((x = +transform(x)) - t1) * (x < t1 ? k10 : k21), interpolator(clamp ? Math.max(0, Math.min(1, x)) : x));\n  }\n\n  scale.domain = function(_) {\n    return arguments.length ? (t0 = transform(x0 = +_[0]), t1 = transform(x1 = +_[1]), t2 = transform(x2 = +_[2]), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1), scale) : [x0, x1, x2];\n  };\n\n  scale.clamp = function(_) {\n    return arguments.length ? (clamp = !!_, scale) : clamp;\n  };\n\n  scale.interpolator = function(_) {\n    return arguments.length ? (interpolator = _, scale) : interpolator;\n  };\n\n  scale.unknown = function(_) {\n    return arguments.length ? (unknown = _, scale) : unknown;\n  };\n\n  return function(t) {\n    transform = t, t0 = t(x0), t1 = t(x1), t2 = t(x2), k10 = t0 === t1 ? 0 : 0.5 / (t1 - t0), k21 = t1 === t2 ? 0 : 0.5 / (t2 - t1);\n    return scale;\n  };\n}\n\nexport default function diverging() {\n  var scale = linearish(transformer()(identity));\n\n  scale.copy = function() {\n    return copy(scale, diverging());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingLog() {\n  var scale = loggish(transformer()).domain([0.1, 1, 10]);\n\n  scale.copy = function() {\n    return copy(scale, divergingLog()).base(scale.base());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSymlog() {\n  var scale = symlogish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingSymlog()).constant(scale.constant());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingPow() {\n  var scale = powish(transformer());\n\n  scale.copy = function() {\n    return copy(scale, divergingPow()).exponent(scale.exponent());\n  };\n\n  return initInterpolator.apply(scale, arguments);\n}\n\nexport function divergingSqrt() {\n  return divergingPow.apply(null, arguments).exponent(0.5);\n}\n","import { scaleQuantize, scaleQuantile, scaleThreshold } from \"d3-scale\";\n\nexport function binnedScale(state, domain, values, interpolator) {\n\tvar domain_min = domain[0];\n\tvar domain_max = domain[domain.length - 1];\n\tvar centers = [], thresholds, n;\n\n\tif (state.bin_mode == \"custom\") {\n\t\tthresholds = state.bin_thresholds\n\t\t\t.split(\";\")\n\t\t\t.map(parseFloat)\n\t\t\t.filter(function (val) {\n\t\t\t\tif (isNaN(val)) return false;\n\t\t\t\treturn val > domain_min && val < domain_max;\n\t\t\t})\n\t\t\t.sort(ascendingSort);\n\t\tn = thresholds.length + 1;\n\t}\n\telse {\n\t\tn = Math.floor(state.bin_count);\n\t\tthresholds = [];\n\t}\n\n\tvar palette = interpolatePalette(interpolator, n, domain);\n\tvar scale;\n\tif (state.bin_mode == \"fixed\") scale = scaleQuantize().domain([domain_min, domain_max]);\n\telse if (state.bin_mode == \"quantile\") scale = scaleQuantile().domain(values);\n\telse scale = scaleThreshold().domain(thresholds);\n\tscale.range(palette.colors);\n\n\tif (!thresholds.length) {\n\t\tpalette.colors.forEach(function (color, i) {\n\t\t\tif (i) thresholds.push(scale.invertExtent(color)[0]);\n\t\t});\n\t}\n\n\tthresholds.forEach(function (threshold, i) {\n\t\tif (i < (thresholds.length - 1)) centers.push((thresholds[i + 1] + threshold) / 2);\n\t});\n\n\tvar colorScale = function (value) {\n\t\treturn !isNaN(value) ? scale(value) : null;\n\t};\n\n\tcolorScale.domain = Object.freeze(domain);\n\tcolorScale.thresholds = Object.freeze(thresholds);\n\tcolorScale.centers = Object.freeze(centers);\n\n\treturn colorScale;\n}\n\nfunction interpolatePalette(interpolator, n, domain) {\n\tvar step = 1 / n;\n\tvar positions = [];\n\tfor (var i = 0; i < n; i++) {\n\t\tvar pos = i / n + step / 2;\n\t\tvar val = domain[0] + pos * (domain[domain.length - 1] - domain[0]);\n\t\tpositions.push(val);\n\t}\n\tvar colors = positions.map(interpolator);\n\treturn { positions: positions, colors: colors };\n}\n\nfunction ascendingSort(a, b) { return a - b; }\n","import { extent } from \"d3-array\";\n\nexport function getDomain(values) {\n\tvar domain = Array.isArray(values) ? extent(values) : [0, 1];\n\treturn domain;\n}\n","export default function(values, valueof) {\n  var n = values.length,\n      i = -1,\n      value,\n      min,\n      max;\n\n  if (valueof == null) {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = values[i]) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = values[i]) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  else {\n    while (++i < n) { // Find the first comparable value.\n      if ((value = valueof(values[i], i, values)) != null && value >= value) {\n        min = max = value;\n        while (++i < n) { // Compare the remaining values.\n          if ((value = valueof(values[i], i, values)) != null) {\n            if (min > value) min = value;\n            if (max < value) max = value;\n          }\n        }\n      }\n    }\n  }\n\n  return [min, max];\n}\n","import { scaleSequential } from \"d3-scale\";\nimport { interpolateBlues, interpolateBuGn, interpolateBuPu, interpolateCool, interpolateCubehelixDefault, interpolateGnBu, interpolateGreens, interpolateGreys, interpolateInferno, interpolateMagma, interpolateOranges, interpolateOrRd, interpolatePlasma, interpolatePuBu, interpolatePuBuGn, interpolatePuRd, interpolatePurples, interpolateRdPu, interpolateReds, interpolateViridis, interpolateWarm, interpolateYlGn, interpolateYlGnBu, interpolateYlOrBr, interpolateYlOrRd } from \"d3-scale-chromatic\";\nimport { interpolateHcl, interpolateHsl, interpolateLab, interpolateRgb, interpolateRgbBasis } from \"d3-interpolate\";\nimport { binnedScale } from \"../common/binning\";\nimport { getDomain } from \"../common/domain\";\n\nvar CARROTS = Object.freeze([\"#efeca4\", \"#e9e28f\", \"#dccf64\", \"#e3b23c\", \"#e49547\", \"#e37746\", \"#dc5b36\", \"#cb4144\", \"#bb2244\", \"#972545\", \"#6a2c4f\"]);\n\nvar INTERPOLATORS = Object.freeze({\n\tBlues: interpolateBlues,\n\tBuGn: interpolateBuGn,\n\tBuPu: interpolateBuPu,\n\tCarrots: interpolateRgbBasis(CARROTS),\n\tCool: interpolateCool,\n\tCubehelixDefault: interpolateCubehelixDefault,\n\tGnBu: interpolateGnBu,\n\tGreens: interpolateGreens,\n\tGreys: interpolateGreys,\n\tInferno: interpolateInferno,\n\tMagma: interpolateMagma,\n\tOranges: interpolateOranges,\n\tOrRd: interpolateOrRd,\n\tPlasma: interpolatePlasma,\n\tPuBu: interpolatePuBu,\n\tPuBuGn: interpolatePuBuGn,\n\tPuRd: interpolatePuRd,\n\tPurples: interpolatePurples,\n\tRdPu: interpolateRdPu,\n\tReds: interpolateReds,\n\tViridis: interpolateViridis,\n\tWarm: interpolateWarm,\n\tYlGn: interpolateYlGn,\n\tYlGnBu: interpolateYlGnBu,\n\tYlOrBr: interpolateYlOrBr,\n\tYlOrRd: interpolateYlOrRd\n});\n\nvar INTERPOLATOR_GENERATORS = {\n\thcl: interpolateHcl,\n\thsl: interpolateHsl,\n\tlab: interpolateLab,\n\trgb: interpolateRgb,\n};\n\nfunction getCustomInterpolator(state) {\n\tvar color_space = state.sequential_color_space;\n\tvar min = state.sequential_custom_min;\n\tvar max = state.sequential_custom_max;\n\treturn INTERPOLATOR_GENERATORS[color_space](min, max);\n}\n\nfunction getSequentialFunction(state, values) {\n\tvar domain = state.sequential_custom_domain && !state.binning ? [state.sequential_domain_min, state.sequential_domain_max] : getDomain(values);\n\tvar interpolate = function (t) {\n\t\tvar interpolation = INTERPOLATORS[state.sequential_palette] || getCustomInterpolator(state);\n\t\tif (state.sequential_reverse) return interpolation(1 - t);\n\t\telse return interpolation(t);\n\t};\n\tvar scale = scaleSequential(interpolate).domain(domain);\n\tvar colorScale = function (value) {\n\t\treturn !isNaN(value) ? scale(value) : null;\n\t};\n\tcolorScale.domain = Object.freeze(domain);\n\tif (!state.binning) return colorScale;\n\telse return binnedScale(state, domain, values, colorScale);\n}\n\nexport { getSequentialFunction };\n","import { scaleDiverging } from \"d3-scale\";\nimport { interpolateBrBG, interpolatePiYG, interpolatePRGn, interpolatePuOr, interpolateRdBu, interpolateRdGy, interpolateRdYlBu, interpolateRdYlGn, interpolateSpectral } from \"d3-scale-chromatic\";\nimport { interpolateHcl, interpolateHsl, interpolateLab, interpolateRgb, piecewise } from \"d3-interpolate\";\nimport { binnedScale } from \"../common/binning\";\nimport { getDomain } from \"../common/domain\";\n\nvar INTERPOLATORS = Object.freeze({\n\tBrBG: interpolateBrBG,\n\tPiYG: interpolatePiYG,\n\tPRGn: interpolatePRGn,\n\tPuOr: interpolatePuOr,\n\tRdBu: interpolateRdBu,\n\tRdGy: interpolateRdGy,\n\tRdYlBu: interpolateRdYlBu,\n\tRdYlGn: interpolateRdYlGn,\n\tSpectral: interpolateSpectral\n});\n\nvar INTERPOLATOR_GENERATORS = {\n\thcl: interpolateHcl,\n\thsl: interpolateHsl,\n\tlab: interpolateLab,\n\trgb: interpolateRgb,\n};\n\nfunction getCustomInterpolator(state) {\n\tvar color_space = state.diverging_color_space;\n\tvar min = state.diverging_custom_min;\n\tvar mid = state.diverging_custom_mid;\n\tvar max = state.diverging_custom_max;\n\treturn piecewise(INTERPOLATOR_GENERATORS[color_space], [min, mid, max]);\n}\n\n\nfunction getDivergingFunction(state, values) {\n\tvar extent = getDomain(values);\n\tvar midpoint = extent[0] < 0 && extent[1] > 0 ? 0 : (extent[0] + extent[1]) / 2;\n\tvar domain = [extent[0], midpoint, extent[1]];\n\n\tif (state.diverging_custom_domain) {\n\t\tif (state.binning) domain[1] = state.diverging_domain_mid;\n\t\telse domain = [state.diverging_domain_min, state.diverging_domain_mid, state.diverging_domain_max];\n\t}\n\n\tvar interpolate = function(t) {\n\t\tvar interpolation = INTERPOLATORS[state.diverging_palette] || getCustomInterpolator(state);\n\t\tif (state.diverging_reverse) return interpolation(1 - t);\n\t\telse return interpolation(t);\n\t};\n\n\tvar scale = scaleDiverging(interpolate).domain(domain);\n\tvar colorScale = function (value) {\n\t\treturn !isNaN(value) ? scale(value) : null;\n\t};\n\n\tcolorScale.domain = Object.freeze(domain);\n\tcolorScale.midpoint = state.diverging_custom_domain ? state.diverging_domain_mid : midpoint;\n\n\tif (!state.binning) return colorScale;\n\telse return binnedScale(state, domain, values, colorScale);\n}\n\n\nexport { getDivergingFunction };\n","export default function piecewise(interpolate, values) {\n  var i = 0, n = values.length - 1, v = values[0], I = new Array(n < 0 ? 0 : n);\n  while (i < n) I[i] = interpolate(v, v = values[++i]);\n  return function(t) {\n    var i = Math.max(0, Math.min(n - 1, Math.floor(t *= n)));\n    return I[i](t - i);\n  };\n}\n","import { DEFAULTS, DEFAULT_FALLBACK_VALUE } from \"./defaults\";\nimport { getCategoricalFunction } from \"./scales/categorical\";\nimport { getSequentialFunction } from \"./scales/sequential\";\nimport { getDivergingFunction } from \"./scales/diverging\";\n\n\nfunction init(state) {\n\tvar colorFunction = null;\n\n\tfor (var key in DEFAULTS) {\n\t\tif (state[key] === undefined) state[key] = DEFAULTS[key];\n\t}\n\n\tvar fallback_value = DEFAULT_FALLBACK_VALUE;\n\n\tvar updateColorScale = function(values) {\n\t\tif (state.scale_type === \"categorical\") colorFunction = getCategoricalFunction(state, values);\n\t\telse if (state.numeric_type === \"sequential\") colorFunction = getSequentialFunction(state, values);\n\t\telse if (state.numeric_type === \"diverging\") colorFunction = getDivergingFunction(state, values);\n\n\t\tgetColor.thresholds = colorFunction.thresholds;\n\t\tgetColor.centers = colorFunction.centers;\n\t\tgetColor.midpoint = colorFunction.midpoint;\n\t\tgetColor.domain = colorFunction.domain;\n\t\tgetColor.colors = colorFunction.colors;\n\t\tgetColor.items = colorFunction.items;\n\n\t\treturn this;\n\t};\n\n\tvar fallback = function(value) {\n\t\tif (value === undefined) return fallback_value;\n\t\tif (value === \"default\") fallback_value = DEFAULT_FALLBACK_VALUE;\n\t\telse fallback_value = value;\n\t\treturn this;\n\t};\n\n\tvar getColor = function(value) {\n\t\treturn colorFunction ? colorFunction(value) || fallback_value : fallback_value;\n\t};\n\n\treturn {\n\t\tgetColor: getColor,\n\t\tupdateColorScale: updateColorScale,\n\t\tfallback: fallback\n\t};\n}\n\n\nexport default init;\n","/**\n * @file\n * The draw function is called when the template first loads.\n */\n\nimport state from \"./state\";\nimport update from \"./update\";\nimport data from \"./data\";\nimport * as d3 from 'd3';\nimport { layout } from \"../init\";\nimport createChartLayout from \"@flourish/chart-layout\";\nimport createColors from \"@flourish/colors\"\nimport { extentMulti, getDots, getlines, getMoE} from '../parseData';\n\n\nlet chart, annoLabel, props, chart_layout, dateFormat, parseDate, columnNames, averageNames, parties, colors, formattedPolls, formattedAverages, valueExtent, plotData, legendData, annoData\n\nexport default function() {\n\n//get the dimensions of the layout primary container\nlet width = layout.getPrimaryWidth()\nlet height = layout.getPrimaryHeight()\n//get user defined date format and define the parseData function for building plotData\ndateFormat = state.dateFormat;\nparseDate = d3.timeParse(dateFormat);\n//Append chart content svg to the primary layout div\nchart = d3.select(\"#fl-layout-primary\")\n\t.append('svg')\n\t.attr('width', width)\n\t.attr('height', height)\n//Add seperate g element to hold the annotation labels outside the chart_layout to avoid them being masked\nannoLabel = chart.append('g')\n\t.attr('class', 'label')\n//Define the column names that are used as they key to build the formatted polls data object and define update Flourish colour domain\ncolumnNames = data.polls.column_names.value\n//Define the column names that are used as they key to build the formatted averages data object and define update Flourish colour domain\naverageNames = data.averages.column_names.value\n//Define the partieslooup array, used in getting the correct display depending on the chart width\nparties =  data.parties\n//Create the default Flourish colour pallettes and define the colour domain using columnNames\ncolors = createColors(state.color)\ncolors.updateColorScale(columnNames)\n//Create formatted data object of the polling data and format the dates\nformattedPolls = data.polls.map((d) => {\n\tvar row = {date: parseDate(d.date), pollster: d.house,}\n\tcolumnNames.map((el, i) => {\n\t\trow[columnNames[i]] = Number(d.value[i])\n\t\t})\n\t\treturn row\n}).sort((a, b) => a.date - b.date)\n//Create formatted data object of the averages data and format the dates\nformattedAverages = data.averages.map((d) => {\n\tvar row = {date: parseDate(d.date), code: d.code, geo: d.geo, race: d.race,}\n\taverageNames.map((el, i) => {\n\t\trow[averageNames[i]] = Number(d.value[i])\n\t\t})\n\t\treturn row\n}).sort((a, b) => a.date - b.date)\n//Calculate the initual value extent used to define the y axis in the update function\nvalueExtent = extentMulti(formattedPolls, columnNames);\n//create the data object passed to the update function that can be filtered by date to create the chart\nplotData  = columnNames.map(party => {\n\tconst partyData = parties.find(({ party: p }) => party === p);\n\treturn {\n\t\tparty,\n\t\tdisplayNameMob: partyData.displayNameMobile,\n\t\tdisplayNameDesk: partyData.displayNameDesktop,\n\t\tdots: getDots(formattedPolls, party,),\n\t\tlines: getlines(formattedAverages, party, partyData.displayNameDesktop),\n\t\tareas: getMoE(formattedAverages, party),\n\t}\n})\n\n// legendData = plotData.map((d) => {\n// \treturn {\n// \t\tlabel: d.displayNameDesk,\n// \t\tcolor: colors.getColor(d.party)\n// \t}\n// })\n// state.displayValues = legendData.map(d => d.label)\n//create the data object passed to the update function that can be filtered by date to create the chart annotations\nannoData = data.annotations.map((d) => {\n\treturn {\n\t\tdate: parseDate(d.date),\n\t\tannotation: d.annotation,\n\t}\n})\n//update the main layout (not chart_layout) with holding svg etc\nprops = { x: state.x, y: state.y, y2: state.y2, background: state.chart_bg };\nchart_layout = createChartLayout(chart, props);\nlayout.update()\n\n//call the update function\nupdate();\n//call the update function if the browser window gets resized\nwindow.onresize = function() { update() };\n}\n\nexport {layout, chart, annoLabel ,chart_layout, dateFormat, parseDate, columnNames, parties, colors, formattedPolls, formattedAverages, valueExtent, plotData, legendData, annoData};\n\n"],"names":["style_el","LAYOUTS","Object","freeze","stack-default","stack-2","stack-3","stack-4","constructor","factory","prototype","extend","parent","definition","create","key","Color","darker","brighter","reI","reN","reP","reHex","reRgbInteger","RegExp","reRgbPercent","reRgbaInteger","reRgbaPercent","reHslPercent","reHslaPercent","named","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","color_formatHex","this","rgb","formatHex","color_formatRgb","formatRgb","color","format","m","l","trim","toLowerCase","exec","length","parseInt","rgbn","Rgb","rgba","hsla","hasOwnProperty","NaN","n","r","g","b","a","rgbConvert","o","opacity","arguments","rgb_formatHex","hex","rgb_formatRgb","isNaN","Math","max","min","round","value","toString","h","s","Hsl","hslConvert","hsl","hsl2rgb","m1","m2","define","copy","channels","assign","displayable","formatHsl","k","pow","deg2rad","PI","rad2deg","Xn","Zn","t0","t1","t2","labConvert","Lab","Hcl","hcl2lab","x","z","rgb2lrgb","y","xyz2lab","lab","t","lab2xyz","lrgb2rgb","hclConvert","c","atan2","sqrt","hcl","cos","sin","header_el","title_el","subtitle_el","text_el","logo_el","footer_el","logo_link","A","B","C","D","E","ED","EB","BC_DA","cubehelixConvert","Cubehelix","bl","cubehelix","isUrl","string","match","cosh","sinh","document","createElement","getContext","has_footer","addHttp","url","indexOf","init","css","type","innerHTML","head","appendChild","className","target","darkBackground","state","background_color_enabled","console","warn","isPale","background_color","getFooterLogoSrc","src","footer_logo_src","footer_logo_src_light","hasFooterLogo","footer_logo_enabled","update","breakpoint_css","forEach","breakpoint_name","i","css_media_query","css_font_size","fonts","body_font","title_font","subtitle_font","footer_font","font","font_already_loaded","layout_fonts","querySelectorAll","href","font_link","setAttribute","font_el","font_needed","parentElement","removeChild","body","style","fontFamily","name","updateFontStyles","textAlign","header_align","margin","borderTop","header_border","header_border_width","header_border_style","header_border_color","borderBottom","paddingTop","header_border_space","paddingBottom","title","fontSize","title_size","title_size_custom","lineHeight","title_line_height","fontWeight","title_weight","title_color","font_color","title_space_above","title_space_above_custom","subtitle","subtitle_size","subtitle_size_custom","subtitle_line_height","subtitle_weight","subtitle_color","subtitle_space_above","subtitle_space_above_custom","header_text","header_text_size","header_text_size_custom","header_text_line_height","header_text_weight","header_text_color","header_text_space_above","header_text_space_above_custom","display","header_logo_enabled","header_logo_src","position","header_logo_align","height","header_logo_height","top","left","header_logo_position_outside","right","marginTop","header_logo_margin_top","marginBottom","header_logo_margin_bottom","marginLeft","header_logo_margin_left","marginRight","header_logo_margin_right","float","header_logo_position_inside","width","sources","source_name","source_url","multiple_sources","source_name_2","source_url_2","source_name_3","source_url_3","filter","source","footer_note","footer_note_secondary","footer_border","footer_border_space","footer_border_width","footer_border_style","footer_border_color","footer_align","justifyContent","footer_text_size","footer_text_color","alignItems","footer_align_vertical","source_container","link_container","innerText","link_el","order","footer_logo_order","text_el_html","source_label","footer_logo_height","footer_logo_margin","verticalAlign","footer_logo_link_url","cursor","updateFooter","backgroundColor","backgroundImage","background_image_enabled","background_image_src","backgroundSize","background_image_size","backgroundRepeat","backgroundPosition","background_image_position","elements","wrapper","maxWidth","max_width_target","max_width","max_width_align","padding","margin_top","margin_right","margin_bottom","margin_left","border","enabled","borderRight","bottom","borderLeft","p_style","primary","outer","l_style","legend","pos","parseFloat","layout_order","el","flex","setLegendPosition","controls","use_screenreader_text","screenreader_hide_primary","screenreader_text_primary","getElementById","removeAttribute","inner","margin_string","space_between_sections","space_between_sections_custom","SECTIONS","map","containers","getHeight","sort","obj","arr","DEFAULTS","breakpoint_mobile_small","breakpoint_mobile_big","breakpoint_tablet","breakpoint_desktop","breakpoint_big_screen","font_size_mobile_small","font_size_mobile_big","font_size_tablet","font_size_desktop","font_size_big_screen","title_styling","subtitle_styling","footer_styling","window_width","base_size","remToPx","rem","window","innerWidth","getComputedStyle","documentElement","overlay","getWidth","node","getBoundingClientRect","addElement","id","outer_el","inner_el","container","overflow","clip","getScreenreaderText","getWrapper","getSidebar","sidebar","getSection","section","getOuterWidth","undefined","getInnerWidth","getMargin","getBorderWidth","getOuterHeight","getInnerHeight","getPrimaryHeight","getVerticalPadding","getPrimaryWidth","getDefaultPrimaryHeight","Flourish","fixed_height","innerHeight","getDefaultHeight","reduce","sum","side","space","setHeight","primary_height","is_null","p_height","p_order","showOverlay","show_overlay","p","querySelector","message","textContent","getOverlay","layout","title_mode","tick_label_angle","line_and_tick_color","show_scale_settings","nice","axis_position","gridlines_visible","gridline_color","y2","domain","range","chart_bg","fixedHeight","dateFormat","tickFormat","dotSize","dotOpacity","polls","smallSize","largeSize","smallOpacity","largeOpacity","averages","smallStrokeWidth","largeStrokeWidth","moe","opacityMob","opacityDesk","legend_container","legend_categorical","swatch_width","swatch_height","displayValues","popup","xhtml","svg","xlink","xml","xmlns","prefix","slice","namespaces","local","creatorInherit","ownerDocument","uri","namespaceURI","createElementNS","creatorFixed","fullname","namespace","none","selector","empty","matches","Array","EnterNode","datum","_next","_parent","__data__","child","insertBefore","next","bindIndex","group","enter","exit","data","groupLength","dataLength","bindKey","keyValue","nodeByKeyValue","keyValues","call","ascending","attrRemove","attrRemoveNS","removeAttributeNS","attrConstant","attrConstantNS","setAttributeNS","attrFunction","v","apply","attrFunctionNS","defaultView","styleRemove","removeProperty","styleConstant","priority","setProperty","styleFunction","styleValue","getPropertyValue","propertyRemove","propertyConstant","propertyFunction","classArray","split","classList","ClassList","_node","_names","getAttribute","classedAdd","names","list","add","classedRemove","remove","classedTrue","classedFalse","classedFunction","textRemove","textConstant","textFunction","htmlRemove","htmlConstant","htmlFunction","raise","nextSibling","parentNode","lower","previousSibling","firstChild","constantNull","selection_cloneShallow","clone","cloneNode","selection_cloneDeep","push","join","splice","contains","filterEvents","event","mouseenter","mouseleave","filterContextListener","listener","index","contextListener","related","relatedTarget","compareDocumentPosition","event1","event0","parseTypenames","typenames","onRemove","typename","on","__on","j","removeEventListener","capture","onAdd","wrap","d","addEventListener","dispatchEvent","params","CustomEvent","createEvent","initEvent","bubbles","cancelable","detail","dispatchConstant","dispatchFunction","compare","f","root","Selection","groups","parents","_groups","_parents","selection","Stylesheet","declarations","Declaration","styles","select","subgroups","subnode","subgroup","selectAll","selectorAll","matcher","size","each","bind","constant","enterGroup","updateGroup","previous","i0","i1","_enter","_exit","sparse","onenter","onupdate","onexit","append","merge","groups0","groups1","m0","merges","group0","group1","compareNode","sortgroups","sortgroup","callback","nodes","attr","getAttributeNS","property","classed","text","html","creator","insert","before","deep","dispatch","declaration","addDeclaration","print","clear","_value","value_","small_gap","legend_count","show_legend","swatch_radius","legend_items_padding","icon_height","icon_color","order_override","orientation","DiscreteColorLegend","state_","_state","_colorFunction","_formatFunction","_legend_items","_filtered_items","_eventListeners","_id","_visible","_auto_title","_container","appendTo","formatFunction","getContainer","visible","visible_","autoTitle","_updateTitle","_this","items_","colorFunction_","isArray","legend_item","legend_item_label","label","filtered","d3_event","t_parent","item","item_data","should_display","_updateLegend","legend_item_data","items","order_override_string","new_index_lookup","overrides","sorted_items","old_index","new_index","sortByOrderOverride","legend_items","legend_items_enter","legend_items_update","icon","ceil","w","stroke_width","outline","stroke_thickness","aspect_ratio","width_px","text_size","path_string","transform","_legend_item_els","Map","object","set","Set","has","get","keys","values","entries","proto","linear","hue","gamma","nogamma","exponential","rgbGamma","start","end","colorRgb","spline","rgbBasis","floor","v1","v2","v0","v3","t3","basis","colors","genericArray","nb","na","Date","setTime","reA","reB","am","bm","bs","bi","lastIndex","q","number","one","zero","date","ArrayBuffer","isView","DataView","isNumberArray","numberArray","valueOf","cssNode","cssRoot","cssView","svgNode","degrees","identity","translateX","translateY","rotate","skewX","scaleX","scaleY","e","atan","interpolateTransform","parse","pxComma","pxParen","degParen","pop","xa","ya","xb","yb","translate","scale","interpolateTransformCss","decompose","interpolateTransformSvg","baseVal","consolidate","matrix","colorHsl","colorLab","colorHcl","cubehelixGamma","colorCubehelix","cubehelixLong","newInterval","floori","offseti","count","field","interval","d0","d1","offset","step","stop","test","every","isFinite","durationDay","durationWeek","day","setHours","setDate","getDate","getTimezoneOffset","weekday","getDay","sunday","monday","thursday","year","setMonth","setFullYear","getFullYear","utcDay","setUTCHours","setUTCDate","getUTCDate","utcWeekday","getUTCDay","utcSunday","utcMonday","utcThursday","utcYear","setUTCMonth","setUTCFullYear","getUTCFullYear","localDate","H","M","S","L","utcDate","UTC","newDate","locale","timeFormat","timeParse","pads","-","_","0","numberRe","percentRe","requoteRe","pad","fill","sign","requote","replace","formatRe","formatLookup","parseWeekdayNumberSunday","parseWeekdayNumberMonday","u","parseWeekNumberSunday","U","parseWeekNumberISO","V","parseWeekNumberMonday","W","parseFullYear","parseYear","parseZone","Z","parseQuarter","parseMonthNumber","parseDayOfMonth","parseDayOfYear","parseHour24","parseMinutes","parseSeconds","parseMilliseconds","parseMicroseconds","parseLiteralPercent","parseUnixTimestamp","Q","parseUnixTimestampSeconds","formatDayOfMonth","formatHour24","getHours","formatHour12","formatDayOfYear","timeDay","timeYear","formatMilliseconds","getMilliseconds","formatMicroseconds","formatMonthNumber","getMonth","formatMinutes","getMinutes","formatSeconds","getSeconds","formatWeekdayNumberMonday","formatWeekNumberSunday","timeSunday","dISO","timeThursday","formatWeekNumberISO","formatWeekdayNumberSunday","formatWeekNumberMonday","timeMonday","formatYear","formatYearISO","formatFullYear","formatFullYearISO","formatZone","formatUTCDayOfMonth","formatUTCHour24","getUTCHours","formatUTCHour12","formatUTCDayOfYear","formatUTCMilliseconds","getUTCMilliseconds","formatUTCMicroseconds","formatUTCMonthNumber","getUTCMonth","formatUTCMinutes","getUTCMinutes","formatUTCSeconds","getUTCSeconds","formatUTCWeekdayNumberMonday","dow","formatUTCWeekNumberSunday","UTCdISO","formatUTCWeekNumberISO","formatUTCWeekdayNumberSunday","formatUTCWeekNumberMonday","formatUTCYear","formatUTCYearISO","formatUTCFullYear","formatUTCFullYearISO","formatUTCZone","formatLiteralPercent","formatUnixTimestamp","formatUnixTimestampSeconds","locale_dateTime","dateTime","locale_date","locale_time","time","locale_periods","periods","locale_weekdays","days","locale_shortWeekdays","shortDays","locale_months","months","locale_shortMonths","shortMonths","periodRe","periodLookup","weekdayRe","weekdayLookup","shortWeekdayRe","shortWeekdayLookup","monthRe","monthLookup","shortMonthRe","shortMonthLookup","formats","G","I","X","Y","%","utcFormats","parses","parseSpecifier","newFormat","specifier","charCodeAt","charAt","newParse","week","utcFormat","utcParse","formatLocale","font_size","alignment","text_color","text_weight","legendContainer","container_","legends","_legends","self","template","is_horizontal","flex_alignment","color_band_width","color_band_height","color_band_radius","binned_label_mode","binned_label_custom","legend_min","legend_max","clip_height","small_circle_size","shape_fill","shape_stroke","outer_wrapper","flexGrow","flexDirection","boxSizing","aside","createWrapper","hgroup_el","initHeader","initFooter","zIndex","pointerEvents","paddingLeft","paddingRight","createOverlay","initLayout","createLegendContainer","createDiscreteColorLegend","getTextWidth","context","measureText","valueof","ascendingComparator","noop","Error","Dispatch","types","concat","T","that","args","taskHead","taskTail","frame","timeout","clockLast","clockNow","clockSkew","clock","performance","now","setFrame","requestAnimationFrame","setTimeout","clearNow","Timer","_call","_time","timer","delay","restart","timerFlush","wake","Infinity","sleep","nap","poke","clearTimeout","clearInterval","setInterval","elapsed","TypeError","emptyOn","emptyTween","timing","schedules","__transition","tween","schedule","tick","duration","ease","tweenRemove","tween0","tween1","tweenFunction","tweenValue","transition","interpolateNumber","interpolateRgb","interpolateString","interpolate","value1","string00","interpolate0","string1","string0","string10","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","delayFunction","delayConstant","durationFunction","durationConstant","easeConstant","onFunction","on0","on1","sit","styleInterpolate","styleTween","textInterpolate","textTween","Transition","_name","newId","selection_prototype","cubicInOut","children","inherit","id0","id1","styleNull","listener0","styleMaybeRemove","removeFunction","Promise","resolve","reject","cancel","interrupt","defaultTiming","easeCubicInOut","active","pi","tau","epsilon","tauEpsilon","Path","_x0","_y0","_x1","_y1","path","formatDecimalParts","toExponential","coefficient","moveTo","closePath","lineTo","quadraticCurveTo","x1","y1","bezierCurveTo","x2","arcTo","x0","y0","x21","y21","x01","y01","l01_2","abs","x20","y20","l21_2","l20_2","l21","l01","acos","t01","t21","arc","a0","a1","ccw","dx","dy","cw","da","rect","prefixExponent","re","formatSpecifier","FormatSpecifier","align","symbol","comma","precision","exponent","toFixed","toLocaleString","toPrecision","formatRounded","toUpperCase","prefixes","grouping","thousands","Number","substring","reverse","currencyPrefix","currency","currencySuffix","decimal","numerals","formatNumerals","String","percent","minus","nan","formatTypes","suffix","formatType","maybeSuffix","valuePrefix","valueSuffix","valueNegative","out","formatTrim","formatPrefix","scheme","interpolateRgbBasis","ramp","interpolateCubehelixLong","warm","cool","magma","inferno","plasma","Linear","_context","pointX","pointY","defined","curve","curveLinear","output","line","buffer","defined0","lineStart","lineEnd","point","getDots","dotsData","column","pollster","getlines","displayNameDesk","lineData","displayName","joinPoints","getMoE","areaData","areaStart","_line","areaEnd","_point","constrainer","BORDER","TRIANGLE_HALFWIDTH","TRIANGLE_HEIGHT","locateTriangle","hFlexTriangle","cb","y_factor","y_pos","px","shape","vFlexTriangle","x_factor","x_pos","py","boxBounds","dir","lt","svgElement","tagName","attrs","element","Popup__getConstrainer","_resizeConstrainer","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","rightFlexible","leftFlexible","next_unique_id","OPTIONS","directions","fallbackFit","Popup","unique_id","is_visible","handlers","click","accessor","Flourish_popup","arg1","arg2","HTMLElement","SVGElement","error","arg","_directions","_html","&","<",">","handler","fire","_getElement","class","in","stdDeviation","result","fe_component_transfer","slope","fe_merge","stroke","rx","content","_getConstrainer","old_display","scrollWidth","scrollHeight","draw","doc_rect","clientX","clientY","_maxWidth","maxContentWidth","_inner_html","content_box","vp_at_least_hp","hp_at_least_vp","first_fit","best_horizontal_fit","best_vertical_fit","least_horizontal_protrusion","least_vertical_protrusion","horizontal_protrusion","vertical_protrusion","_fallbackFit","positionBox","hide","version","open_duration","close_duration","popup_custom_template","shadow","underlay_color","width_side","height_side","width_overlay","height_overlay","vertical_position","max_height","closeable","Panel","panel","_is_open","_onclose","_close_duration","_inner","_content","fadeOutPanel","close","_default","_open_duration","window_w","window_h","_position","full_width","full_height","max_w_percent","_max_width","max_h_percent","_max_height","y_percent","position_click","_vertical_position","end_w_percent","_width_overlay","_width_side","end_h_percent","_height_overlay","_height_side","end_l_percent","end_t_percent_overlay","end_t_percent","start_w_percent","start_h_percent","start_l_percent","start_t_percent","_underlay_color","offset_panel_content","_closeable","openPanel","margins","stopPropagation","background","overflowY","addCloseButton","mode","locked_id","popup_is_custom","popup_custom_header","popup_custom_main","popup_teaser_default","popup_text_color","popup_align","popup_font_size","popup_width","popup_background","popup_background_opacity","popup_padding","popup_radius","popup_shadow","popup_pointer","popup_header_background","popup_header_text_color","popup_header_type","popup_list_type","popup_list_label_weight","popup_list_separator","panel_is_custom","panel_custom_header","panel_custom_main","panel_side_default_content","panel_side_fixed","panel_position","panel_width_overlay","panel_height_overlay","panel_vertical_position","panel_width_side","panel_height_side","panel_max_width","panel_max_height","panel_text_color","panel_align","panel_font_size","panel_background","panel_background_opacity","panel_padding","panel_radius","panel_shadow","panel_open_duration","panel_close_duration","panel_list_type","panel_list_label_weight","panel_list_separator","getDefaultHTML","instance","custom_default","list_mode","separator","separator_is_line_break","character_separator","line_break","target_col_name","_column_names","column_name","col_name","col_names_in_popup","_title_key","_subtitle_key","main_content","binding","getValueFromColumnName","some","getCustomHTML","content_header_raw","content_main_raw","content_header_parsed","getParsedContent","content_main_parsed","content_raw","if_contents","getPopupHTML","teaser","getPanelHTML","updateStyle","popup_el","popup_el_content","borderRadius","panel_el","panel_el_inner","panel_el_content","boxShadow","closer","header_block","header_background","panel_pos","appendStyles","InfoPopup","panel_container","popup_container","_popup_default_template","_panel_default_template","_first_load","_on_panel_close","_show_default_content_timer","_panel_container","_popup_container","_popup_directions","_getLockedPosition","disablePopupPointerEvents","enablePopupPointerEvents","getLockedPosition","getLockedPositionFunction","selected","clickout","coords_or_node","_checkIfPopupIsEmpty","hidePanel","hidePopup","_drawPanel","_drawPopup","_showDefaultPanelContent","touch","mouseover","touch_id","onclick","mouseout","locked","setColumnNames","column_names","onPanelClose","popupDirections","_getBiggestGap","node_bbox","best_side","arrow_directions","constrainer_bbox","biggest_gap","gaps","all_arrow_directions","node_rect","popupDefaultTemplate","panelDefaultTemplate","titleKey","subtitleKey","positionLabels","labels","spacing","alpha","average","d2","a2","deltaA","deltaY","adjust","displayData","updateColorScale","columnNames","chart","breaks","chart_layout","breakpoint","d3","initialisePopup","averagesExtent","formattedAverages","pollsExtent","formattedPolls","dateExtent","lineWidth","lineOpacity","moeOpacity","rightLabelWidth","getMaxTextWidth","xAlign","datetime_min","parseDate","datetime_max","numDays","log","plotData","filteredData","dots","lines","xTixkFormat","yData","valueExtent","xDatetimeParse","xData","xFormat","plot","data_foreground","yScale","xScale","area","x0z","y0z","arealine","lineX0","lineY0","lineY1","lineX1","annoData","annoLabel","annotation","areas","getColor","party","interpolation","Value","popDate","filteredAverages","ev","popUps","partyData","parties","displayNameDesktop","popColumns","popData","lastDate","labelData","displayNameMob","fillInDefaults","defaults","X_DEFAULTS","y_axis_position","numeric_scale_type","flip","zero_axis","linear_min","linear_max","log_min","log_max","line_visible","line_and_tick_width","tick_side","tick_mode","tick_number","tick_custom","tick_length","tick_padding","edge_padding","tick_label_position","tick_label_size","tick_label_color","tick_label_weight","tick_label_space_mode","tick_label_space","tick_label_max_lines","tick_label_line_height","gridline_width","gridline_style","gridline_category_dividers","gridline_category_dividers_extend","title_padding","Y_DEFAULTS","axis_visible","Y2_DEFAULTS","BACKGROUND_DEFAULTS","_assignProperties","obj_name","default_obj","prepareState","assignProperties","from","childMatcher","find","childFirst","firstElementChild","delete","options","isSvg","array","arrayAll","selectChild","childFind","selectChildren","childrenFilter","exitGroup","[object Object]","Symbol","iterator","counter","ALL_TRUE","ALL_FALSE","easeVarying","defaultFormat","initFormat","currentFormat","func","millisecond","durationSecond","durationMinute","durationHour","second","minute","hour","month","delta","lo","hi","mid","center","bisectRight","bisector","e10","e5","e2","ticks","tickIncrement","r0","r1","power","LN10","tickStep","step0","step1","defaultNumberParser","defaultDatetimeParser","initNumberParse","currentNumberParser","initDatetimeParse","currentDatetimeParser","getUniqueValues","uniq_arr","uniq_obj","createAdder","prop","defineProperty","enumerable","getter","method","best","sorted_values","lowest_first","rank","lookup","worst","unsorted_values","ties_method","dense","ll","hl","fractional","mapFunc","getRandomIntegerGenerator","nextRandom","random","first","last","randomFromArray","sampleArray","n_samples","n_points","getRandomInteger","pick_index","pick","temp","uncleanArray","dataset","dropped_indexes","dirty_value","unclean_data","value0","quantiles","sorted_data","vals","d3_quantile","addSummaries","mean","d3_variance","variance","iq","isLatitude","isLongitude","getScore","predicate_mode","addSorting","addSampling","addRanking","RangeError","addUncleaning","addGeographic","initProto","input_data","prev","isDescending","initInstance","PROPS_TO_STEAL","METHODS_TO_STEAL","numberToDate","num","_stealMethod","numeric_array","res","createNumericArray","entity","dt","getTime","median","stealMethod","n_empty","val","isAscending","getFont","container_selection","size_in_rem","weight","family_string","xyToTranslate","angleToRotate","angle","log10","LOG10E","getExponent","getSignificantDigitCount","linesIntersect","x3","x4","y3","y4","denominator","safeScale","scaleWrapper","unscaled_value","flipped","isDate","ERROR_MESSAGE","getFrozenData","enhanced_array","acc","createStringArray","createDatetimeArray","initData","current_data","DUMMY_TEXT","degToRad","deg","dropRepeatedLabels","tick_array","last_value","fv","getFitTextFunction","max_space","text_height","max_lines","ctx","theta","max_line_width","text_width","words","current_line","word","string_width","remove_counter","truncated_string","getAutoLabelSpaceFunction","dimension","UNITS","unit","dim","fraction","initVerticalTicks","y_name","data_name","format_name","ticks_name","getTicks","_update","string_array","max_box_width","bounds","autoLabelSpace","fitText","box_width","box_height","box_width_above","box_width_below","box_height_above","box_height_below","multiline_offset","total_text_height","sinTheta","cosTheta","significant_digits","initAutoTicks","axis","DEFAULT","domain_only","initAutoTitle","auto_title","getXAxisSpace","tick_space","xTicks","max_box_height","title_text","xTitle","title_container","title_selection","title_height","getXTitleHeight","getLeftMargin","axis_width","yHide","yTicks","yTitle","getYTitleHeight","x_overflow","x_ticks","xHide","first_x_tick","box_width_left","getRightMargin","y2_ticks","y2Hide","y2Ticks","y2Title","getY2TitleHeight","last_x_tick","box_width_right","initMargins","x_axis_space","y_offset","y2_offset","y_ticks","last_y_tick","last_y2_tick","y_overflow","getTopMargin","first_y_tick","first_y2_tick","getBottomMargin","initRange","implicit","ordinal","unknown","band","bandwidth","ordinalRange","paddingInner","paddingOuter","rescale","sequence","rangeRound","pointish","normalize","bimap","polymap","bisect","clamp","transformer","untransform","piecewise","input","interpolateValue","invert","interpolateRound","continuous","precisionPrefix","precisionRound","precisionFixed","linearish","prestep","maxIter","transformLog","transformExp","exp","transformLogn","transformExpn","pow10","reflect","loggish","logs","pows","base","log2","logp","powp","durationMonth","durationYear","calendar","formatMillisecond","formatSecond","formatMinute","formatHour","formatDay","formatWeek","formatMonth","tickIntervals","tickInterval","getPointScale","unique","scalePoint","getLinearScale","settings","include_zero","FALLBACK_DOMAIN_RANGE","extent","scaleLinear","getLinearDomain","getLogScale","scaleLog","getDatetimeScale","timeMonth","timeWeek","timeHour","timeMinute","timeSecond","timeMillisecond","scaleTime","minStep","scaled_data","uniqueAscending","min_step","initXScale","opts","x_data","xFlipAxis","getScale","datetime_array","xZeroAxis","x_width","plot_width","left_margin","x_state","no_padding","xPadding","unique_values","min_data_step","n_min_steps","step_width","getXPadding","range_start","global","offsetLeft","initYScale","y_data","yFlipAxis","yDatetimeParse","yZeroAxis","y_height","plot_height","top_margin","y_state","yPadding","getYPadding","effective_height","offsetTop","initY2Scale","y2_data","y2Data","y2FlipAxis","y2DatetimeParse","y2ZeroAxis","y2_height","y2_state","y2Padding","getY2Padding","initZeroAxis","initFlipAxis","initHide","keep_gridlines","getTickValues","axis_state","tick_list","is_datetime","parser","text_string","auto","isValidDate","initTickUpdating","tickSorter","diff","userSelectNone","getDirectionAttribute","initXAxisUpdating","animation_duration","line_color","line_width","tick_label_distance","x_left","x_mid","x_right","x_left_old","x_right_old","oldXScale","enteringXScale","exitingXScale","oldYScale","y_bottom_old","line_container","tick_container","updateBottomAxis","measurements","show_this_axis","y_bottom","title_distance","getAxisPosition","fallback","extended_gridline","axis_y_position_old","axis_y_position","line_enter","sorted_ticks","tickLabelTransform","tick_g","tick_g_exit","sel","tick_g_enter","tick_g_update","placed_ticks","y_anchor","setTickOpacity","x_anchor","p1q1","box_height_right","box_height_left","placed_tick","read_direction","tspans","updateTopAxis","y_top_old","y_top","animationDuration","ticks_labels_below","axis_height","ticks_out","setValues","initAxisUpdating","updateXAxes","updateYAxes","enteringYScale","exitingYScale","ticks_labels_side","y_mid","text_anchor","getTitleTransform","initYAxisUpdating","updateY2Axes","y2Scale","initY2AxisUpdating","DASH_ARRAYS","solid","dash","dot","dot_dash","getDashArray","multiplier","initUpdate","updateDebug","debug_rect","debugColor","debug","initDebugUpdating","updateTicks","updateClip","clip_path","clip_rect","clip_path_grid","clip_rect_grid","data_background","gridlines","identifier","clip_attr","id_grid","clip_attr_grid","lr_padding","tb_padding","initClipUpdating","updateBackground","bg","image","x_range","y_range","initBackgroundUpdating","updateAxes","updateGridlines","oldY2Scale","vertical","horizontal","enteringY2Scale","exitingY2Scale","getTicksForGridlines","v_data","dasharray","x_enter","x_step","gridline","extend_top","extend_bottom","y_enter","y_step","y2_step","h_data","vertical_lines","vertical_lines_enter","horizontal_lines","horizontal_lines_enter","initGridlineUpdating","dpr","devicePixelRatio","skip_rendering","initChartLayout","container_node","container_is_svg","getSvg","current_node","getContainers","addDebugRectangle","addBackground","gridlines_container","addGridlines","axes_container","x_axes","y_axes","addAxes","addChart","initIdentifier","initDebug","initDebugColor","initClip","initAnimationDuration","dimensions","plot_aspect","plotHeight","plotAspect","plotWidth","xLeft","xRight","yBottom","yTop","initDimensions","left_offset","initOffsetLeft","top_offset","initOffsetTop","yFormat","y2Format","xNumberParse","yNumberParse","y2NumberParse","xAutoTitle","initXTitle","yAutoTitle","initYTitle","y2AutoTitle","initY2Title","initXTicks","initYTicks","initY2Ticks","xAutoTicks","initXAutoTicks","yAutoTicks","initYAutoTicks","y2AutoTicks","initY2AutoTicks","includes","initXPadding","initYPadding","initY2Padding","xMinStep","initXMinStep","yMinStep","initYMinStep","y2MinStep","initY2MinStep","scale_type","categorical_type","categorical_palette","categorical_extend","categorical_custom_palette","numeric_type","sequential_palette","sequential_custom_min","sequential_custom_max","sequential_color_space","sequential_reverse","sequential_custom_domain","sequential_domain_min","sequential_domain_max","diverging_palette","diverging_custom_min","diverging_custom_mid","diverging_custom_max","diverging_color_space","diverging_reverse","diverging_custom_domain","diverging_domain_min","diverging_domain_mid","diverging_domain_max","binning","bin_count","bin_mode","bin_thresholds","DEFAULT_ANGLE","DEFAULT_COLOR","hueRotationGenerator","colorSpace","second_channel_name","third_channel_name","init_colors","palette","col","h_init","second_channel","third_channel","rotation","d3_color","color_generators","initInterpolator","interpolator","quantile","thresholds","threshold","invertExtent","quantize","k10","sequential","k21","diverging","binnedScale","domain_min","domain_max","centers","ascendingSort","positions","interpolatePalette","scaleQuantize","scaleQuantile","scaleThreshold","colorScale","getDomain","defaultLocale","CARROTS","INTERPOLATORS","Blues","interpolateBlues","BuGn","interpolateBuGn","BuPu","interpolateBuPu","Carrots","Cool","interpolateCool","CubehelixDefault","interpolateCubehelixDefault","GnBu","interpolateGnBu","Greens","interpolateGreens","Greys","interpolateGreys","Inferno","interpolateInferno","Magma","interpolateMagma","Oranges","interpolateOranges","OrRd","interpolateOrRd","Plasma","interpolatePlasma","PuBu","interpolatePuBu","PuBuGn","interpolatePuBuGn","PuRd","interpolatePuRd","Purples","interpolatePurples","RdPu","interpolateRdPu","Reds","interpolateReds","Viridis","interpolateViridis","Warm","interpolateWarm","YlGn","interpolateYlGn","YlGnBu","interpolateYlGnBu","YlOrBr","interpolateYlOrBr","YlOrRd","interpolateYlOrRd","INTERPOLATOR_GENERATORS","interpolateHcl","interpolateHsl","interpolateLab","getSequentialFunction","scaleSequential","color_space","getCustomInterpolator","BrBG","interpolateBrBG","PiYG","interpolatePiYG","PRGn","interpolatePRGn","PuOr","interpolatePuOr","RdBu","interpolateRdBu","RdGy","interpolateRdGy","RdYlBu","interpolateRdYlBu","RdYlGn","interpolateRdYlGn","Spectral","interpolateSpectral","getDivergingFunction","midpoint","scaleDiverging","colorFunction","fallback_value","unique_domain","d3_set","rotation_angle","colorGenerator","str","lastIndexOf","getCategoricalFunction","props","averageNames","createColors","row","house","code","geo","race","columns","ext","rowExtent","extentMulti","displayNameMobile","annotations","createChartLayout","onresize"],"mappings":"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"}